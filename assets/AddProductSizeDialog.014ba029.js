import{aB as P,bP as N,bD as j,k as v,o as f,b as V,w as a,p as e,bQ as L,bR as E,bS as R,ak as k,m as A,y as h,q as l,b$ as Q,c0 as G,av as U,aw as u,al as b,c as H,F as J,a as K,ag as W,ap as D}from"./index.e64427d3.js";import{_ as X}from"./AutoCompleteDropdown.9e522785.js";import{_ as Y}from"./DialogCloseBtn.4ef52386.js";import{u as Z}from"./Stocks.428ae40c.js";import{u as ee}from"./Stores.fcc6eba0.js";import{r as n}from"./validators.dc210ddc.js";import{V as le}from"./VForm.3f978c46.js";import{d as _}from"./VTextField.d0ea55f9.js";import{V as ae}from"./VSwitch.f0cc990b.js";import{V as se}from"./VDialog.b8fd2272.js";const te={class:"mx-1 my-1"},oe={class:"d-flex justify-space-between align-center mb-6"},re=A("h3",{class:""}," \u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A ",-1),be={__name:"AddProductSizeDialog",props:{isAddOpen:{type:Boolean,required:!0}},emits:["update:isAddOpen","refreshTable"],setup(M,{emit:T}){const z=M,g=T,t=P(),B=ee(),F=Z(),{t:d}=N(),r=j({name_en:null,name_ar:null,price:null,sale_price:null,weight:null,is_available_for_use:0}),m=v([]);v();const y=v(!1),O=()=>{g("update:isAddOpen",!1)},C=v(null),$=()=>{m.value.push({store_id:null,stock_id:null,quantity:1})},q=c=>{m.value=m.value.filter((o,i)=>i!=c)},I=async()=>{if(y.value=!0,(await C.value.validate()).valid){const o={...r,stores:m.value};t.storeProductSize(o).then(i=>{g("refreshTable"),g("update:isAddOpen",!1),t.alertColor="success",t.alertMessage="\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0646\u0635\u0631 \u0628\u0646\u062C\u0627\u062D",t.isAlertShow=!0,setTimeout(()=>{t.isAlertShow=!1,t.alertMessage=""},2e3)}).catch(i=>{i.response.data.errors?Object.keys(i.response.data.errors).forEach(s=>{t.alertMessage=d(`errors.${s}`)}):t.alertMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 !",y.value=!1,t.alertColor="error",t.isAlertShow=!0,setTimeout(()=>{t.isAlertShow=!1,t.alertMessage=""},2e3)})}else y.value=!1,t.alertMessage="\u064A\u0631\u062C\u064A \u062A\u0639\u0628\u0626\u0629 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 !",t.alertColor="error",t.isAlertShow=!0,setTimeout(()=>{t.isAlertShow=!1,t.alertMessage=""},2e3)},x=c=>{g("update:isAddOpen",c)};return(c,o)=>{const i=Y,S=X;return f(),V(se,{width:c.$vuetify.display.smAndDown?"auto":650,"model-value":z.isAddOpen,"onUpdate:modelValue":x},{default:a(()=>[e(i,{onClick:o[0]||(o[0]=s=>x(!1))}),e(L,{class:"pa-sm-9 pa-5"},{default:a(()=>[e(E,null,{default:a(()=>[e(R,{class:"text-h5 d-flex flex-column align-center gap-2 text-center mb-3"},{default:a(()=>[e(k,{icon:"game-icons:weight-scale",size:"24",color:"primary"}),A("span",te,h(l(d)("Add_Item")),1)]),_:1})]),_:1}),e(Q,null,{default:a(()=>[e(le,{ref_key:"refForm",ref:C,onSubmit:G(I,["prevent"])},{default:a(()=>[e(U,null,{default:a(()=>[e(u,{cols:"12",md:"6"},{default:a(()=>[e(_,{modelValue:l(r).name_ar,"onUpdate:modelValue":o[1]||(o[1]=s=>l(r).name_ar=s),label:l(d)("forms.name_ar"),rules:[l(n)]},null,8,["modelValue","label","rules"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(_,{modelValue:l(r).name_en,"onUpdate:modelValue":o[2]||(o[2]=s=>l(r).name_en=s),label:l(d)("forms.name_en"),rules:[l(n)]},null,8,["modelValue","label","rules"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(_,{modelValue:l(r).price,"onUpdate:modelValue":o[3]||(o[3]=s=>l(r).price=s),label:l(d)("forms.price"),rules:[l(n)],type:"number"},null,8,["modelValue","label","rules"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(_,{modelValue:l(r).sale_price,"onUpdate:modelValue":o[4]||(o[4]=s=>l(r).sale_price=s),label:l(d)("forms.sale_price"),rules:[l(n)],type:"number"},null,8,["modelValue","label","rules"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(_,{modelValue:l(r).weight,"onUpdate:modelValue":o[5]||(o[5]=s=>l(r).weight=s),label:l(d)("forms.weight"),rules:[l(n)]},null,8,["modelValue","label","rules"])]),_:1}),e(u,{cols:"12",md:"6"},{default:a(()=>[e(ae,{modelValue:l(r).is_available_for_use,"onUpdate:modelValue":o[6]||(o[6]=s=>l(r).is_available_for_use=s),label:l(d)("forms.available_for_use")},null,8,["modelValue","label"])]),_:1}),e(u,{cols:"12"},{default:a(()=>[A("div",oe,[re,e(b,{class:"position-relative",icon:"",size:"small",onClick:$},{default:a(()=>[e(k,{icon:"ei:plus",size:"30"})]),_:1})]),(f(!0),H(J,null,K(l(m),(s,w)=>(f(),V(U,{key:w,style:{"border-radius":"10px","background-color":"#fafafa"},class:"mb-6 py-3"},{default:a(()=>[e(u,{cols:"12",md:"6"},{default:a(()=>[e(S,{modelValue:s.store_id,"onUpdate:modelValue":p=>s.store_id=p,"api-model":l(B),"api-search-method":"getAll","item-title":"name","item-value":"id",label:"\u0627\u0644\u0645\u062E\u0632\u0646",placeholder:"\u0627\u0644\u0628\u062D\u062B \u0641\u064A \u0627\u0644\u0645\u062E\u0632\u0646",rules:[l(n)],style:{"background-color":"#fff"}},null,8,["modelValue","onUpdate:modelValue","api-model","rules"])]),_:2},1024),e(u,{cols:"12",md:"6"},{default:a(()=>[e(S,{modelValue:s.stock_id,"onUpdate:modelValue":p=>s.stock_id=p,"api-model":l(F),"api-search-method":"getAll","item-title":"product_name","item-value":"id",label:"\u0627\u0644\u0645\u062E\u0632\u0648\u0646",placeholder:"\u0627\u0644\u0628\u062D\u062B \u0641\u064A \u0627\u0644\u0645\u062E\u0632\u0648\u0646",rules:[l(n)],style:{"background-color":"#fff"}},null,8,["modelValue","onUpdate:modelValue","api-model","rules"])]),_:2},1024),e(u,{cols:"10",md:"6"},{default:a(()=>[e(_,{modelValue:s.quantity,"onUpdate:modelValue":p=>s.quantity=p,type:"number",min:"1",label:"\u0627\u0644\u0643\u0645\u064A\u0629",rules:[l(n)],style:{"background-color":"#fff"}},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),w>0||l(m).length>1?(f(),V(u,{key:0,cols:"2",md:"6",class:"d-flex justify-end"},{default:a(()=>[e(b,{icon:"",size:"small",style:{top:"5px",left:"5px"},onClick:p=>q(w)},{default:a(()=>[e(k,{icon:"simple-line-icons:minus",size:"20"})]),_:2},1032,["onClick"])]),_:2},1024)):W("",!0)]),_:2},1024))),128))]),_:1}),e(u,{cols:"12",class:"pt-4 text-center"},{default:a(()=>[l(y)?(f(),V(b,{key:1,type:"submit",class:"position-relative me-3"},{default:a(()=>[e(k,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(f(),V(b,{key:0,type:"submit",class:"me-3"},{default:a(()=>[D(h(l(d)("buttons.save")),1)]),_:1})),e(b,{variant:"tonal",color:"secondary",onClick:O},{default:a(()=>[D(h(l(d)("buttons.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}};export{be as _};
