import{aB as z,k as p,bP as B,bD as ae,c6 as se,o as x,b as S,w as a,p as e,bQ as q,bR as Q,bS as N,ak as D,m as r,y as c,q as t,b$ as M,c0 as Z,av as G,aw as A,al as O,ap as T,I as L,A as R,c as I,an as k,bZ as oe,F as ne,a as re,ar as ie,as as ue}from"./index.8d01543a.js";import{_ as H}from"./DialogCloseBtn.0d2acdf8.js";import{r as U}from"./validators.dc210ddc.js";import{V as J}from"./VForm.6ad382fa.js";import{d as F}from"./VTextField.b27bb6f2.js";import{V as K}from"./VDialog.6b48d5ed.js";import{_ as de}from"./AddProductPreparationDialog.b34676e5.js";import"./moment.9709ab41.js";import{V as ce}from"./VSelect.2c43c85a.js";import{V as me}from"./VSpacer.40a311d3.js";import{V as j}from"./VDivider.c9b30b9a.js";import{V as pe}from"./VPagination.6b05bef2.js";import"./forwardRefs.74a345f5.js";import"./index.4049f65e.js";import"./VOverlay.cd1f8bc0.js";import"./lazy.746ef82b.js";import"./VList.35d78c12.js";import"./ssrBoot.e590dc30.js";import"./VMenu.535e4389.js";import"./VCheckboxBtn.6481c716.js";import"./VChip.2389378e.js";const fe={class:"mx-1 my-1"},ve={__name:"EditProductPreparationDialog",props:{isEditOpen:{type:Boolean,required:!0},item:{type:Object,required:!0}},emits:["update:isEditOpen","refreshTable"],setup(E,{emit:b}){const h=E,v=b,l=z(),o=p(!1),{t:s}=B(),d=ae({name_en:null,name_ar:null,price:null}),f=p(),w=()=>{v("update:isEditOpen",!1)};se(()=>{d.id=h.item.id,d.name_en=h.item.name_en,d.name_ar=h.item.name_ar,d.price=h.item.price});const _=async()=>{o.value=!0,(await f.value.validate()).valid?l.editProductPerparation(d).then(i=>{v("refreshTable"),v("update:isEditOpen",!1),l.alertColor="success",l.alertMessage="\u062A\u0645 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0639\u0646\u0635\u0631 \u0628\u0646\u062C\u0627\u062D",l.isAlertShow=!0,setTimeout(()=>{l.isAlertShow=!1,l.alertMessage="",o.value=!1},1e3)}).catch(i=>{i.response.data.errors?Object.keys(i.response.data.errors).forEach(y=>{l.alertMessage=s(`errors.${y}`)}):l.alertMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 !",o.value=!1,l.alertColor="error",l.isAlertShow=!0,setTimeout(()=>{l.isAlertShow=!1,l.alertMessage=""},2e3)}):(o.value=!1,l.alertMessage="\u064A\u0631\u062C\u064A \u062A\u0639\u0628\u0626\u0629 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 !",l.alertColor="error",l.isAlertShow=!0,setTimeout(()=>{l.isAlertShow=!1,l.alertMessage=""},2e3))},V=g=>{v("update:isEditOpen",g)};return(g,i)=>{const $=H;return x(),S(K,{width:g.$vuetify.display.smAndDown?"auto":650,"model-value":h.isEditOpen,"onUpdate:modelValue":V},{default:a(()=>[e($,{onClick:i[0]||(i[0]=y=>V(!1))}),e(q,{class:"pa-sm-9 pa-5"},{default:a(()=>[e(Q,null,{default:a(()=>[e(N,{class:"text-h5 d-flex flex-column align-center gap-2 text-center mb-3"},{default:a(()=>[e(D,{icon:"clarity:process-on-vm-line",size:"24",color:"primary"}),r("span",fe,c(t(s)("Edit_Item")),1)]),_:1})]),_:1}),e(M,null,{default:a(()=>[e(J,{ref_key:"refForm",ref:f,onSubmit:Z(_,["prevent"])},{default:a(()=>[e(G,null,{default:a(()=>[e(A,{cols:"12",md:"6"},{default:a(()=>[e(F,{modelValue:t(d).name_ar,"onUpdate:modelValue":i[1]||(i[1]=y=>t(d).name_ar=y),label:t(s)("forms.name_ar"),rules:[t(U)]},null,8,["modelValue","label","rules"])]),_:1}),e(A,{cols:"12",md:"6"},{default:a(()=>[e(F,{modelValue:t(d).name_en,"onUpdate:modelValue":i[2]||(i[2]=y=>t(d).name_en=y),label:t(s)("forms.name_en"),rules:[t(U)]},null,8,["modelValue","label","rules"])]),_:1}),e(A,{cols:"12",md:"6"},{default:a(()=>[e(F,{modelValue:t(d).price,"onUpdate:modelValue":i[3]||(i[3]=y=>t(d).price=y),label:t(s)("forms.price"),rules:[t(U)]},null,8,["modelValue","label","rules"])]),_:1}),e(A,{cols:"12",class:"text-center"},{default:a(()=>[t(o)?(x(),S(O,{key:1,type:"submit",class:"position-relative me-3"},{default:a(()=>[e(D,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(x(),S(O,{key:0,type:"submit",class:"me-3"},{default:a(()=>[T(c(t(s)("buttons.save")),1)]),_:1})),e(O,{variant:"tonal",color:"secondary",onClick:w},{default:a(()=>[T(c(t(s)("buttons.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},_e={__name:"DeleteProductPreparationDialog",props:{isDeleteOpen:{type:Boolean,required:!0},item:{type:Object,required:!0}},emits:["update:isDeleteOpen","refreshTable"],setup(E,{emit:b}){const h=E,v=b,l=p(!1),{t:o}=B(),s=z(),d=()=>{v("update:isDeleteOpen",!1)},f=()=>{l.value=!0,s.deleteProductPerparation(h.item).then(()=>{v("refreshTable"),v("update:isDeleteOpen",!1),s.alertColor="success",s.alertMessage="\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0639\u0646\u0635\u0631 \u0628\u0646\u062C\u0627\u062D",s.isAlertShow=!0,setTimeout(()=>{s.isAlertShow=!1,s.alertMessage="",l.value=!1},1e3)}).catch(_=>{l.value=!1,s.alertColor="error",s.alertMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 !",s.isAlertShow=!0,setTimeout(()=>{s.isAlertShow=!1,s.alertMessage=""},2e3)})},w=_=>{v("update:isDeleteOpen",_)};return(_,V)=>{const g=H;return x(),S(K,{width:_.$vuetify.display.smAndDown?"auto":650,"model-value":h.isDeleteOpen,"onUpdate:modelValue":w},{default:a(()=>[e(g,{onClick:V[0]||(V[0]=i=>w(!1))}),e(q,{class:"pa-sm-9 pa-5"},{default:a(()=>[e(Q,null,{default:a(()=>[e(N,{class:"text-h5 text-center mb-3"},{default:a(()=>[e(D,{icon:"ph:info-light",color:"#f00",size:"50"}),r("h5",null,c(t(o)("ask_delete")),1)]),_:1})]),_:1}),e(M,null,{default:a(()=>[e(J,{ref:"refForm",onSubmit:Z(f,["prevent"])},{default:a(()=>[e(G,null,{default:a(()=>[e(A,{cols:"12",class:"text-center"},{default:a(()=>[t(l)?(x(),S(O,{key:1,type:"submit",class:"position-relative me-3"},{default:a(()=>[e(D,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(x(),S(O,{key:0,type:"submit",class:"me-3",color:"primary"},{default:a(()=>[T(c(t(o)("buttons.confirm")),1)]),_:1})),e(O,{variant:"tonal",color:"secondary",onClick:d},{default:a(()=>[T(c(t(o)("buttons.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},ge={class:"mx-1"},be={style:{width:"5rem"}},he={scope:"col",class:"font-weight-semibold"},Ve={scope:"col",class:"font-weight-semibold"},ye={scope:"col",class:"font-weight-semibold"},we={scope:"col",class:"font-weight-semibold"},xe=r("tr",null,[r("td",{colspan:"8",class:"text-center text-body-1"}," \u0644\u0627 \u064A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A ")],-1),Oe=[xe],De={class:"text-sm text-disabled"},Ge={__name:"product-preparation",setup(E){const{t:b}=B(),h=z(),v=p("");p();const l=p(5),o=p(1),s=p(1),d=p(0),f=p([]);p([]);const w=p(!1),_=p(!1),V=p({}),g=p(!1),i=()=>{h.fetchProductPerparation({q:v.value}).then(m=>{f.value=m.data.data,s.value=f.value/l,d.value=f.value.length,o.value=1}).catch(m=>{console.log(m)})};L(()=>{i()}),L(()=>{l.value&&(o.value=1)});const $=R(()=>(s.value=Math.ceil(f.value.length/l.value),f.value.filter((m,n)=>{let P=(o.value-1)*l.value,u=o.value*l.value;if(n>=P&&n<u)return!0}))),y=()=>{o.value*l.value<f.value.length&&o.value},W=()=>{o.value>1&&o.value},X=R(()=>{const m=f.value.length?(o.value-1)*l.value+1:0,n=m+(l.value-1)<=f.value.length?m+(l.value-1):d.value;return` \u0639\u0631\u0636 \u0645\u0646 ${C(m)} \u0625\u0644\u064A ${C(n)} \u0645\u0646 ${C(d.value)} \u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A `}),Y=m=>{_.value=!0,V.value=m},ee=m=>{g.value=!0,V.value=m},C=m=>{const n="\u0660\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669";return String(m).replace(/[0123456789]/g,P=>n[P])};return(m,n)=>{const P=ve;return x(),I("div",null,[e(q,null,{default:a(()=>[e(N,{class:"d-flex align-center"},{default:a(()=>[e(D,{icon:"clarity:process-on-vm-line",size:"24",color:"primary"}),r("span",ge,c(t(b)("Product_Preparation")),1)]),_:1}),e(M,{class:"d-flex align-center flex-wrap gap-2 py-4"},{default:a(()=>[r("div",be,[e(ce,{modelValue:t(l),"onUpdate:modelValue":n[0]||(n[0]=u=>k(l)?l.value=u:null),variant:"outlined",items:[5,10,20,30,50]},null,8,["modelValue"])]),e(O,{"prepend-icon":"tabler-plus",onClick:n[1]||(n[1]=u=>w.value=!0)},{default:a(()=>[T(c(t(b)("Add_Item")),1)]),_:1}),e(me)]),_:1}),e(j),e(oe,{class:"text-no-wrap product-list-table"},{default:a(()=>[r("thead",null,[r("tr",null,[r("th",he,c(t(b)("forms.id")),1),r("th",Ve,c(t(b)("forms.name")),1),r("th",ye,c(t(b)("forms.price")),1),r("th",we,c(t(b)("forms.actions")),1)])]),r("tbody",null,[(x(!0),I(ne,null,re(t($),(u,te)=>(x(),I("tr",{key:u.id},[r("td",null," #"+c(C(++te)),1),r("td",null,c(u.name_ar),1),r("td",null,c(C(Intl.NumberFormat().format(u.price))),1),r("td",null,[e(O,{icon:"",variant:"plain",color:"default",size:"x-small",onClick:le=>ee(u)},{default:a(()=>[e(D,{size:22,icon:"tabler-pencil"})]),_:2},1032,["onClick"]),e(O,{icon:"",variant:"plain",color:"default",size:"x-small",onClick:le=>Y(u)},{default:a(()=>[e(D,{size:22,icon:"tabler-trash"})]),_:2},1032,["onClick"])])]))),128))]),ie(r("tfoot",null,Oe,512),[[ue,!t(f).length]])]),_:1}),e(j),e(M,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3"},{default:a(()=>[r("span",De,c(t(X)),1),e(pe,{modelValue:t(o),"onUpdate:modelValue":n[2]||(n[2]=u=>k(o)?o.value=u:null),size:"small","total-visible":t(l),length:t(s),onNext:y,onPrev:W},null,8,["modelValue","total-visible","length"])]),_:1})]),_:1}),e(de,{isAddOpen:t(w),"onUpdate:isAddOpen":n[3]||(n[3]=u=>k(w)?w.value=u:null),onRefreshTable:i},null,8,["isAddOpen"]),e(P,{isEditOpen:t(g),"onUpdate:isEditOpen":n[4]||(n[4]=u=>k(g)?g.value=u:null),item:t(V),onRefreshTable:i},null,8,["isEditOpen","item"]),e(_e,{isDeleteOpen:t(_),"onUpdate:isDeleteOpen":n[5]||(n[5]=u=>k(_)?_.value=u:null),item:t(V),onRefreshTable:i},null,8,["isDeleteOpen","item"])])}}};export{Ge as default};
