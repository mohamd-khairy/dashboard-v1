import{k as v,bP as Z,aB as G,o as b,b as k,w as t,p as l,bQ as H,bR as Y,bS as J,ak as z,m as r,y as d,q as e,b$ as L,c0 as ee,av as Q,aw as h,al as x,ap as I,bD as ue,c6 as de,c as B,F as le,a as te,ag as N,I as K,A as W,C as me,an as M,bZ as ce,ar as pe,as as fe}from"./index.8d01543a.js";import{_ as ae}from"./DialogCloseBtn.0d2acdf8.js";import{V as se}from"./VForm.6ad382fa.js";import{V as oe}from"./VDialog.6b48d5ed.js";import{_ as _e}from"./AutoCompleteDropdown.4e95d107.js";import{u as ve}from"./Stocks.828f6985.js";import{u as ge}from"./Stores.7e0274da.js";import{r as U}from"./validators.dc210ddc.js";import{d as T}from"./VTextField.b27bb6f2.js";import{V as be}from"./VSwitch.5107874e.js";import{_ as he}from"./AddProductSizeDialog.8cfba454.js";import"./moment.9709ab41.js";import{V as Ve}from"./VSelect.2c43c85a.js";import{V as ye}from"./VSpacer.40a311d3.js";import{V as X}from"./VDivider.c9b30b9a.js";import{V as we}from"./VPagination.6b05bef2.js";import"./forwardRefs.74a345f5.js";import"./VOverlay.cd1f8bc0.js";import"./lazy.746ef82b.js";import"./VList.35d78c12.js";import"./index.4049f65e.js";import"./ssrBoot.e590dc30.js";import"./VCheckboxBtn.6481c716.js";import"./VMenu.535e4389.js";import"./VChip.2389378e.js";const Se={__name:"DeleteProductSizeDialog",props:{isDeleteOpen:{type:Boolean,required:!0},item:{type:Object,required:!0}},emits:["update:isDeleteOpen","refreshTable"],setup(F,{emit:V}){const g=F,y=V,a=v(!1),{t:c}=Z(),_=G(),w=()=>{y("update:isDeleteOpen",!1)},u=()=>{a.value=!0,_.deleteProductSize(g.item).then(()=>{y("refreshTable"),y("update:isDeleteOpen",!1),_.alertColor="success",_.alertMessage="\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0639\u0646\u0635\u0631 \u0628\u0646\u062C\u0627\u062D",_.isAlertShow=!0,setTimeout(()=>{_.isAlertShow=!1,_.alertMessage="",a.value=!1},1e3)}).catch(p=>{a.value=!1,_.alertColor="error",_.alertMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 !",_.isAlertShow=!0,setTimeout(()=>{_.isAlertShow=!1,_.alertMessage=""},2e3)})},o=p=>{y("update:isDeleteOpen",p)};return(p,D)=>{const C=ae;return b(),k(oe,{width:p.$vuetify.display.smAndDown?"auto":650,"model-value":g.isDeleteOpen,"onUpdate:modelValue":o},{default:t(()=>[l(C,{onClick:D[0]||(D[0]=P=>o(!1))}),l(H,{class:"pa-sm-9 pa-5"},{default:t(()=>[l(Y,null,{default:t(()=>[l(J,{class:"text-h5 text-center mb-3"},{default:t(()=>[l(z,{icon:"ph:info-light",color:"#f00",size:"50"}),r("h5",null,d(e(c)("ask_delete")),1)]),_:1})]),_:1}),l(L,null,{default:t(()=>[l(se,{ref:"refForm",onSubmit:ee(u,["prevent"])},{default:t(()=>[l(Q,null,{default:t(()=>[l(h,{cols:"12",class:"text-center"},{default:t(()=>[e(a)?(b(),k(x,{key:1,type:"submit",class:"position-relative me-3"},{default:t(()=>[l(z,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(b(),k(x,{key:0,type:"submit",class:"me-3",color:"primary"},{default:t(()=>[I(d(e(c)("buttons.confirm")),1)]),_:1})),l(x,{variant:"tonal",color:"secondary",onClick:w},{default:t(()=>[I(d(e(c)("buttons.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},ke={class:"mx-1 my-1"},xe={class:"d-flex justify-space-between align-center mb-6"},De=r("h3",{class:""}," \u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A ",-1),Ce={__name:"EditProductSizeDialog",props:{isEditOpen:{type:Boolean,required:!0},item:{type:Object,required:!0}},emits:["update:isEditOpen","refreshTable"],setup(F,{emit:V}){const g=F,y=V,a=G(),c=ge(),_=ve(),w=v(!1),{t:u}=Z(),o=ue({name_en:null,name_ar:null,price:null,sale_price:null,weight:null,is_available_for_use:!1}),p=v([]),D=v(null),C=()=>{y("update:isEditOpen",!1)},P=()=>{p.value.push({store_id:null,stock_id:null,quantity:1})},$=A=>{p.value=p.value.filter((m,O)=>O!=A)};de(()=>{o.id=g.item.id,o.name_en=g.item.name_en,o.name_ar=g.item.name_ar,o.price=g.item.price,o.sale_price=g.item.sale_price,o.weight=g.item.weight,o.is_available_for_use=g.item.use_again==1,g.item.stores&&g.item.stores.length&&(p.value=g.item.stores)});const j=async()=>{if(w.value=!0,(await D.value.validate()).valid){const m={...o,stores:p.value};a.editProductSize(m).then(O=>{y("refreshTable"),y("update:isEditOpen",!1),a.alertColor="success",a.alertMessage="\u062A\u0645 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0639\u0646\u0635\u0631 \u0628\u0646\u062C\u0627\u062D",a.isAlertShow=!0,setTimeout(()=>{a.isAlertShow=!1,a.alertMessage="",w.value=!1},1e3)}).catch(O=>{O.response.data.errors?Object.keys(O.response.data.errors).forEach(s=>{a.alertMessage=u(`errors.${s}`)}):a.alertMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 !",w.value=!1,a.alertColor="error",a.isAlertShow=!0,setTimeout(()=>{a.isAlertShow=!1,a.alertMessage=""},2e3)})}else w.value=!1,a.alertMessage="\u064A\u0631\u062C\u064A \u062A\u0639\u0628\u0626\u0629 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 !",a.alertColor="error",a.isAlertShow=!0,setTimeout(()=>{a.isAlertShow=!1,a.alertMessage=""},2e3)},q=A=>{y("update:isEditOpen",A)};return(A,m)=>{const O=ae,E=_e;return b(),k(oe,{width:A.$vuetify.display.smAndDown?"auto":650,"model-value":g.isEditOpen,"onUpdate:modelValue":q},{default:t(()=>[l(O,{onClick:m[0]||(m[0]=s=>q(!1))}),l(H,{class:"pa-sm-9 pa-5"},{default:t(()=>[l(Y,null,{default:t(()=>[l(J,{class:"text-h5 d-flex flex-column align-center gap-2 text-center mb-3"},{default:t(()=>[l(z,{icon:"game-icons:weight-scale",size:"24",color:"primary"}),r("span",ke,d(e(u)("Edit_Item")),1)]),_:1})]),_:1}),l(L,null,{default:t(()=>[l(se,{ref_key:"refForm",ref:D,onSubmit:ee(j,["prevent"])},{default:t(()=>[l(Q,null,{default:t(()=>[l(h,{cols:"12",md:"6"},{default:t(()=>[l(T,{modelValue:e(o).name_ar,"onUpdate:modelValue":m[1]||(m[1]=s=>e(o).name_ar=s),label:e(u)("forms.name_ar"),rules:[e(U)]},null,8,["modelValue","label","rules"])]),_:1}),l(h,{cols:"12",md:"6"},{default:t(()=>[l(T,{modelValue:e(o).name_en,"onUpdate:modelValue":m[2]||(m[2]=s=>e(o).name_en=s),label:e(u)("forms.name_en"),rules:[e(U)]},null,8,["modelValue","label","rules"])]),_:1}),l(h,{cols:"12",md:"6"},{default:t(()=>[l(T,{modelValue:e(o).price,"onUpdate:modelValue":m[3]||(m[3]=s=>e(o).price=s),label:e(u)("forms.price"),rules:[e(U)],type:"number"},null,8,["modelValue","label","rules"])]),_:1}),l(h,{cols:"12",md:"6"},{default:t(()=>[l(T,{modelValue:e(o).sale_price,"onUpdate:modelValue":m[4]||(m[4]=s=>e(o).sale_price=s),label:e(u)("forms.sale_price"),rules:[e(U)],type:"number"},null,8,["modelValue","label","rules"])]),_:1}),l(h,{cols:"12",md:"6"},{default:t(()=>[l(T,{modelValue:e(o).weight,"onUpdate:modelValue":m[5]||(m[5]=s=>e(o).weight=s),label:e(u)("forms.weight"),rules:[e(U)]},null,8,["modelValue","label","rules"])]),_:1}),l(h,{cols:"12",md:"6"},{default:t(()=>[l(be,{modelValue:e(o).is_available_for_use,"onUpdate:modelValue":m[6]||(m[6]=s=>e(o).is_available_for_use=s),label:e(u)("forms.available_for_use")},null,8,["modelValue","label"])]),_:1}),l(h,{cols:"12"},{default:t(()=>[r("div",xe,[De,l(x,{class:"position-relative",icon:"",size:"small",onClick:P},{default:t(()=>[l(z,{icon:"ei:plus",size:"30"})]),_:1})]),(b(!0),B(le,null,te(e(p),(s,i)=>(b(),k(Q,{key:i,style:{"border-radius":"10px","background-color":"#fafafa"},class:"mb-6 py-3"},{default:t(()=>[l(h,{cols:"12",md:"6"},{default:t(()=>[l(E,{modelValue:s.store_id,"onUpdate:modelValue":n=>s.store_id=n,"model-value":s.store_id?s:null,"api-model":e(c),"api-search-method":"getAll","item-title":"name","item-value":"id",label:"\u0627\u0644\u0645\u062E\u0632\u0646",placeholder:"\u0627\u0644\u0628\u062D\u062B \u0641\u064A \u0627\u0644\u0645\u062E\u0632\u0646",rules:[e(U)],style:{"background-color":"#fff"}},null,8,["modelValue","onUpdate:modelValue","model-value","api-model","rules"])]),_:2},1024),l(h,{cols:"12",md:"6"},{default:t(()=>[l(E,{modelValue:s.stock_id,"onUpdate:modelValue":n=>s.stock_id=n,"model-value":s.stock_id?s:null,"api-model":e(_),"api-search-method":"getAll","item-title":"product_name","item-value":"id",label:"\u0627\u0644\u0645\u062E\u0632\u0648\u0646",placeholder:"\u0627\u0644\u0628\u062D\u062B \u0641\u064A \u0627\u0644\u0645\u062E\u0632\u0648\u0646",rules:[e(U)],style:{"background-color":"#fff"}},null,8,["modelValue","onUpdate:modelValue","model-value","api-model","rules"])]),_:2},1024),l(h,{cols:"10",md:"6"},{default:t(()=>[l(T,{modelValue:s.quantity,"onUpdate:modelValue":n=>s.quantity=n,type:"number",min:"1",label:"\u0627\u0644\u0643\u0645\u064A\u0629",rules:[e(U)],style:{"background-color":"#fff"}},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),i>0||e(p).length>1?(b(),k(h,{key:0,cols:"2",md:"6",class:"d-flex justify-end"},{default:t(()=>[l(x,{icon:"",size:"small",style:{top:"5px",left:"5px"},onClick:n=>$(i)},{default:t(()=>[l(z,{icon:"simple-line-icons:minus",size:"20"})]),_:2},1032,["onClick"])]),_:2},1024)):N("",!0)]),_:2},1024))),128))]),_:1}),l(h,{cols:"12",class:"pt-4 text-center"},{default:t(()=>[e(w)?(b(),k(x,{key:1,type:"submit",class:"position-relative me-3"},{default:t(()=>[l(z,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(b(),k(x,{key:0,type:"submit",class:"me-3"},{default:t(()=>[I(d(e(u)("buttons.save")),1)]),_:1})),l(x,{variant:"tonal",color:"secondary",onClick:C},{default:t(()=>[I(d(e(u)("buttons.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},Oe={class:"mx-1"},ze={style:{width:"5rem"}},Ae={scope:"col",class:"font-weight-semibold"},Ue={scope:"col",class:"font-weight-semibold"},$e={scope:"col",class:"font-weight-semibold"},Pe={scope:"col",class:"font-weight-semibold"},Te={scope:"col",class:"font-weight-semibold"},Ee={scope:"col",class:"font-weight-semibold"},Me=r("tr",null,[r("td",{colspan:"8",class:"text-center text-body-1"}," \u0644\u0627 \u064A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A ")],-1),Ie=[Me],Fe={class:"text-sm text-disabled"},dl={__name:"product-size",setup(F){const{t:V}=Z(),g=G(),y=v("");v();const a=v(5),c=v(1),_=v(1),w=v(0),u=v([]);v([]);const o=v(!1),p=v(!1),D=v({}),C=v(!1),P=v(!1),$=()=>{P.value=!0,g.fetchProductSize({q:y.value}).then(i=>{u.value=i.data.data,_.value=u.value/a,w.value=u.value.length,c.value=1}).catch(i=>{console.log(i)}).finally(()=>{P.value=!1})};K(()=>{$()}),K(()=>{a.value&&(c.value=1)});const j=W(()=>(_.value=Math.ceil(u.value.length/a.value),u.value.filter((i,n)=>{let S=(c.value-1)*a.value,R=c.value*a.value;if(n>=S&&n<R)return!0}))),q=()=>{c.value*a.value<u.value.length&&c.value},A=()=>{c.value>1&&c.value},m=W(()=>{const i=u.value.length?(c.value-1)*a.value+1:0,n=i+(a.value-1)<=u.value.length?i+(a.value-1):w.value;return` \u0639\u0631\u0636 \u0645\u0646 ${s(i)} \u0625\u0644\u064A ${s(n)} \u0645\u0646 ${s(w.value)} \u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A `}),O=i=>{p.value=!0,D.value=i},E=i=>{var n;C.value=!0,i.stores=(n=i==null?void 0:i.stores)==null?void 0:n.map(S=>(S.name=S.store.name,S.product_name=S.stock.product_name,S)),D.value=i},s=i=>{const n="\u0660\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669";return String(i).replace(/[0123456789]/g,S=>n[S])};return me(()=>{$()}),(i,n)=>{const S=he,R=Ce,ne=Se;return b(),B("div",null,[l(H,{loading:e(P)},{default:t(()=>[l(J,{class:"d-flex align-center"},{default:t(()=>[l(z,{icon:"game-icons:weight-scale",size:"24",color:"primary"}),r("span",Oe,d(e(V)("Product_Size")),1)]),_:1}),l(L,{class:"d-flex align-center flex-wrap gap-2 py-4"},{default:t(()=>[r("div",ze,[l(Ve,{modelValue:e(a),"onUpdate:modelValue":n[0]||(n[0]=f=>M(a)?a.value=f:null),variant:"outlined",items:[5,10,20,30,50]},null,8,["modelValue"])]),l(x,{"prepend-icon":"tabler-plus",onClick:n[1]||(n[1]=f=>o.value=!0)},{default:t(()=>[I(d(e(V)("Add_Item")),1)]),_:1}),l(ye)]),_:1}),l(X),l(ce,{class:"text-no-wrap product-list-table"},{default:t(()=>[r("thead",null,[r("tr",null,[r("th",Ae,d(e(V)("forms.id")),1),r("th",Ue,d(e(V)("forms.name")),1),r("th",$e,d(e(V)("forms.price")),1),r("th",Pe,d(e(V)("forms.sale_price")),1),r("th",Te,d(e(V)("forms.weight")),1),r("th",Ee,d(e(V)("forms.actions")),1)])]),r("tbody",null,[(b(!0),B(le,null,te(e(j),(f,re)=>(b(),B("tr",{key:f.id},[r("td",null," #"+d(s(++re)),1),r("td",null,d(f.name_ar),1),r("td",null,d(s(Intl.NumberFormat().format(f.price))),1),r("td",null,d(s(Intl.NumberFormat().format(f.sale_price))),1),r("td",null,d(s(f.weight)),1),r("td",null,[l(x,{icon:"",variant:"plain",color:"default",size:"x-small",onClick:ie=>E(f)},{default:t(()=>[l(z,{size:22,icon:"tabler-pencil"})]),_:2},1032,["onClick"]),l(x,{icon:"",variant:"plain",color:"default",size:"x-small",onClick:ie=>O(f)},{default:t(()=>[l(z,{size:22,icon:"tabler-trash"})]),_:2},1032,["onClick"])])]))),128))]),pe(r("tfoot",null,Ie,512),[[fe,!e(u).length]])]),_:1}),l(X),l(L,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3"},{default:t(()=>[r("span",Fe,d(e(m)),1),l(we,{modelValue:e(c),"onUpdate:modelValue":n[2]||(n[2]=f=>M(c)?c.value=f:null),size:"small","total-visible":e(a),length:e(_),onNext:q,onPrev:A},null,8,["modelValue","total-visible","length"])]),_:1})]),_:1},8,["loading"]),e(o)?(b(),k(S,{key:0,isAddOpen:e(o),"onUpdate:isAddOpen":n[3]||(n[3]=f=>M(o)?o.value=f:null),onRefreshTable:$},null,8,["isAddOpen"])):N("",!0),e(C)?(b(),k(R,{key:1,isEditOpen:e(C),"onUpdate:isEditOpen":n[4]||(n[4]=f=>M(C)?C.value=f:null),item:e(D),onRefreshTable:$},null,8,["isEditOpen","item"])):N("",!0),e(p)?(b(),k(ne,{key:2,isDeleteOpen:e(p),"onUpdate:isDeleteOpen":n[5]||(n[5]=f=>M(p)?p.value=f:null),item:e(D),onRefreshTable:$},null,8,["isDeleteOpen","item"])):N("",!0)])}}};export{dl as default};
