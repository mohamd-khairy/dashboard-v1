import{k as r,bP as j,aB as J,o as b,b as h,w as l,p as e,bQ as Y,bR as K,bS as Q,ak as O,m as n,y as f,q as t,b$ as I,c0 as W,av as X,aw as V,al as S,ap as R,bD as ee,C as te,j as ge,I as ve,A as be,D as ue,c as G,an as q,bZ as ye,F as Ve,a as he,ar as Se,as as we,ag as H}from"./index.8d01543a.js";import{_ as le}from"./DialogCloseBtn.0d2acdf8.js";import{u as Z}from"./Safes.87a918c2.js";import{V as ae}from"./VForm.6ad382fa.js";import{V as se}from"./VDialog.6b48d5ed.js";import{u as oe}from"./Cities.0d3fd555.js";import{u as ne}from"./Employees.4a3220da.js";import{r as k}from"./validators.dc210ddc.js";import{d as P}from"./VTextField.b27bb6f2.js";import{V as L}from"./VSelect.2c43c85a.js";import{m as de}from"./moment.361b1408.js";import{V as xe}from"./VSpacer.40a311d3.js";import{V as me}from"./VDivider.c9b30b9a.js";import{V as Ae}from"./VPagination.6b05bef2.js";import"./forwardRefs.74a345f5.js";import"./VOverlay.cd1f8bc0.js";import"./lazy.746ef82b.js";import"./index.4049f65e.js";import"./VList.35d78c12.js";import"./ssrBoot.e590dc30.js";import"./VMenu.535e4389.js";import"./VCheckboxBtn.6481c716.js";import"./VChip.2389378e.js";const De={__name:"DeleteSafeDialog",props:{isDeleteOpen:{type:Boolean,required:!0},item:{type:Object,required:!0}},emits:["update:isDeleteOpen","refreshTable"],setup(U,{emit:E}){const y=U,c=E,a=r(!1),{t:A}=j(),M=Z(),_=J(),D=()=>{c("update:isDeleteOpen",!1)},w=()=>{a.value=!0,M.delete(y.item).then(()=>{c("refreshTable"),c("update:isDeleteOpen",!1),_.alertColor="success",_.alertMessage="\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0645\u0646\u062A\u062C \u0628\u0646\u062C\u0627\u062D",_.isAlertShow=!0,setTimeout(()=>{_.isAlertShow=!1,_.alertMessage="",a.value=!1},1e3)}).catch(p=>{a.value=!1,_.alertColor="error",_.alertMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 !",_.isAlertShow=!0,setTimeout(()=>{_.isAlertShow=!1,_.alertMessage=""},2e3)})},x=p=>{c("update:isDeleteOpen",p)};return(p,o)=>{const v=le;return b(),h(se,{width:p.$vuetify.display.smAndDown?"auto":650,"model-value":y.isDeleteOpen,"onUpdate:modelValue":x},{default:l(()=>[e(v,{onClick:o[0]||(o[0]=C=>x(!1))}),e(Y,{class:"pa-sm-9 pa-5"},{default:l(()=>[e(K,null,{default:l(()=>[e(Q,{class:"text-h5 text-center mb-3"},{default:l(()=>[e(O,{icon:"ph:info-light",color:"#f00",size:"50"}),n("h5",null,f(t(A)("ask_delete")),1)]),_:1})]),_:1}),e(I,null,{default:l(()=>[e(ae,{ref:"refForm",onSubmit:W(w,["prevent"])},{default:l(()=>[e(X,null,{default:l(()=>[e(V,{cols:"12",class:"text-center"},{default:l(()=>[t(a)?(b(),h(S,{key:1,type:"submit",class:"position-relative me-3"},{default:l(()=>[e(O,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(b(),h(S,{key:0,type:"submit",class:"me-3",color:"primary"},{default:l(()=>[R(f(t(A)("buttons.confirm")),1)]),_:1})),e(S,{variant:"tonal",color:"secondary",onClick:D},{default:l(()=>[R(f(t(A)("buttons.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},Ce=n("span",{class:"mx-1 my-1"}," \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0645\u062E\u0632\u0646 ",-1),ke={__name:"EditSafeDialog",props:{isEditOpen:{type:Boolean,required:!0},item:{type:Object,default:()=>({}),required:!0}},emits:["update:isEditOpen","refreshTable"],setup(U,{emit:E}){const y=U,c=E,a=J(),A=ne(),M=oe(),_=Z(),D=r([]),w=r([]),x=r(null),{t:p}=j(),o=ee({id:y.item.id,name:y.item.name,city_id:y.item.city_id,user_id:y.item.user_id,balance:y.item.balance,currency:y.item.currency}),v=r(!1),C=()=>{c("update:isEditOpen",!1)},T=async()=>{v.value=!0,(await x.value.validate()).valid?_.update(o).then(s=>{c("refreshTable"),c("update:isEditOpen",!1),a.alertColor="success",a.alertMessage="\u062A\u0645 \u0627\u0644\u062A\u0639\u062F\u064A\u0644 \u0628\u0646\u062C\u0627\u062D",a.isAlertShow=!0,setTimeout(()=>{a.isAlertShow=!1,a.alertMessage=""},2e3)}).catch(s=>{s.response.data.errors?Object.keys(s.response.data.errors).forEach(i=>{a.alertMessage=p(`errors.${i}`)}):a.alertMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 !",a.alertColor="error",a.isAlertShow=!0,setTimeout(()=>{a.isAlertShow=!1,a.alertMessage=""},2e3)}).finally(()=>{v.value=!1}):(v.value=!1,a.alertMessage="\u064A\u0631\u062C\u064A \u062A\u0639\u0628\u0626\u0629 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 !",a.alertColor="error",a.isAlertShow=!0,setTimeout(()=>{a.isAlertShow=!1,a.alertMessage=""},2e3))},z=u=>{c("update:isEditOpen",u)},F=async()=>{M.fetchCities({pageSize:-1}).then(u=>{D.value=u.data.data}),A.fetchEmployees({pageSize:-1}).then(u=>{var s;w.value=(s=u.data.data)==null?void 0:s.data})};return te(()=>{F()}),(u,s)=>{const B=le;return b(),h(se,{width:u.$vuetify.display.smAndDown?"auto":650,"model-value":U.isEditOpen,"onUpdate:modelValue":z},{default:l(()=>[e(B,{onClick:s[0]||(s[0]=i=>z(!1))}),e(Y,{class:"pa-sm-9 pa-5"},{default:l(()=>[e(K,null,{default:l(()=>[e(Q,{class:"text-h5 d-flex flex-column align-center gap-2 text-center mb-3"},{default:l(()=>[e(O,{icon:"teenyicons-safe-outline",size:"24",color:"primary"}),Ce]),_:1})]),_:1}),e(I,null,{default:l(()=>[e(ae,{ref_key:"refForm",ref:x,onSubmit:W(T,["prevent"])},{default:l(()=>[e(X,null,{default:l(()=>[e(V,{cols:"12"},{default:l(()=>[e(P,{modelValue:t(o).name,"onUpdate:modelValue":s[1]||(s[1]=i=>t(o).name=i),label:t(p)("forms.name"),rules:[t(k)]},null,8,["modelValue","label","rules"])]),_:1}),e(V,{cols:"12",md:"6"},{default:l(()=>[e(L,{modelValue:t(o).city_id,"onUpdate:modelValue":s[2]||(s[2]=i=>t(o).city_id=i),items:t(D),label:"\u0627\u0644\u0645\u0646\u0637\u0642\u0629","item-title":"name_ar","item-value":"id",rules:[t(k)]},null,8,["modelValue","items","rules"])]),_:1}),e(V,{cols:"12",md:"6"},{default:l(()=>[e(L,{modelValue:t(o).user_id,"onUpdate:modelValue":s[3]||(s[3]=i=>t(o).user_id=i),items:t(w),label:"\u0627\u0644\u0645\u0633\u0626\u0648\u0644 \u0639\u0646 \u0627\u0644\u0645\u062E\u0632\u0648\u0646","item-title":"username","item-value":"id",rules:[t(k)]},null,8,["modelValue","items","rules"])]),_:1}),e(V,{cols:"12",md:"6"},{default:l(()=>[e(P,{modelValue:t(o).balance,"onUpdate:modelValue":s[4]||(s[4]=i=>t(o).balance=i),label:"\u0627\u0644\u0631\u0635\u064A\u062F",rules:[t(k)],type:"number",min:"0"},null,8,["modelValue","rules"])]),_:1}),e(V,{cols:"12",md:"6"},{default:l(()=>[e(L,{modelValue:t(o).currency,"onUpdate:modelValue":s[5]||(s[5]=i=>t(o).currency=i),items:[{name:"\u0631\u064A\u0627\u0644 \u0633\u0639\u0648\u062F\u064A",id:"SAR"},{name:"\u062F\u0631\u0647\u0645 \u0627\u0645\u0627\u0631\u0627\u062A\u064A",id:"AED"}],label:"\u0627\u0644\u0639\u0645\u0644\u0629","item-title":"name","item-value":"id",rules:[t(k)]},null,8,["modelValue","rules"])]),_:1}),e(V,{cols:"12",class:"text-center"},{default:l(()=>[t(v)?(b(),h(S,{key:1,type:"submit",class:"position-relative me-3 px-8"},{default:l(()=>[e(O,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(b(),h(S,{key:0,type:"submit",class:"me-3 px-8"},{default:l(()=>[R(f(t(p)("buttons.save")),1)]),_:1})),e(S,{variant:"tonal",color:"secondary",onClick:C,class:"px-8"},{default:l(()=>[R(f(t(p)("buttons.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},Oe=n("span",{class:"mx-1 my-1"}," \u0625\u0636\u0627\u0641\u0629 \u062E\u0632\u0646\u0629 ",-1),Me={__name:"AddSafeDialog",props:{isAddOpen:{type:Boolean,required:!0}},emits:["update:isAddOpen","refreshTable"],setup(U,{emit:E}){const y=U,c=E,a=J(),A=ne(),M=oe(),_=Z(),D=r([]),w=r([]),x=r(null),{t:p}=j(),o=ee({name:null,city_id:null,user_id:null,balance:null,currency:null}),v=r(!1),C=()=>{c("update:isAddOpen",!1)},T=async()=>{v.value=!0,(await x.value.validate()).valid?_.store(o).then(s=>{c("refreshTable"),c("update:isAddOpen",!1),a.alertColor="success",a.alertMessage="\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0646\u0635\u0631 \u0628\u0646\u062C\u0627\u062D",a.isAlertShow=!0,setTimeout(()=>{a.isAlertShow=!1,a.alertMessage=""},2e3)}).catch(s=>{s.response.data.errors?Object.keys(s.response.data.errors).forEach(i=>{a.alertMessage=p(`errors.${i}`)}):a.alertMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 !",a.alertColor="error",a.isAlertShow=!0,setTimeout(()=>{a.isAlertShow=!1,a.alertMessage=""},2e3)}).finally(()=>{v.value=!1}):(v.value=!1,a.alertMessage="\u064A\u0631\u062C\u064A \u062A\u0639\u0628\u0626\u0629 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 !",a.alertColor="error",a.isAlertShow=!0,setTimeout(()=>{a.isAlertShow=!1,a.alertMessage=""},2e3))},z=u=>{c("update:isAddOpen",u)},F=async()=>{M.fetchCities({pageSize:-1}).then(u=>{D.value=u.data.data}),A.fetchEmployees({pageSize:-1}).then(u=>{var s;w.value=(s=u.data.data)==null?void 0:s.data})};return te(()=>{F()}),(u,s)=>{const B=le;return b(),h(se,{width:u.$vuetify.display.smAndDown?"auto":650,"model-value":y.isAddOpen,"onUpdate:modelValue":z},{default:l(()=>[e(B,{onClick:s[0]||(s[0]=i=>z(!1))}),e(Y,{class:"pa-sm-9 pa-5"},{default:l(()=>[e(K,null,{default:l(()=>[e(Q,{class:"text-h5 d-flex flex-column align-center gap-2 text-center mb-3"},{default:l(()=>[e(O,{icon:"teenyicons-safe-outline",size:"24",color:"primary"}),Oe]),_:1})]),_:1}),e(I,null,{default:l(()=>[e(ae,{ref_key:"refForm",ref:x,onSubmit:W(T,["prevent"])},{default:l(()=>[e(X,null,{default:l(()=>[e(V,{cols:"12"},{default:l(()=>[e(P,{modelValue:t(o).name,"onUpdate:modelValue":s[1]||(s[1]=i=>t(o).name=i),label:t(p)("forms.name"),rules:[t(k)]},null,8,["modelValue","label","rules"])]),_:1}),e(V,{cols:"12",md:"6"},{default:l(()=>[e(L,{modelValue:t(o).city_id,"onUpdate:modelValue":s[2]||(s[2]=i=>t(o).city_id=i),items:t(D),label:"\u0627\u0644\u0645\u0646\u0637\u0642\u0629","item-title":"name_ar","item-value":"id",rules:[t(k)]},null,8,["modelValue","items","rules"])]),_:1}),e(V,{cols:"12",md:"6"},{default:l(()=>[e(L,{modelValue:t(o).user_id,"onUpdate:modelValue":s[3]||(s[3]=i=>t(o).user_id=i),items:t(w),label:"\u0627\u0644\u0645\u0633\u0626\u0648\u0644 \u0639\u0646 \u0627\u0644\u0645\u062E\u0632\u0648\u0646","item-title":"username","item-value":"id",rules:[t(k)]},null,8,["modelValue","items","rules"])]),_:1}),e(V,{cols:"12",md:"6"},{default:l(()=>[e(P,{modelValue:t(o).balance,"onUpdate:modelValue":s[4]||(s[4]=i=>t(o).balance=i),label:"\u0627\u0644\u0631\u0635\u064A\u062F",rules:[t(k)],type:"number",min:"0"},null,8,["modelValue","rules"])]),_:1}),e(V,{cols:"12",md:"6"},{default:l(()=>[e(L,{modelValue:t(o).currency,"onUpdate:modelValue":s[5]||(s[5]=i=>t(o).currency=i),items:[{name:"\u0631\u064A\u0627\u0644 \u0633\u0639\u0648\u062F\u064A",id:"SAR"},{name:"\u062F\u0631\u0647\u0645 \u0627\u0645\u0627\u0631\u0627\u062A\u064A",id:"AED"}],label:"\u0627\u0644\u0639\u0645\u0644\u0629","item-title":"name","item-value":"id",rules:[t(k)]},null,8,["modelValue","rules"])]),_:1}),e(V,{cols:"12",class:"text-center"},{default:l(()=>[t(v)?(b(),h(S,{key:1,type:"submit",class:"position-relative me-3 px-8"},{default:l(()=>[e(O,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(b(),h(S,{key:0,type:"submit",class:"me-3 px-8"},{default:l(()=>[R(f(t(p)("buttons.save")),1)]),_:1})),e(S,{variant:"tonal",color:"secondary",onClick:C,class:"px-8"},{default:l(()=>[R(f(t(p)("buttons.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},Te=n("span",{class:"mx-1"},"\u0627\u0644\u062E\u0632\u0646",-1),$e={style:{width:"5rem"}},Ue=n("th",{scope:"col",class:"font-weight-semibold"}," # ",-1),Ee={scope:"col",class:"font-weight-semibold"},ze=n("th",{scope:"col",class:"font-weight-semibold"}," \u0627\u0644\u0645\u0633\u0626\u0648\u0644 ",-1),Fe=n("th",{scope:"col",class:"font-weight-semibold"}," \u0627\u0644\u0639\u0645\u0644\u0629 ",-1),Be=n("th",{scope:"col",class:"font-weight-semibold"}," \u0627\u0644\u0631\u0635\u064A\u062F ",-1),Le=n("th",{scope:"col",class:"font-weight-semibold"}," \u0627\u0644\u0645\u0646\u0637\u0642\u0629 ",-1),Re={scope:"col",class:"font-weight-semibold"},qe={scope:"col",class:"font-weight-semibold"},Ie={class:"d-flex align-center gap-2"},Ne=n("tr",null,[n("td",{colspan:"8",class:"text-center text-body-1"}," \u0644\u0627 \u064A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A ")],-1),Pe=[Ne],je={class:"text-sm text-disabled"},_t={__name:"index",setup(U){const E=Z();oe(),ne();const y=r(""),c=r(5),a=r(1),A=r(1),M=r(1),_=r(1),D=r(0),w=r([]),x=r([]),p=r(!1),o=r(!1),v=r({}),C=r(!1),T=r(!1);r(!1),r([]),r([]);const z=ee({city_id:null,user_id:null}),{t:F}=j();ge();const u=()=>{T.value=!0,E.getAll({...z,q:y.value,per_page:c.value,page:a.value}).then(g=>{var d,$;w.value=($=(d=g.data)==null?void 0:d.data)==null?void 0:$.data,A.value=g.data.data.last_page,M.value=g.data.data.from,_.value=g.data.data.to,D.value=g.data.data.total}).catch(g=>{console.log(g)}).finally(()=>{T.value=!1})};ve(()=>{c.value&&(a.value=1)});const s=be(()=>` \u0639\u0631\u0636 \u0645\u0646 ${N(M.value)} \u0625\u0644\u064A ${N(_.value)} \u0645\u0646 ${N(D.value)} \u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A `),B=g=>{o.value=!0,v.value=g},i=g=>{C.value=!0,v.value=g},N=g=>{const d="\u0660\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669";return String(g).replace(/[0123456789]/g,$=>d[$])},ce=g=>{let d=de(g).format("DD-MM-YYYY"),$=de(g).format("hh:mm:ss A");return{date:d,time:$}};return ue(c,()=>{u()}),ue(()=>a.value,()=>{u()}),te(()=>{u()}),(g,d)=>{const $=Me,pe=ke,fe=De;return b(),G("div",null,[e(Y,{loading:t(T)},{default:l(()=>[e(Q,{class:"d-flex align-center gap-2"},{default:l(()=>[e(O,{icon:"teenyicons-safe-outline",size:"24",color:"primary"}),Te]),_:1}),e(I,{class:"d-flex align-center flex-wrap gap-2 py-4"},{default:l(()=>[n("div",$e,[e(L,{modelValue:t(c),"onUpdate:modelValue":d[0]||(d[0]=m=>q(c)?c.value=m:null),variant:"outlined",items:[5,10,20,30,50,100]},null,8,["modelValue"])]),e(S,{"prepend-icon":"tabler-plus",onClick:d[1]||(d[1]=m=>p.value=!0),disabled:t(T)},{default:l(()=>[R(" \u0625\u0636\u0627\u0641\u0629 \u062E\u0632\u0646\u0629 ")]),_:1},8,["disabled"]),e(xe)]),_:1}),e(me),e(ye,{class:"text-no-wrap product-list-table"},{default:l(()=>[n("thead",null,[n("tr",null,[Ue,n("th",Ee,f(t(F)("forms.name")),1),ze,Fe,Be,Le,n("th",Re,f(t(F)("forms.created_at")),1),n("th",qe,f(t(F)("forms.actions")),1)])]),n("tbody",null,[(b(!0),G(Ve,null,he(t(w),(m,Ye)=>{var ie,re;return b(),G("tr",{key:m.id},[n("td",null,f(m.id),1),n("td",null,f(m.name),1),n("td",null,f((ie=m.user)==null?void 0:ie.username),1),n("td",null,f(m.currency),1),n("td",null,f(m.balance),1),n("td",null,f((re=m.city)==null?void 0:re.name_ar),1),n("td",null,f(N(ce(m.created_at).date)),1),n("td",Ie,[e(S,{icon:"",variant:"plain",color:"default",size:"x-small",onClick:_e=>i(m)},{default:l(()=>[e(O,{size:22,icon:"tabler-pencil"})]),_:2},1032,["onClick"]),e(S,{icon:"",variant:"plain",color:"default",size:"x-small",onClick:_e=>B(m)},{default:l(()=>[e(O,{size:22,icon:"tabler-trash"})]),_:2},1032,["onClick"])])])}),128))]),Se(n("tfoot",null,Pe,512),[[we,!t(w).length]])]),_:1}),e(me),e(I,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3"},{default:l(()=>[n("span",je,f(t(s)),1),e(Ae,{modelValue:t(a),"onUpdate:modelValue":d[2]||(d[2]=m=>q(a)?a.value=m:null),size:"small","total-visible":5,length:t(A),onNext:d[3]||(d[3]=m=>x.value=[]),onPrev:d[4]||(d[4]=m=>x.value=[])},null,8,["modelValue","length"])]),_:1})]),_:1},8,["loading"]),t(p)?(b(),h($,{key:0,"is-add-open":t(p),"onUpdate:isAddOpen":d[5]||(d[5]=m=>q(p)?p.value=m:null),onRefreshTable:u},null,8,["is-add-open"])):H("",!0),t(C)?(b(),h(pe,{key:1,"is-edit-open":t(C),"onUpdate:isEditOpen":d[6]||(d[6]=m=>q(C)?C.value=m:null),item:t(v),onRefreshTable:u},null,8,["is-edit-open","item"])):H("",!0),t(o)?(b(),h(fe,{key:2,"is-delete-open":t(o),"onUpdate:isDeleteOpen":d[7]||(d[7]=m=>q(o)?o.value=m:null),item:t(v),onRefreshTable:u},null,8,["is-delete-open","item"])):H("",!0)])}}};export{_t as default};
