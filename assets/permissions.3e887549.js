import{bP as B,aB as Y,k as _,o as h,b as A,w as t,p as e,bQ as L,bR as Q,bS as q,ak as O,m as r,y as i,q as s,b$ as U,c0 as Z,av as G,aw as k,al as S,ap as C,bD as re,c6 as fe,I as X,A as ee,c as z,an as E,bZ as _e,F as se,a as te,aq as ge,ag as le,ar as ve,as as he}from"./index.e195cd26.js";import{_ as H}from"./DialogCloseBtn.a5443f2c.js";import{u as N}from"./Permissions.b79efb39.js";import{V as J}from"./VForm.bf1fdf96.js";import{V as K}from"./VDialog.4d61232b.js";import{d as $}from"./VTextField.0ba2900d.js";import{r as j}from"./validators.dc210ddc.js";import{h as ae}from"./moment.9709ab41.js";import{V as be}from"./VSelect.d3114f6b.js";import{V as ye}from"./VSpacer.b4f17f1c.js";import{V as oe}from"./VDivider.638f8eff.js";import{V as ne}from"./VChip.37b1ef7f.js";import{V as Ve}from"./VPagination.744b7e53.js";import"./forwardRefs.74a345f5.js";import"./VOverlay.e3c69687.js";import"./lazy.3c63b833.js";import"./index.4f7ac4e6.js";import"./VList.9d440da5.js";import"./ssrBoot.d7cd1016.js";import"./VMenu.62aeda27.js";import"./VCheckboxBtn.720fbc0c.js";const we={__name:"DeletePermissionDialog",props:{isDeleteOpen:{type:Boolean,required:!0},permission:{type:Object,required:!0}},emits:["update:isDeleteOpen","refreshTable"],setup(T,{emit:b}){const x=T,g=b,{t:a}=B(),p=N(),l=Y(),m=_(!1),o=()=>{g("update:isDeleteOpen",!1)},D=()=>{m.value=!0,p.deletePermission(x.permission).then(()=>{g("refreshTable"),g("update:isDeleteOpen",!1),l.alertColor="success",l.alertMessage="\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0635\u0644\u0627\u062D\u064A\u0629 \u0628\u0646\u062C\u0627\u062D",l.isAlertShow=!0,setTimeout(()=>{l.isAlertShow=!1,l.alertMessage="",m.value=!1},1e3)}).catch(V=>{m.value=!1,l.alertColor="error",l.alertMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 !",l.isAlertShow=!0,setTimeout(()=>{l.isAlertShow=!1,l.alertMessage=""},2e3)})},y=V=>{g("update:isDeleteOpen",V)};return(V,w)=>{const v=H;return h(),A(K,{width:V.$vuetify.display.smAndDown?"auto":650,"model-value":x.isDeleteOpen,"onUpdate:modelValue":y},{default:t(()=>[e(v,{onClick:w[0]||(w[0]=n=>y(!1))}),e(L,{class:"pa-sm-9 pa-5"},{default:t(()=>[e(Q,null,{default:t(()=>[e(q,{class:"text-h5 text-center mb-3"},{default:t(()=>[e(O,{icon:"ph:info-light",color:"#f00",size:"50"}),r("h5",null,i(s(a)("ask_delete")),1)]),_:1})]),_:1}),e(U,null,{default:t(()=>[e(J,{ref:"refForm",onSubmit:Z(D,["prevent"])},{default:t(()=>[e(G,null,{default:t(()=>[e(k,{cols:"12",class:"text-center"},{default:t(()=>[s(m)?(h(),A(S,{key:1,type:"submit",class:"position-relative me-3"},{default:t(()=>[e(O,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(h(),A(S,{key:0,type:"submit",class:"me-3"},{default:t(()=>[C(i(s(a)("buttons.confirm")),1)]),_:1})),e(S,{variant:"tonal",color:"secondary",onClick:o},{default:t(()=>[C(i(s(a)("buttons.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},xe={class:"mx-1 my-1"},Se={__name:"EditPermissionDialog",props:{isEditOpen:{type:Boolean,required:!0},permission:{type:Object,required:!0}},emits:["refreshTable","update:isEditOpen"],setup(T,{emit:b}){const x=T,g=b,{t:a}=B(),p=N(),l=Y(),m=_(!1),o=re({name:"",display_name:"",group:""});fe(()=>{o.id=x.permission.id,o.name=x.permission.name,o.display_name=x.permission.display_name,o.group=x.permission.group});const D=()=>{g("update:isEditOpen",!1)},y=_(null),V=async()=>{m.value=!0,(await y.value.validate()).valid?p.editPermission(o).then(n=>{g("update:isEditOpen",!1),g("refreshTable"),l.alertColor="success",l.alertMessage="\u062A\u0645 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0639\u0646\u0635\u0631 \u0628\u0646\u062C\u0627\u062D",l.isAlertShow=!0,setTimeout(()=>{l.isAlertShow=!1,l.alertMessage="",m.value=!1},1e3)}).catch(n=>{n.response.data.errors?Object.keys(n.response.data.errors).forEach(c=>{l.alertMessage=a(`errors.${c}`)}):l.alertMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 !",m.value=!1,l.alertColor="error",l.isAlertShow=!0,setTimeout(()=>{l.isAlertShow=!1,l.alertMessage=""},2e3)}):(m.value=!1,l.alertMessage="\u064A\u0631\u062C\u064A \u062A\u0639\u0628\u0626\u0629 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 !",l.alertColor="error",l.isAlertShow=!0,setTimeout(()=>{l.isAlertShow=!1,l.alertMessage=""},2e3))},w=v=>{g("update:isEditOpen",v)};return(v,n)=>{const P=H;return h(),A(K,{width:v.$vuetify.display.smAndDown?"auto":650,"model-value":x.isEditOpen,"onUpdate:modelValue":w},{default:t(()=>[e(P,{onClick:n[0]||(n[0]=c=>w(!1))}),e(L,{class:"pa-sm-9 pa-5"},{default:t(()=>[e(Q,null,{default:t(()=>[e(q,{class:"text-h5 d-flex flex-column align-center gap-2 text-center mb-3"},{default:t(()=>[e(O,{icon:"zondicons:shield",size:"24",color:"primary"}),r("span",xe,i(s(a)("Edit_Permission")),1)]),_:1})]),_:1}),e(U,null,{default:t(()=>[e(J,{ref_key:"refForm",ref:y,onSubmit:Z(V,["prevent"])},{default:t(()=>[e(G,null,{default:t(()=>[e(k,{cols:"12",lg:"12",sm:"6"},{default:t(()=>[e($,{modelValue:s(o).name,"onUpdate:modelValue":n[1]||(n[1]=c=>s(o).name=c),label:s(a)("forms.name")},null,8,["modelValue","label"])]),_:1}),e(k,{cols:"12",lg:"12",sm:"6"},{default:t(()=>[e($,{modelValue:s(o).display_name,"onUpdate:modelValue":n[2]||(n[2]=c=>s(o).display_name=c),label:s(a)("forms.display_name")},null,8,["modelValue","label"])]),_:1}),e(k,{cols:"12",lg:"12",sm:"6"},{default:t(()=>[e($,{modelValue:s(o).group,"onUpdate:modelValue":n[3]||(n[3]=c=>s(o).group=c),label:s(a)("forms.group")},null,8,["modelValue","label"])]),_:1}),e(k,{cols:"12",class:"text-center"},{default:t(()=>[s(m)?(h(),A(S,{key:1,type:"submit",class:"position-relative me-3"},{default:t(()=>[e(O,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(h(),A(S,{key:0,type:"submit",class:"me-3"},{default:t(()=>[C(i(s(a)("buttons.save")),1)]),_:1})),e(S,{variant:"tonal",color:"secondary",onClick:D},{default:t(()=>[C(i(s(a)("buttons.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},Ae={class:"mx-1 my-1"},De={__name:"AddPermissionDialog",props:{isAddOpen:{type:Boolean,required:!0}},emits:["refreshTable","update:isAddOpen"],setup(T,{emit:b}){const x=T,g=b,{t:a}=B(),p=N(),l=Y(),m=_(!1),o=re({name:"",display_name:"",group:"",guard_name:"web"}),D=()=>{g("update:isAddOpen",!1)},y=_(null),V=async()=>{m.value=!0,(await y.value.validate()).valid?p.storePermission(o).then(n=>{g("update:isAddOpen",!1),g("refreshTable"),l.alertColor="success",l.alertMessage="\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0646\u0635\u0631 \u0628\u0646\u062C\u0627\u062D",l.isAlertShow=!0,setTimeout(()=>{l.isAlertShow=!1,l.alertMessage=""},2e3)}).catch(n=>{n.response.data.errors?Object.keys(n.response.data.errors).forEach(c=>{l.alertMessage=a(`errors.${c}`)}):l.alertMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 !",m.value=!1,l.alertColor="error",l.isAlertShow=!0,setTimeout(()=>{l.isAlertShow=!1,l.alertMessage=""},2e3)}):(m.value=!1,l.alertMessage="\u064A\u0631\u062C\u064A \u062A\u0639\u0628\u0626\u0629 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 !",l.alertColor="error",l.isAlertShow=!0,setTimeout(()=>{l.isAlertShow=!1,l.alertMessage=""},2e3))},w=v=>{g("update:isAddOpen",v)};return(v,n)=>{const P=H;return h(),A(K,{width:v.$vuetify.display.smAndDown?"auto":650,"model-value":x.isAddOpen,"onUpdate:modelValue":w},{default:t(()=>[e(P,{onClick:n[0]||(n[0]=c=>w(!1))}),e(L,{class:"pa-sm-9 pa-5"},{default:t(()=>[e(Q,null,{default:t(()=>[e(q,{class:"text-h5 d-flex flex-column align-center gap-2 text-center mb-3"},{default:t(()=>[e(O,{icon:"zondicons:shield",size:"24",color:"primary"}),r("span",Ae,i(s(a)("Add_Permission")),1)]),_:1})]),_:1}),e(U,null,{default:t(()=>[e(J,{ref_key:"refForm",ref:y,onSubmit:Z(V,["prevent"])},{default:t(()=>[e(G,null,{default:t(()=>[e(k,{cols:"12",lg:"12",sm:"6"},{default:t(()=>[e($,{modelValue:s(o).name,"onUpdate:modelValue":n[1]||(n[1]=c=>s(o).name=c),label:s(a)("forms.name"),rules:[s(j)]},null,8,["modelValue","label","rules"])]),_:1}),e(k,{cols:"12",lg:"12",sm:"6"},{default:t(()=>[e($,{modelValue:s(o).display_name,"onUpdate:modelValue":n[2]||(n[2]=c=>s(o).display_name=c),label:s(a)("forms.display_name"),rules:[s(j)]},null,8,["modelValue","label","rules"])]),_:1}),e(k,{cols:"12",lg:"12",sm:"6"},{default:t(()=>[e($,{modelValue:s(o).group,"onUpdate:modelValue":n[3]||(n[3]=c=>s(o).group=c),label:s(a)("forms.group"),rules:[s(j)]},null,8,["modelValue","label","rules"])]),_:1}),e(k,{cols:"12",class:"text-center"},{default:t(()=>[s(m)?(h(),A(S,{key:1,type:"submit",class:"position-relative me-3"},{default:t(()=>[e(O,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(h(),A(S,{key:0,type:"submit",class:"me-3"},{default:t(()=>[C(i(s(a)("buttons.save")),1)]),_:1})),e(S,{variant:"tonal",color:"secondary",onClick:D},{default:t(()=>[C(i(s(a)("buttons.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},Oe={class:"mx-1"},ke={style:{width:"5rem"}},Ce={scope:"col",class:"font-weight-semibold"},Pe={scope:"col",class:"font-weight-semibold"},Me={scope:"col",class:"font-weight-semibold"},Te={scope:"col",class:"font-weight-semibold"},$e={scope:"col",class:"font-weight-semibold"},ze={scope:"col",class:"font-weight-semibold"},Ee={class:"mx-1"},Ue={key:0},Fe={style:{width:"7.5rem"}},Be=r("tr",null,[r("td",{colspan:"8",class:"text-center text-body-1"}," \u0644\u0627 \u064A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A ")],-1),Le=[Be],qe={class:"text-sm text-disabled"},is={__name:"permissions",setup(T){const{t:b}=B(),x=N(),g=_("");_();const a=_(5),p=_(1),l=_(1),m=_(0),o=_([]);_([]);const D=_(!1),y=_(!1),V=_({}),w=_(!1),v=()=>{x.fetchPermissions({q:g.value}).then(f=>{o.value=f.data.data,l.value=o.value/a,m.value=o.value.length,p.value=1}).catch(f=>{console.log(f)})};X(()=>{v()}),X(()=>{a.value&&(p.value=1)});const n=ee(()=>(l.value=Math.ceil(o.value.length/a.value),o.value.filter((f,u)=>{let M=(p.value-1)*a.value,R=p.value*a.value;if(u>=M&&u<R)return!0}))),P=()=>{p.value*a.value<o.value.length&&p.value},c=()=>{p.value>1&&p.value},ie=ee(()=>{const f=o.value.length?(p.value-1)*a.value+1:0,u=f+(a.value-1)<=o.value.length?f+(a.value-1):m.value;return` \u0639\u0631\u0636 \u0645\u0646 ${I(f)} \u0625\u0644\u064A ${I(u)} \u0645\u0646 ${I(m.value)} \u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A `}),ue=f=>{y.value=!0,V.value=f},de=f=>{w.value=!0,V.value=f},I=f=>{const u="\u0660\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669";return String(f).replace(/[0123456789]/g,M=>u[M])},me=f=>{let u=ae(f).format("DD-MM-YYYY"),M=ae(f).format("hh:mm:ss A");return{date:u,time:M}};return(f,u)=>{const M=De,R=Se,ce=we;return h(),z("div",null,[e(L,null,{default:t(()=>[e(q,{class:"d-flex align-center"},{default:t(()=>[e(O,{icon:"zondicons:shield",size:"24",color:"primary"}),r("span",Oe,i(s(b)("Permissions")),1)]),_:1}),e(U,{class:"d-flex align-center flex-wrap gap-2 py-4"},{default:t(()=>[r("div",ke,[e(be,{modelValue:s(a),"onUpdate:modelValue":u[0]||(u[0]=d=>E(a)?a.value=d:null),variant:"outlined",items:[5,10,20,30,50]},null,8,["modelValue"])]),e(S,{"prepend-icon":"tabler-plus",onClick:u[1]||(u[1]=d=>D.value=!0)},{default:t(()=>[C(i(s(b)("Add_Permission")),1)]),_:1}),e(ye)]),_:1}),e(oe),e(_e,{class:"text-no-wrap product-list-table"},{default:t(()=>[r("thead",null,[r("tr",null,[r("th",Ce,i(s(b)("forms.id")),1),r("th",Pe,i(s(b)("forms.name")),1),r("th",Me,i(s(b)("forms.roles")),1),r("th",Te,i(s(b)("forms.group")),1),r("th",$e,i(s(b)("forms.created_at")),1),r("th",ze,i(s(b)("forms.actions")),1)])]),r("tbody",null,[(h(!0),z(se,null,te(s(n),(d,pe)=>(h(),z("tr",{key:d.id},[r("td",null," #"+i(++pe),1),r("td",null,[e(O,{icon:"zondicons:shield",size:"18"}),r("span",Ee,i(d.name),1)]),r("td",null,[(h(!0),z(se,null,te(d.roles,(F,W)=>(h(),A(ne,{key:F.id,class:"mx-1",style:ge({display:W<4?"":"none"})},{default:t(()=>[W<4?(h(),z("span",Ue,i(F.display_name),1)):le("",!0)]),_:2},1032,["style"]))),128)),d.roles.length>4?(h(),A(ne,{key:0},{default:t(()=>[C("+"+i(d.roles.length-4),1)]),_:2},1024)):le("",!0)]),r("td",null,i(d.group),1),r("td",null,i(me(d.created_at).date),1),r("td",Fe,[e(S,{icon:"",variant:"plain",color:"default",size:"x-small",onClick:F=>de(d)},{default:t(()=>[e(O,{size:22,icon:"tabler-pencil"})]),_:2},1032,["onClick"]),e(S,{icon:"",variant:"plain",color:"default",size:"x-small",onClick:F=>ue(d)},{default:t(()=>[e(O,{size:22,icon:"tabler-trash"})]),_:2},1032,["onClick"])])]))),128))]),ve(r("tfoot",null,Le,512),[[he,!s(o).length]])]),_:1}),e(oe),e(U,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3"},{default:t(()=>[r("span",qe,i(s(ie)),1),e(Ve,{modelValue:s(p),"onUpdate:modelValue":u[2]||(u[2]=d=>E(p)?p.value=d:null),size:"small","total-visible":s(a),length:s(l),onNext:P,onPrev:c},null,8,["modelValue","total-visible","length"])]),_:1})]),_:1}),e(M,{isAddOpen:s(D),"onUpdate:isAddOpen":u[3]||(u[3]=d=>E(D)?D.value=d:null),onRefreshTable:v},null,8,["isAddOpen"]),e(R,{isEditOpen:s(w),"onUpdate:isEditOpen":u[4]||(u[4]=d=>E(w)?w.value=d:null),permission:s(V),onRefreshTable:v},null,8,["isEditOpen","permission"]),e(ce,{isDeleteOpen:s(y),"onUpdate:isDeleteOpen":u[5]||(u[5]=d=>E(y)?y.value=d:null),permission:s(V),onRefreshTable:v},null,8,["isDeleteOpen","permission"])])}}};export{is as default};
