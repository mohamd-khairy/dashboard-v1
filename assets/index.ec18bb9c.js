import{k as v,bP as ce,aB as be,o as z,b as O,w as t,p as l,bQ as re,bR as ve,bS as _e,ak as A,m as b,y,q as e,b$ as ue,c0 as ne,av as H,aw as o,al as M,ap as le,bD as R,D as ye,C as Ve,c6 as xe,ag as de,c as pe,F as Ae,a as Me,an as X,j as Oe,I as ke,A as Ce,bZ as $e,ar as Te,as as Re}from"./index.8d01543a.js";import{_ as we}from"./DialogCloseBtn.0d2acdf8.js";import{u as fe}from"./Products.979d0fae.js";import{V as ge}from"./VForm.6ad382fa.js";import{V as he}from"./VDialog.6b48d5ed.js";import{u as Se}from"./Categories.6d7c1bfa.js";import{u as Ue}from"./Cities.0d3fd555.js";import{r as h}from"./validators.dc210ddc.js";import{d as x}from"./VTextField.b27bb6f2.js";import{V as U}from"./VSelect.2c43c85a.js";import{V as De}from"./VFileInput.d83879c7.js";import{V as Fe,a as Le}from"./VCarouselItem.9b940f07.js";import{V as L}from"./VSwitch.5107874e.js";import{_ as Be}from"./AddProductCutDialog.ebbf68ad.js";import{_ as Ee}from"./AddProductPreparationDialog.b34676e5.js";import{_ as qe}from"./AddProductMicedMeatDialog.edacdc55.js";import{_ as Ie}from"./AddProductSizeDialog.8cfba454.js";import{m as ze}from"./moment.361b1408.js";import{V as je}from"./VSpacer.40a311d3.js";import{V as Pe}from"./VDivider.c9b30b9a.js";import{V as Ne}from"./VPagination.6b05bef2.js";import"./forwardRefs.74a345f5.js";import"./VOverlay.cd1f8bc0.js";import"./lazy.746ef82b.js";import"./index.4049f65e.js";import"./VList.35d78c12.js";import"./ssrBoot.e590dc30.js";import"./VMenu.535e4389.js";import"./VCheckboxBtn.6481c716.js";import"./VChip.2389378e.js";import"./AutoCompleteDropdown.4e95d107.js";import"./Stocks.828f6985.js";import"./Stores.7e0274da.js";const Ye={__name:"DeleteProductsDialog",props:{isDeleteOpen:{type:Boolean,required:!0},item:{type:Object,required:!0}},emits:["update:isDeleteOpen","refreshTable"],setup(oe,{emit:te}){const c=oe,D=te,n=v(!1),{t:$}=ce(),B=fe(),C=be(),p=()=>{D("update:isDeleteOpen",!1)},_=()=>{n.value=!0,B.deleteProduct(c.item).then(()=>{D("refreshTable"),D("update:isDeleteOpen",!1),C.alertColor="success",C.alertMessage="\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0645\u0646\u062A\u062C \u0628\u0646\u062C\u0627\u062D",C.isAlertShow=!0,setTimeout(()=>{C.isAlertShow=!1,C.alertMessage="",n.value=!1},1e3)}).catch(T=>{n.value=!1,C.alertColor="error",C.alertMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 !",C.isAlertShow=!0,setTimeout(()=>{C.isAlertShow=!1,C.alertMessage=""},2e3)})},Y=T=>{D("update:isDeleteOpen",T)};return(T,I)=>{const E=we;return z(),O(he,{width:T.$vuetify.display.smAndDown?"auto":650,"model-value":c.isDeleteOpen,"onUpdate:modelValue":Y},{default:t(()=>[l(E,{onClick:I[0]||(I[0]=j=>Y(!1))}),l(re,{class:"pa-sm-9 pa-5"},{default:t(()=>[l(ve,null,{default:t(()=>[l(_e,{class:"text-h5 text-center mb-3"},{default:t(()=>[l(A,{icon:"ph:info-light",color:"#f00",size:"50"}),b("h5",null,y(e($)("ask_delete")),1)]),_:1})]),_:1}),l(ue,null,{default:t(()=>[l(ge,{ref:"refForm",onSubmit:ne(_,["prevent"])},{default:t(()=>[l(H,null,{default:t(()=>[l(o,{cols:"12",class:"text-center"},{default:t(()=>[e(n)?(z(),O(M,{key:1,type:"submit",class:"position-relative me-3"},{default:t(()=>[l(A,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(z(),O(M,{key:0,type:"submit",class:"me-3",color:"primary"},{default:t(()=>[le(y(e($)("buttons.confirm")),1)]),_:1})),l(M,{variant:"tonal",color:"secondary",onClick:p},{default:t(()=>[le(y(e($)("buttons.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},Qe={class:"mx-1 my-1"},Ze={__name:"EditProductDialog",props:{isEditOpen:{type:Boolean,required:!0},item:{type:Object,required:!0}},emits:["update:isEditOpen","refreshTable"],setup(oe,{emit:te}){const c=oe,D=te,n=be(),$=fe(),B=Ue(),C=Se(),p=v(!1),{t:_}=ce(),Y=R([]),T=R([]),I=R([]),E=R([]),j=R([]),Z=R([]),Q=R([]),N=R([]),J=v([]),r=v([]),a=R({id:null,name_ar:"",name_en:"",weight:"",calories:"",description_ar:"",description_en:"",sale_price:0,price:0,is_active:0,is_available:0,is_kwar3:0,is_Ras:0,is_lyh:0,is_karashah:0,category_id:null,sub_category_id:null,is_shalwata:0,is_delivered:0,is_picked_up:0,preparation_ids:[],size_ids:[],miced_meat_ids:[],cut_ids:[],payment_type_ids:[],city_ids:[],images:[],shalwata_id:null,not_dates:[{date_mm_dd:null,delivery_period_ids:[{delivery_period_id:null,city_id:null},{delivery_period_id:null,city_id:null}]}]});ye(()=>a.category_id,(V,d)=>{typeof a.category_id=="object"?C.fetchSubCategoryByCategory(a.category_id.id).then(P=>{I.value=P.data.data}):C.fetchSubCategoryByCategory(a.category_id).then(P=>{I.value=P.data.data})}),Ve(()=>{B.fetchCities({pageSize:-1}).then(V=>{Y.value=V.data.data}),C.fetchCategories({pageSize:-1}).then(V=>{T.value=V.data.data}),n.fetchProductSize({pageSize:-1}).then(V=>{j.value=V.data.data}),n.fetchProductMicedMeat({pageSize:-1}).then(V=>{Z.value=V.data.data}),n.fetchProductCut({pageSize:-1}).then(V=>{Q.value=V.data.data}),n.fetchProductPerparation({pageSize:-1}).then(V=>{E.value=V.data.data}),n.fetchPaymentTypes({pageSize:-1}).then(V=>{N.value=V.data.data}),n.fetchProductShalwata({pageSize:-1}).then(V=>{r.value=V.data.data})}),xe(()=>{var V,d,P,i,K,F,W,f,g,q,w,s,m,ee,ae,se,me;a.id=c.item.id,a.name_ar=c.item.name_ar,a.name_en=c.item.name_en,a.weight=c.item.weight,a.calories=c.item.calories,a.description_ar=c.item.description_ar,a.description_en=c.item.description_en,a.sale_price=c.item.sale_price,a.price=c.item.price,a.is_active=(V=c.item.is_active)!=null?V:0,a.is_available=(d=c.item.is_available)!=null?d:0,a.is_kwar3=(P=c.item.is_kwar3)!=null?P:0,a.is_Ras=(i=c.item.is_Ras)!=null?i:0,a.is_lyh=(K=c.item.is_lyh)!=null?K:0,a.is_karashah=(F=c.item.is_karashah)!=null?F:0,a.category_id=c.item.category?c.item.category:null,a.sub_category_id=(W=c.item.sub_category)!=null?W:0,a.shalwata_id=c.item.shalwata_id,a.is_shalwata=(f=c.item.is_shalwata)!=null?f:0,a.is_delivered=(g=c.item.is_delivered)!=null?g:0,a.is_picked_up=(q=c.item.is_picked_up)!=null?q:0,a.preparation_ids=(w=c.item.product_preparations)!=null?w:[],a.size_ids=(s=c.item.product_sizes)!=null?s:[],a.miced_meat_ids=(m=c.item.product_miced_meats)!=null?m:[],a.cut_ids=(ee=c.item.product_cuts)!=null?ee:[],a.payment_type_ids=(ae=c.item.product_payment_types)!=null?ae:[],a.city_ids=(se=c.item.cities)!=null?se:[],J.value=(me=c.item.product_images)!=null?me:[]});const k=v(null),S=()=>{D("update:isEditOpen",!1)},ie=async()=>{p.value=!0;const V=await k.value.validate();console.log(a),V.valid?$.editProduct(a).then(d=>{D("refreshTable"),D("update:isEditOpen",!1),n.alertColor="success",n.alertMessage="\u062A\u0645 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0639\u0646\u0635\u0631 \u0628\u0646\u062C\u0627\u062D",n.isAlertShow=!0,setTimeout(()=>{n.isAlertShow=!1,n.alertMessage="",p.value=!1},2e3)}).catch(d=>{d.response.data.errors?Object.keys(d.response.data.errors).forEach(i=>{n.alertMessage=_(`errors.${i}`)}):n.alertMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 !",p.value=!1,n.alertColor="error",n.isAlertShow=!0,setTimeout(()=>{n.isAlertShow=!1,n.alertMessage=""},2e3)}):(p.value=!1,n.alertMessage="\u064A\u0631\u062C\u064A \u062A\u0639\u0628\u0626\u0629 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 !",n.alertColor="error",n.isAlertShow=!0,setTimeout(()=>{n.isAlertShow=!1,n.alertMessage=""},2e3))},G=V=>{D("update:isEditOpen",V)};return(V,d)=>{const P=we;return z(),O(he,{width:V.$vuetify.display.smAndDown?"auto":650,"model-value":c.isEditOpen,"onUpdate:modelValue":G},{default:t(()=>[l(P,{onClick:d[0]||(d[0]=i=>G(!1))}),l(re,{class:"pa-sm-9 pa-5"},{default:t(()=>[l(ve,null,{default:t(()=>[l(_e,{class:"text-h5 d-flex flex-column align-center gap-2 text-center mb-3"},{default:t(()=>[l(A,{icon:"streamline:shopping-bag-hand-bag-1-shopping-bag-purse-goods-item-products",size:"24",color:"primary"}),b("span",Qe,y(e(_)("Edit_Item")),1)]),_:1})]),_:1}),l(ue,null,{default:t(()=>[l(ge,{ref_key:"refForm",ref:k,onSubmit:ne(ie,["prevent"])},{default:t(()=>[l(H,null,{default:t(()=>[l(o,{cols:"12",md:"6"},{default:t(()=>[l(x,{modelValue:e(a).name_ar,"onUpdate:modelValue":d[1]||(d[1]=i=>e(a).name_ar=i),label:e(_)("forms.name_ar"),rules:[e(h)]},null,8,["modelValue","label","rules"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(x,{modelValue:e(a).name_en,"onUpdate:modelValue":d[2]||(d[2]=i=>e(a).name_en=i),label:e(_)("forms.name_en"),rules:[e(h)]},null,8,["modelValue","label","rules"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(x,{modelValue:e(a).weight,"onUpdate:modelValue":d[3]||(d[3]=i=>e(a).weight=i),label:e(_)("forms.weight"),rules:[e(h)]},null,8,["modelValue","label","rules"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(x,{modelValue:e(a).calories,"onUpdate:modelValue":d[4]||(d[4]=i=>e(a).calories=i),label:e(_)("forms.calories"),rules:[e(h)]},null,8,["modelValue","label","rules"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(x,{modelValue:e(a).description_ar,"onUpdate:modelValue":d[5]||(d[5]=i=>e(a).description_ar=i),label:e(_)("forms.description_ar"),rules:[e(h)]},null,8,["modelValue","label","rules"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(x,{modelValue:e(a).description_en,"onUpdate:modelValue":d[6]||(d[6]=i=>e(a).description_en=i),label:e(_)("forms.description_en"),rules:[e(h)]},null,8,["modelValue","label","rules"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(x,{modelValue:e(a).sale_price,"onUpdate:modelValue":d[7]||(d[7]=i=>e(a).sale_price=i),label:e(_)("forms.sale_price"),rules:[e(h)]},null,8,["modelValue","label","rules"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(x,{modelValue:e(a).price,"onUpdate:modelValue":d[8]||(d[8]=i=>e(a).price=i),label:e(_)("forms.price"),rules:[e(h)]},null,8,["modelValue","label","rules"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(U,{modelValue:e(a).category_id,"onUpdate:modelValue":d[9]||(d[9]=i=>e(a).category_id=i),items:e(T).value,label:e(_)("forms.categories"),"item-title":"type_ar","item-value":"id",rules:[e(h)]},null,8,["modelValue","items","label","rules"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(U,{modelValue:e(a).sub_category_id,"onUpdate:modelValue":d[10]||(d[10]=i=>e(a).sub_category_id=i),items:e(I).value,label:e(_)("forms.sub_categories"),"item-title":"type_ar","item-value":"id",rules:[e(h)]},null,8,["modelValue","items","label","rules"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(U,{modelValue:e(a).cut_ids,"onUpdate:modelValue":d[11]||(d[11]=i=>e(a).cut_ids=i),items:e(Q).value,label:e(_)("forms.product_cut"),"item-title":"name_ar","item-value":"id",multiple:""},null,8,["modelValue","items","label"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(U,{modelValue:e(a).size_ids,"onUpdate:modelValue":d[12]||(d[12]=i=>e(a).size_ids=i),items:e(j).value,label:e(_)("forms.product_size"),"item-title":"name_ar","item-value":"id",multiple:"",rules:[e(h)]},null,8,["modelValue","items","label","rules"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(U,{modelValue:e(a).miced_meat_ids,"onUpdate:modelValue":d[13]||(d[13]=i=>e(a).miced_meat_ids=i),items:e(Z).value,label:e(_)("forms.MicedMeats"),"item-title":"name_ar","item-value":"id",multiple:"",rules:[e(h)]},null,8,["modelValue","items","label","rules"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(U,{modelValue:e(a).preparation_ids,"onUpdate:modelValue":d[14]||(d[14]=i=>e(a).preparation_ids=i),items:e(E).value,label:e(_)("forms.product_preparation"),"item-title":"name_ar","item-value":"id",multiple:""},null,8,["modelValue","items","label"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(U,{modelValue:e(a).city_ids,"onUpdate:modelValue":d[15]||(d[15]=i=>e(a).city_ids=i),items:e(Y).value,label:e(_)("forms.cities"),"item-title":"name_ar","item-value":"id",multiple:"",rules:[e(h)]},null,8,["modelValue","items","label","rules"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(U,{modelValue:e(a).payment_type_ids,"onUpdate:modelValue":d[16]||(d[16]=i=>e(a).payment_type_ids=i),items:e(N).value,label:e(_)("forms.payment_type_ids"),"item-title":"name_ar","item-value":"id",multiple:""},null,8,["modelValue","items","label"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(De,{modelValue:e(a).images,"onUpdate:modelValue":d[17]||(d[17]=i=>e(a).images=i),label:e(_)("forms.product_images"),accept:"image/*","prepend-icon":"","small-chips":"","prepend-inner-icon":"mdi-image",multiple:""},null,8,["modelValue","label"])]),_:1}),e(a).is_shalwata?de("",!0):(z(),O(o,{key:0,cols:"12",md:"6"},{default:t(()=>[l(U,{modelValue:e(a).shalwata_id,"onUpdate:modelValue":d[18]||(d[18]=i=>e(a).shalwata_id=i),items:e(r),label:e(_)("forms.shalwata"),"item-title":"name_ar","item-value":"id"},null,8,["modelValue","items","label"])]),_:1})),e(J).length>0?(z(),O(o,{key:1,cols:"12"},{default:t(()=>[l(Fe,{"show-arrows":"hover"},{default:t(()=>[(z(!0),pe(Ae,null,Me(e(J),i=>(z(),O(Le,{key:i.id,src:i.thumbnail_url,cover:""},null,8,["src"]))),128))]),_:1})]),_:1})):de("",!0),l(o,{cols:"12",md:"6"},{default:t(()=>[l(L,{modelValue:e(a).is_active,"onUpdate:modelValue":d[19]||(d[19]=i=>e(a).is_active=i),label:e(_)("forms.is_active")},null,8,["modelValue","label"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(L,{modelValue:e(a).is_available,"onUpdate:modelValue":d[20]||(d[20]=i=>e(a).is_available=i),label:e(_)("forms.is_available")},null,8,["modelValue","label"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(L,{modelValue:e(a).is_kwar3,"onUpdate:modelValue":d[21]||(d[21]=i=>e(a).is_kwar3=i),label:e(_)("forms.is_kwar3")},null,8,["modelValue","label"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(L,{modelValue:e(a).is_Ras,"onUpdate:modelValue":d[22]||(d[22]=i=>e(a).is_Ras=i),label:e(_)("forms.is_Ras")},null,8,["modelValue","label"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(L,{modelValue:e(a).is_lyh,"onUpdate:modelValue":d[23]||(d[23]=i=>e(a).is_lyh=i),label:e(_)("forms.is_lyh")},null,8,["modelValue","label"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(L,{modelValue:e(a).is_karashah,"onUpdate:modelValue":d[24]||(d[24]=i=>e(a).is_karashah=i),label:e(_)("forms.is_karashah")},null,8,["modelValue","label"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(L,{modelValue:e(a).is_shalwata,"onUpdate:modelValue":d[25]||(d[25]=i=>e(a).is_shalwata=i),label:e(_)("forms.is_shalwata")},null,8,["modelValue","label"])]),_:1}),l(o,{cols:"12",class:"text-center"},{default:t(()=>[e(p)?(z(),O(M,{key:1,type:"submit",class:"position-relative me-3"},{default:t(()=>[l(A,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(z(),O(M,{key:0,type:"submit",class:"me-3"},{default:t(()=>[le(y(e(_)("buttons.save")),1)]),_:1})),l(M,{variant:"tonal",color:"secondary",onClick:S},{default:t(()=>[le(y(e(_)("buttons.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},Ge={class:"mx-1 my-1"},He={__name:"AddProductDialog",props:{isAddOpen:{type:Boolean,required:!0}},emits:["update:isAddOpen","refreshTable"],setup(oe,{emit:te}){const c=oe,D=te,n=be(),$=fe(),B=Ue(),C=Se(),{t:p}=ce(),_=R([]),Y=R([]),T=R([]),I=v([]),E=v([]),j=v([]),Z=v([]),Q=v([]),N=R([]),J=v(null),r=R({name_ar:"",name_en:"",weight:"",calories:"",description_ar:"",description_en:"",sale_price:null,price:null,is_active:0,is_available:0,is_kwar3:0,is_Ras:0,is_lyh:0,is_karashah:0,category_id:null,sub_category_id:null,is_shalwata:0,shalwata_id:null,preparation_ids:[],size_ids:[],miced_meat_ids:[],cut_ids:[],payment_type_ids:[],city_ids:[],images:[],not_dates:[{date_mm_dd:null,delivery_period_ids:[{delivery_period_id:null,city_id:null},{delivery_period_id:null,city_id:null}]}]}),a=()=>{n.fetchProductSize({pageSize:-1}).then(w=>{E.value=w.data.data})},k=()=>{n.fetchProductMicedMeat({pageSize:-1}).then(w=>{j.value=w.data.data})},S=()=>{n.fetchProductShalwata({pageSize:-1}).then(w=>{Q.value=w.data.data})},ie=()=>{n.fetchProductCut({pageSize:-1}).then(w=>{Z.value=w.data.data})},G=()=>{n.fetchProductPerparation({pageSize:-1}).then(w=>{I.value=w.data.data})},V=()=>{n.fetchPaymentTypes({pageSize:-1}).then(w=>{N.value=w.data.data})},d=async()=>{P.value=!0,await(()=>{B.fetchCities({pageSize:-1}).then(s=>{_.value=s.data.data}),C.fetchCategories({pageSize:-1}).then(s=>{Y.value=s.data.data}),a(),k(),ie(),G(),V(),S()})()};Ve(()=>{d().then(w=>{P.value=!1})}),v();const P=v(!1),i=v(!1),K=v(!1),F=v(!1),W=v(!1),f=()=>{D("update:isAddOpen",!1)};ye(()=>r.category_id,()=>{r.category_id!==null&&C.fetchSubCategoryByCategory(r.category_id).then(w=>{T.value=w==null?void 0:w.data.data})});const g=async()=>{P.value=!0,(await J.value.validate()).valid?(console.log(r),$.storeProduct(r).then(s=>{D("refreshTable"),D("update:isAddOpen",!1),n.alertColor="success",n.alertMessage="\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0646\u0635\u0631 \u0628\u0646\u062C\u0627\u062D",n.isAlertShow=!0,setTimeout(()=>{n.isAlertShow=!1,n.alertMessage=""},2e3)}).catch(s=>{s.response.data.errors?Object.keys(s.response.data.errors).forEach(ee=>{n.alertMessage=p(`errors.${ee}`)}):n.alertMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 !",P.value=!1,n.alertColor="error",n.isAlertShow=!0,setTimeout(()=>{n.isAlertShow=!1,n.alertMessage=""},2e3)})):(P.value=!1,n.alertMessage="\u064A\u0631\u062C\u064A \u062A\u0639\u0628\u0626\u0629 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 !",n.alertColor="error",n.isAlertShow=!0,setTimeout(()=>{n.isAlertShow=!1,n.alertMessage=""},2e3))},q=w=>{D("update:isAddOpen",w)};return(w,s)=>{const m=we,ee=Ie,ae=qe,se=Ee,me=Be;return z(),O(he,{width:w.$vuetify.display.smAndDown?"auto":650,"model-value":c.isAddOpen,"onUpdate:modelValue":q},{default:t(()=>[l(m,{onClick:s[0]||(s[0]=u=>q(!1))}),l(re,{loading:e(P),class:"pa-sm-9 pa-5"},{default:t(()=>[l(ve,null,{default:t(()=>[l(_e,{class:"text-h5 d-flex flex-column align-center gap-2 text-center mb-3"},{default:t(()=>[l(A,{icon:"streamline:shopping-bag-hand-bag-1-shopping-bag-purse-goods-item-products",size:"24",color:"primary"}),b("span",Ge,y(e(p)("Add_Item")),1)]),_:1})]),_:1}),l(ue,null,{default:t(()=>[l(ge,{ref_key:"refForm",ref:J,onSubmit:ne(g,["prevent"])},{default:t(()=>[l(H,null,{default:t(()=>[l(o,{cols:"12",md:"6"},{default:t(()=>[l(x,{modelValue:e(r).name_ar,"onUpdate:modelValue":s[1]||(s[1]=u=>e(r).name_ar=u),label:e(p)("forms.name_ar"),rules:[e(h)]},null,8,["modelValue","label","rules"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(x,{modelValue:e(r).name_en,"onUpdate:modelValue":s[2]||(s[2]=u=>e(r).name_en=u),label:e(p)("forms.name_en"),rules:[e(h)]},null,8,["modelValue","label","rules"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(x,{modelValue:e(r).weight,"onUpdate:modelValue":s[3]||(s[3]=u=>e(r).weight=u),label:e(p)("forms.weight"),rules:[e(h)]},null,8,["modelValue","label","rules"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(x,{modelValue:e(r).calories,"onUpdate:modelValue":s[4]||(s[4]=u=>e(r).calories=u),label:e(p)("forms.calories"),rules:[e(h)]},null,8,["modelValue","label","rules"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(x,{modelValue:e(r).description_ar,"onUpdate:modelValue":s[5]||(s[5]=u=>e(r).description_ar=u),label:e(p)("forms.description_ar"),rules:[e(h)]},null,8,["modelValue","label","rules"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(x,{modelValue:e(r).description_en,"onUpdate:modelValue":s[6]||(s[6]=u=>e(r).description_en=u),label:e(p)("forms.description_en"),rules:[e(h)]},null,8,["modelValue","label","rules"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(x,{modelValue:e(r).sale_price,"onUpdate:modelValue":s[7]||(s[7]=u=>e(r).sale_price=u),label:e(p)("forms.sale_price"),rules:[e(h)]},null,8,["modelValue","label","rules"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(x,{modelValue:e(r).price,"onUpdate:modelValue":s[8]||(s[8]=u=>e(r).price=u),label:e(p)("forms.price"),rules:[e(h)]},null,8,["modelValue","label","rules"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(U,{modelValue:e(r).category_id,"onUpdate:modelValue":s[9]||(s[9]=u=>e(r).category_id=u),items:e(Y).value,label:e(p)("forms.categories"),"item-title":"type_ar","item-value":"id",rules:[e(h)]},null,8,["modelValue","items","label","rules"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(U,{modelValue:e(r).sub_category_id,"onUpdate:modelValue":s[10]||(s[10]=u=>e(r).sub_category_id=u),items:e(T).value,label:e(p)("forms.sub_categories"),"item-title":"type_ar","item-value":"id",rules:[e(h)]},null,8,["modelValue","items","label","rules"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(H,{align:"center"},{default:t(()=>[l(o,{cols:"12",lg:"9",sm:"12"},{default:t(()=>[l(U,{modelValue:e(r).cut_ids,"onUpdate:modelValue":s[11]||(s[11]=u=>e(r).cut_ids=u),items:e(Z),label:e(p)("forms.product_cut"),"item-title":"name_ar","item-value":"id",multiple:""},null,8,["modelValue","items","label"])]),_:1}),l(o,{cols:"12",lg:"3",sm:"12"},{default:t(()=>[l(M,{type:"button",size:"small",class:"position-relative me-3",onClick:s[12]||(s[12]=u=>F.value=!0)},{default:t(()=>[l(A,{icon:"material-symbols-light:add",size:"20"})]),_:1})]),_:1})]),_:1})]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(H,{align:"center"},{default:t(()=>[l(o,{cols:"12",lg:"9",sm:"12"},{default:t(()=>[l(U,{modelValue:e(r).size_ids,"onUpdate:modelValue":s[13]||(s[13]=u=>e(r).size_ids=u),items:e(E),label:e(p)("forms.product_size"),"item-title":"name_ar","item-value":"id",multiple:"",rules:[e(h)]},null,8,["modelValue","items","label","rules"])]),_:1}),l(o,{cols:"12",lg:"3",sm:"12"},{default:t(()=>[l(M,{type:"button",size:"small",class:"position-relative me-3",onClick:s[14]||(s[14]=u=>i.value=!0)},{default:t(()=>[l(A,{icon:"material-symbols-light:add",size:"20"})]),_:1})]),_:1})]),_:1})]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(H,{align:"center"},{default:t(()=>[l(o,{cols:"12",lg:"9",sm:"12"},{default:t(()=>[l(U,{modelValue:e(r).miced_meat_ids,"onUpdate:modelValue":s[15]||(s[15]=u=>e(r).miced_meat_ids=u),items:e(j),label:e(p)("forms.MicedMeats"),"item-title":"name_ar","item-value":"id",multiple:"",rules:[e(h)]},null,8,["modelValue","items","label","rules"])]),_:1}),l(o,{cols:"12",lg:"3",sm:"12"},{default:t(()=>[l(M,{type:"button",size:"small",class:"position-relative me-3",onClick:s[16]||(s[16]=u=>K.value=!0)},{default:t(()=>[l(A,{icon:"material-symbols-light:add",size:"20"})]),_:1})]),_:1})]),_:1})]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(H,{align:"center"},{default:t(()=>[l(o,{cols:"12",lg:"9",sm:"12"},{default:t(()=>[l(U,{modelValue:e(r).preparation_ids,"onUpdate:modelValue":s[17]||(s[17]=u=>e(r).preparation_ids=u),items:e(I),label:e(p)("forms.product_preparation"),"item-title":"name_ar","item-value":"id",multiple:""},null,8,["modelValue","items","label"])]),_:1}),l(o,{cols:"12",lg:"3",sm:"12"},{default:t(()=>[l(M,{type:"button",size:"small",class:"position-relative me-3",onClick:s[18]||(s[18]=u=>W.value=!0)},{default:t(()=>[l(A,{icon:"material-symbols-light:add",size:"20"})]),_:1})]),_:1})]),_:1})]),_:1}),e(r).is_shalwata?de("",!0):(z(),O(o,{key:0,cols:"12",md:"6"},{default:t(()=>[l(U,{modelValue:e(r).shalwata_id,"onUpdate:modelValue":s[19]||(s[19]=u=>e(r).shalwata_id=u),items:e(Q),label:e(p)("forms.shalwata"),"item-title":"name_ar","item-value":"id"},null,8,["modelValue","items","label"])]),_:1})),l(o,{cols:"12",md:"6"},{default:t(()=>[l(U,{modelValue:e(r).city_ids,"onUpdate:modelValue":s[20]||(s[20]=u=>e(r).city_ids=u),items:e(_).value,label:e(p)("forms.cities"),"item-title":"name_ar","item-value":"id",multiple:"",rules:[e(h)]},null,8,["modelValue","items","label","rules"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(U,{modelValue:e(r).payment_type_ids,"onUpdate:modelValue":s[21]||(s[21]=u=>e(r).payment_type_ids=u),items:e(N).value,label:e(p)("forms.payment_type_ids"),"item-title":"name_ar","item-value":"id",multiple:"",rules:[e(h)]},null,8,["modelValue","items","label","rules"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(De,{modelValue:e(r).images,"onUpdate:modelValue":s[22]||(s[22]=u=>e(r).images=u),label:e(p)("forms.product_images"),accept:"image/*","prepend-icon":"","prepend-inner-icon":"mdi-image",multiple:"",rules:[e(h)]},null,8,["modelValue","label","rules"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(L,{modelValue:e(r).is_active,"onUpdate:modelValue":s[23]||(s[23]=u=>e(r).is_active=u),label:e(p)("forms.is_active")},null,8,["modelValue","label"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(L,{modelValue:e(r).is_available,"onUpdate:modelValue":s[24]||(s[24]=u=>e(r).is_available=u),label:e(p)("forms.is_available")},null,8,["modelValue","label"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(L,{modelValue:e(r).is_kwar3,"onUpdate:modelValue":s[25]||(s[25]=u=>e(r).is_kwar3=u),label:e(p)("forms.is_kwar3")},null,8,["modelValue","label"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(L,{modelValue:e(r).is_Ras,"onUpdate:modelValue":s[26]||(s[26]=u=>e(r).is_Ras=u),label:e(p)("forms.is_Ras")},null,8,["modelValue","label"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(L,{modelValue:e(r).is_lyh,"onUpdate:modelValue":s[27]||(s[27]=u=>e(r).is_lyh=u),label:e(p)("forms.is_lyh")},null,8,["modelValue","label"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(L,{modelValue:e(r).is_karashah,"onUpdate:modelValue":s[28]||(s[28]=u=>e(r).is_karashah=u),label:e(p)("forms.is_karashah")},null,8,["modelValue","label"])]),_:1}),l(o,{cols:"12",md:"6"},{default:t(()=>[l(L,{modelValue:e(r).is_shalwata,"onUpdate:modelValue":s[29]||(s[29]=u=>e(r).is_shalwata=u),label:e(p)("forms.is_shalwata")},null,8,["modelValue","label"])]),_:1}),l(o,{cols:"12",class:"text-center"},{default:t(()=>[e(P)?(z(),O(M,{key:1,type:"submit",class:"position-relative me-3"},{default:t(()=>[l(A,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(z(),O(M,{key:0,type:"submit",class:"me-3"},{default:t(()=>[le(y(e(p)("buttons.save")),1)]),_:1})),l(M,{variant:"tonal",color:"secondary",onClick:f},{default:t(()=>[le(y(e(p)("buttons.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["loading"]),l(ee,{"is-add-open":e(i),"onUpdate:isAddOpen":s[30]||(s[30]=u=>X(i)?i.value=u:null),onRefreshTable:a},null,8,["is-add-open"]),l(ae,{"is-add-open":e(K),"onUpdate:isAddOpen":s[31]||(s[31]=u=>X(K)?K.value=u:null),onRefreshTable:k},null,8,["is-add-open"]),l(se,{"is-add-open":e(W),"onUpdate:isAddOpen":s[32]||(s[32]=u=>X(W)?W.value=u:null),onRefreshTable:G},null,8,["is-add-open"]),l(me,{"is-add-open":e(F),"onUpdate:isAddOpen":s[33]||(s[33]=u=>X(F)?F.value=u:null),onRefreshTable:ie},null,8,["is-add-open"])]),_:1},8,["width","model-value"])}}},Je={class:"icon"},Ke={class:"icon"},We={class:"icon"},Xe=b("span",{class:"mx-1"},"\u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A",-1),el={style:{width:"5rem"}},ll={scope:"col",class:"font-weight-semibold"},tl={scope:"col",class:"font-weight-semibold"},al={scope:"col",class:"font-weight-semibold"},sl={scope:"col",class:"font-weight-semibold"},ol={scope:"col",class:"font-weight-semibold"},il={scope:"col",class:"font-weight-semibold"},dl={scope:"col",class:"font-weight-semibold"},rl={scope:"col",class:"font-weight-semibold"},ul={scope:"col",class:"font-weight-semibold"},nl={scope:"col",class:"font-weight-semibold"},ml=b("tr",null,[b("td",{colspan:"8",class:"text-center text-body-1"},"\u0644\u0627 \u064A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A")],-1),pl=[ml],cl={class:"text-sm text-disabled"},Zl={__name:"index",setup(oe){const te=fe(),c=Se(),D=Ue(),n=v("");v();const $=v(5),B=v(1),C=v(1),p=v(1),_=v(1),Y=v(0),T=v([]),I=v([]),E=v(!1),j=v(!1),Z=v({}),Q=v(!1),N=v(!1);v(!1);const J=v([]),r=v([]),a=v([]),k=R({category_id:null,sub_category_id:null,city_id:null}),{t:S}=ce(),ie=Oe(),G=()=>{N.value=!0,te.fetchProducts({q:n.value,per_page:$.value,page:B.value,category_id:k.category_id,sub_category_id:k.sub_category_id,city_id:k.city_id}).then(f=>{T.value=f.data.data.data,C.value=f.data.data.last_page,p.value=f.data.data.from,_.value=f.data.data.to,Y.value=f.data.data.total,N.value=!1}).catch(f=>{N.value=!1,console.log(f)})};ke(()=>{$.value&&(B.value=1)}),Ce(()=>T.value.filter((f,g)=>{let q=(B.value-1)*$.value,w=B.value*$.value;if(g>=q&&g<w)return!0}));const V=Ce(()=>` \u0639\u0631\u0636 \u0645\u0646 ${F(p.value)} \u0625\u0644\u064A ${F(_.value)} \u0645\u0646 ${F(Y.value)} \u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A `),d=f=>{ie.push(`products/${f.id}`)},P=f=>{j.value=!0,Z.value=f},i=f=>{Q.value=!0,Z.value=f},K=()=>{k.category_id=null,k.sub_category_id=null,k.city_id=null},F=f=>{const g="\u0660\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669";return String(f).replace(/[0123456789]/g,q=>g[q])},W=f=>{let g=ze(f).format("DD-MM-YYYY"),q=ze(f).format("hh:mm:ss A");return{date:g,time:q}};return ke(()=>{G()}),ye(()=>k.category_id,()=>{k.category_id!==null&&c.fetchSubCategoryByCategory(k.category_id).then(f=>{r.value=f==null?void 0:f.data.data})}),Ve(()=>{c.fetchCategories({}).then(f=>{J.value=f==null?void 0:f.data.data}),D.fetchCities({}).then(f=>{a.value=f==null?void 0:f.data.data})}),(f,g)=>{const q=He,w=Ze,s=Ye;return z(),pe("div",null,[l(re,{class:"mb-5 pa-5"},{default:t(()=>[l(ge,{onSubmit:g[3]||(g[3]=ne(()=>{},["stop"]))},{default:t(()=>[l(H,{justify:"space-between"},{default:t(()=>[l(o,{cols:"12",lg:"8",md:"6",sm:"12"},{default:t(()=>[l(H,null,{default:t(()=>[l(o,{cols:"12",lg:"4",md:"4",sm:"6",class:"d-flex align-center gap-3"},{default:t(()=>[b("div",Je,[l(A,{icon:"carbon:categories",color:"primary"})]),l(U,{modelValue:e(k).category_id,"onUpdate:modelValue":g[0]||(g[0]=m=>e(k).category_id=m),items:e(J),label:e(S)("forms.categories"),"item-title":"type_ar","item-value":"id"},null,8,["modelValue","items","label"])]),_:1}),l(o,{cols:"12",lg:"4",md:"3",sm:"6",class:"d-flex align-center gap-3"},{default:t(()=>[b("div",Ke,[l(A,{icon:"carbon:category-new-each",color:"primary"})]),l(U,{modelValue:e(k).sub_category_id,"onUpdate:modelValue":g[1]||(g[1]=m=>e(k).sub_category_id=m),items:e(r),label:e(S)("forms.sub_categories"),"item-title":"type_ar","item-value":"id"},null,8,["modelValue","items","label"])]),_:1}),l(o,{cols:"12",lg:"4",md:"3",sm:"6",class:"d-flex align-center gap-3"},{default:t(()=>[b("div",We,[l(A,{icon:"solar:city-broken",color:"primary"})]),l(U,{modelValue:e(k).city_id,"onUpdate:modelValue":g[2]||(g[2]=m=>e(k).city_id=m),items:e(a),label:e(S)("forms.cities"),"item-title":"name_ar","item-value":"id"},null,8,["modelValue","items","label"])]),_:1})]),_:1})]),_:1}),l(o,{cols:"12",lg:"4",md:"6",sm:"6"},{default:t(()=>[l(H,{align:"center",justify:"end"},{default:t(()=>[l(o,{cols:"12",lg:"5",md:"5",sm:"6"},{default:t(()=>[l(M,{class:"w-100","prepend-icon":"healthicons:x",disabled:e(N),onClick:ne(K,["stop"])},{default:t(()=>[le(y(e(S)("Clear_Filter")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),l(re,{loading:e(N)},{default:t(()=>[l(_e,{class:"d-flex align-center"},{default:t(()=>[l(A,{icon:"streamline:shopping-bag-hand-bag-1-shopping-bag-purse-goods-item-products",size:"24",color:"primary"}),Xe]),_:1}),l(ue,{class:"d-flex align-center flex-wrap gap-2 py-4"},{default:t(()=>[b("div",el,[l(U,{modelValue:e($),"onUpdate:modelValue":g[4]||(g[4]=m=>X($)?$.value=m:null),variant:"outlined",items:[5,10,20,30,50,100]},null,8,["modelValue"])]),l(M,{"prepend-icon":"tabler-plus",disabled:e(N),onClick:g[5]||(g[5]=m=>E.value=!0)},{default:t(()=>[le(" \u0625\u0636\u0627\u0641\u0629 \u0645\u0646\u062A\u062C ")]),_:1},8,["disabled"]),l(je)]),_:1}),l(Pe),l($e,{class:"text-no-wrap product-list-table"},{default:t(()=>[b("thead",null,[b("tr",null,[b("th",ll,y(e(S)("forms.id")),1),b("th",tl,y(e(S)("forms.name")),1),b("th",al,y(e(S)("forms.description")),1),b("th",sl,y(e(S)("forms.status")),1),b("th",ol,y(e(S)("forms.price")),1),b("th",il,y(e(S)("forms.sale_price")),1),b("th",dl,y(e(S)("forms.category")),1),b("th",rl,y(e(S)("forms.sub_category")),1),b("th",ul,y(e(S)("forms.created_at")),1),b("th",nl,y(e(S)("forms.actions")),1)])]),b("tbody",null,[(z(!0),pe(Ae,null,Me(e(T),(m,ee)=>{var ae;return z(),pe("tr",{key:m.id},[b("td",null,"#"+y(++ee),1),b("td",null,y(m.name_ar),1),b("td",null,y(m.description_ar?m.description_ar.toString().length>20?m.description_ar.toString().slice(0,20)+"...":m.description_ar:"-"),1),b("td",null,[l(A,{icon:"ph:dot-bold",color:m.is_active==!0?"#008000":"#f00000",size:"32"},null,8,["color"]),b("span",null,y(m.is_active==!0?e(S)("forms.statuses.active"):e(S)("forms.statuses.inactive")),1)]),b("td",null,y(F(Intl.NumberFormat().format(m.price)))+" "+y(e(S)("riyal")),1),b("td",null,y(F(Intl.NumberFormat().format((ae=m.sale_price)!=null?ae:0)))+" "+y(e(S)("riyal")),1),b("td",null,y(m.category?m.category.type_ar:"-"),1),b("td",null,y(m.sub_category?m.sub_category.type_ar:"-"),1),b("td",null,y(F(W(m.created_at).date)),1),b("td",null,[l(M,{icon:"",variant:"plain",color:"default",size:"x-small",onClick:se=>d(m)},{default:t(()=>[l(A,{size:22,icon:"tabler-eye"})]),_:2},1032,["onClick"]),l(M,{icon:"",variant:"plain",color:"default",size:"x-small",onClick:se=>i(m)},{default:t(()=>[l(A,{size:22,icon:"tabler-pencil"})]),_:2},1032,["onClick"]),l(M,{icon:"",variant:"plain",color:"default",size:"x-small",onClick:se=>P(m)},{default:t(()=>[l(A,{size:22,icon:"tabler-trash"})]),_:2},1032,["onClick"])])])}),128))]),Te(b("tfoot",null,pl,512),[[Re,!e(T).length]])]),_:1}),l(Pe),l(ue,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3"},{default:t(()=>[b("span",cl,y(e(V)),1),l(Ne,{modelValue:e(B),"onUpdate:modelValue":g[6]||(g[6]=m=>X(B)?B.value=m:null),size:"small","total-visible":5,length:e(C),onNext:g[7]||(g[7]=m=>I.value=[]),onPrev:g[8]||(g[8]=m=>I.value=[])},null,8,["modelValue","length"])]),_:1})]),_:1},8,["loading"]),e(E)?(z(),O(q,{key:0,"is-add-open":e(E),"onUpdate:isAddOpen":g[9]||(g[9]=m=>X(E)?E.value=m:null),onRefreshTable:G},null,8,["is-add-open"])):de("",!0),e(Q)?(z(),O(w,{key:1,"is-edit-open":e(Q),"onUpdate:isEditOpen":g[10]||(g[10]=m=>X(Q)?Q.value=m:null),item:e(Z),onRefreshTable:G},null,8,["is-edit-open","item"])):de("",!0),e(j)?(z(),O(s,{key:2,"is-delete-open":e(j),"onUpdate:isDeleteOpen":g[11]||(g[11]=m=>X(j)?j.value=m:null),item:e(Z),onRefreshTable:G},null,8,["is-delete-open","item"])):de("",!0)])}}};export{Zl as default};
