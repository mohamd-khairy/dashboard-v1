import{b_ as ge,bU as H,bP as X,aB as le,k as y,o as b,b as C,w as s,p as t,bQ as Y,bR as se,bS as ee,ak as B,m as p,y as V,q as e,b$ as W,c0 as ae,av as oe,aw as h,al as T,ap as j,bD as M,D as ve,c6 as de,r as ce,ag as z,C as ye,I as Ve,A as ue,b0 as he,c as F,an as J,ar as N,bZ as xe,F as we,a as Ce,as as ke}from"./index.e195cd26.js";import{_ as ie}from"./DialogCloseBtn.a5443f2c.js";import{V as ne}from"./VForm.bf1fdf96.js";import{V as re}from"./VDialog.4d61232b.js";import{u as me}from"./Categories.d2cb3476.js";import{u as pe}from"./Cities.5a000363.js";import{u as _e}from"./Products.8f4807a4.js";import{r as U}from"./validators.dc210ddc.js";import{d as Q}from"./VTextField.0ba2900d.js";import{V as L}from"./VSelect.d3114f6b.js";import{V as fe}from"./VFileInput.892a0b51.js";import{a as be}from"./VList.9d440da5.js";import{V as K}from"./VDivider.638f8eff.js";import{V as De}from"./VSpacer.b4f17f1c.js";import{V as Se}from"./VPagination.744b7e53.js";import"./forwardRefs.74a345f5.js";import"./VOverlay.e3c69687.js";import"./lazy.3c63b833.js";import"./index.4f7ac4e6.js";import"./VMenu.62aeda27.js";import"./VCheckboxBtn.720fbc0c.js";import"./VChip.37b1ef7f.js";import"./ssrBoot.d7cd1016.js";const te=ge("BannersStore",{actions:{fetchBanners(o){return H.get("banners",{params:o})},fetchBanner(o){return H.get(`/banners/${o}`)},storeBanner(o){const i=new FormData;let r="";return Object.values(o.city_ids).map(g=>{typeof g=="object"?r=r.length==0?`${g.id}`:r+","+g.id:r=r.length==0?`${g}`:r+","+g}),i.append("title",o.title),i.append("title_color",o.title_color),i.append("sub_title",o.sub_title),i.append("sub_title_color",o.sub_title_color),i.append("button_text",o.button_text),i.append("button_text_color",o.button_text_color),i.append("redirect_url",o.redirect_url),i.append("is_active",o.is_active),i.append("type",o.type),o.redirect_mobile_url!==null&&i.append("redirect_mobile_url",o.redirect_mobile_url),o.product_id!==null&&i.append("product_id",o.product_id),i.append("category_ids",o.category_ids),i.append("city_ids",r),o.image!=={}&&i.append("image",o.image[0]),H.post("/banners/add-banner",i)},editBanner(o){const i=new FormData;let r="";Object.values(o.city_ids).map(m=>{typeof m=="object"?r=r.length==0?`${m.id}`:r+","+m.id:r=r.length==0?`${m}`:r+","+m}),i.append("title",o.title),i.append("title_color",o.title_color),i.append("sub_title",o.sub_title),i.append("sub_title_color",o.sub_title_color),i.append("button_text",o.button_text),i.append("button_text_color",o.button_text_color),i.append("redirect_url",o.redirect_url),i.append("is_active",o.is_active),i.append("type",o.type),o.redirect_mobile_url!==null&&i.append("redirect_mobile_url",o.redirect_mobile_url),o.product_id!==null&&i.append("product_id",o.product_id);let g=[];return o.category_ids.map(m=>{g.push(typeof m=="object"?m.id:m)}),i.append("category_ids",g),i.append("city_ids",r),o.image[0]&&i.append("image",o.image[0]),H.post(`/banners/update-banner/${o.id}`,i)},deleteBanner(o){return H.delete(`/banners/delete-banner/${o.id}`)}}}),Be={__name:"DeleteBannerDialog",props:{isDeleteOpen:{type:Boolean,required:!0},banner:{type:Object,required:!0}},emits:["update:isDeleteOpen","refreshTable"],setup(o,{emit:i}){const r=o,g=i,{t:m}=X(),D=te(),w=le(),A=y(!1),f=()=>{g("update:isDeleteOpen",!1)},u=()=>{A.value=!0,D.deleteBanner(r.banner).then(()=>{w.alertColor="success",w.alertMessage="\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0628\u0646\u0631 \u0628\u0646\u062C\u0627\u062D",g("refreshTable"),g("update:isDeleteOpen",!1),w.isAlertShow=!0,setTimeout(()=>{w.isAlertShow=!1,w.alertMessage="",A.value=!1},1e3)}).catch(v=>{A.value=!1,w.alertColor="error",w.alertMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 !",w.isAlertShow=!0,setTimeout(()=>{w.isAlertShow=!1,w.alertMessage=""},2e3)})},a=v=>{g("update:isDeleteOpen",v)};return(v,n)=>{const $=ie;return b(),C(re,{width:v.$vuetify.display.smAndDown?"auto":650,"model-value":r.isDeleteOpen,"onUpdate:modelValue":a},{default:s(()=>[t($,{onClick:n[0]||(n[0]=S=>a(!1))}),t(Y,{class:"pa-sm-9 pa-5"},{default:s(()=>[t(se,null,{default:s(()=>[t(ee,{class:"text-h5 text-center mb-3"},{default:s(()=>[t(B,{icon:"ph:info-light",color:"#f00",size:"50"}),p("h5",null,V(e(m)("ask_delete")),1)]),_:1})]),_:1}),t(W,null,{default:s(()=>[t(ne,{ref:"refForm",onSubmit:ae(u,["prevent"])},{default:s(()=>[t(oe,null,{default:s(()=>[t(h,{cols:"12",class:"text-center"},{default:s(()=>[e(A)?(b(),C(T,{key:1,type:"submit",class:"position-relative me-3"},{default:s(()=>[t(B,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(b(),C(T,{key:0,type:"submit",class:"me-3"},{default:s(()=>[j(V(e(m)("buttons.confirm")),1)]),_:1})),t(T,{variant:"tonal",color:"secondary",onClick:f},{default:s(()=>[j(V(e(m)("buttons.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}};const Oe={class:"mx-1 my-1"},Ae={class:"d-flex justify-center align-center"},$e=["src"],Ue={__name:"EditBannerDialog",props:{isEditOpen:{type:Boolean,required:!0},banner:{type:Object,required:!0}},emits:["update:isEditOpen","refreshTable"],setup(o,{emit:i}){const r=o,g=i,m=te(),D=_e(),w=me(),A=pe(),f=le(),{t:u}=X(),a=M({id:null,title:null,title_color:null,sub_title:null,sub_title_color:null,button_text:null,button_text_color:null,redirect_url:null,is_active:null,type:null,image:{},redirect_mobile_url:null,product_id:null,category_ids:[],city_ids:[]}),v=y([]),n=M([]),$=M([]),S=y(!1),q=M([{id:0,name:"\u0628\u0646\u0631 \u0639\u0627\u062F\u064A"},{id:1,name:"\u0631\u0627\u0628\u0637 \u0628\u0646\u0631 \u062E\u0627\u0631\u062C\u064A"},{id:2,name:"\u0631\u0627\u0628\u0637 \u0628\u0646\u0631 \u062F\u0627\u062E\u0644\u064A"}]),Z=M([{id:0,name:"\u063A\u064A\u0631 \u0646\u0634\u0637"},{id:1,name:"\u0646\u0634\u0637"}]),G=()=>{g("update:isEditOpen",!1)},P=y(null);ve(()=>a.type,(c,l)=>{c==0&&(a.redirect_url=null,a.product_id=null),c==1&&(a.product_id=null),c==2&&(a.redirect_url=null)});const x=async()=>{S.value=!0,(await P.value.validate()).valid?m.editBanner(a).then(l=>{g("refreshTable"),g("update:isEditOpen",!1),f.alertColor="success",f.alertMessage="\u062A\u0645 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0639\u0646\u0635\u0631 \u0628\u0646\u062C\u0627\u062D",f.isAlertShow=!0,setTimeout(()=>{f.isAlertShow=!1,f.alertMessage="",S.value=!1},1e3)}).catch(l=>{l.response.data.errors?Object.keys(l.response.data.errors).forEach(k=>{f.alertMessage=u(`errors.${k}`)}):f.alertMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 !",S.value=!1,f.alertColor="error",f.isAlertShow=!0,setTimeout(()=>{f.isAlertShow=!1,f.alertMessage=""},2e3)}):(S.value=!1,f.alertMessage="\u064A\u0631\u062C\u064A \u062A\u0639\u0628\u0626\u0629 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 !",f.alertColor="error",f.isAlertShow=!0,setTimeout(()=>{f.isAlertShow=!1,f.alertMessage=""},2e3))},_=c=>{g("update:isEditOpen",c)},I=y(null),E=y(!1),R=c=>{clearTimeout(I.value),I.value=setTimeout(()=>{E.value=!0,D.fetchProducts({search:c.target.value}).then(l=>{var O,k;v.value=((k=(O=l.data)==null?void 0:O.data)==null?void 0:k.data)||[]}).finally(()=>{E.value=!1})},800)};return de(()=>{w.fetchCategories().then(c=>{n.value=c.data.data}),A.fetchCities().then(c=>{$.value=c.data.data}),a.id=r.banner.id,a.title=r.banner.title,a.title_color=r.banner.title_color,a.sub_title=r.banner.sub_title,a.sub_title_color=r.banner.sub_title_color,a.button_text=r.banner.button_text,a.button_text_color=r.banner.button_text_color,a.redirect_url=r.banner.redirect_url,a.is_active=r.banner.is_active,a.type=Number(r.banner.type),a.redirect_mobile_url=r.banner.redirect_mobile_url,a.product_id=r.banner.product_id,a.category_ids=r.banner.categories,a.city_ids=r.banner.cities}),(c,l)=>{const O=ie,k=ce("VListItemContent");return b(),C(re,{width:c.$vuetify.display.smAndDown?"auto":650,"model-value":r.isEditOpen,"onUpdate:modelValue":_},{default:s(()=>[t(O,{onClick:l[0]||(l[0]=d=>_(!1))}),t(Y,{class:"pa-sm-9 pa-5"},{default:s(()=>[t(se,null,{default:s(()=>[t(ee,{class:"text-h5 d-flex flex-column align-center gap-2 text-center mb-3"},{default:s(()=>[t(B,{icon:"game-icons:vertical-banner",size:"24",color:"primary"}),p("span",Oe,V(e(u)("Edit_Item")),1)]),_:1})]),_:1}),t(W,null,{default:s(()=>[t(ne,{ref_key:"refForm",ref:P,onSubmit:ae(x,["prevent"])},{default:s(()=>[t(oe,null,{default:s(()=>[t(h,{cols:"12"},{default:s(()=>[p("div",Ae,[p("img",{src:r.banner.url,alt:"",class:"banner-logo"},null,8,$e)])]),_:1}),t(h,{cols:"12",md:"6"},{default:s(()=>[t(Q,{modelValue:e(a).title,"onUpdate:modelValue":l[1]||(l[1]=d=>e(a).title=d),label:e(u)("forms.title"),rules:[e(U)]},null,8,["modelValue","label","rules"])]),_:1}),t(h,{cols:"12",md:"6"},{default:s(()=>[t(L,{modelValue:e(a).type,"onUpdate:modelValue":l[2]||(l[2]=d=>e(a).type=d),label:e(u)("forms.type"),items:e(q),"item-title":"name","item-value":"id",rules:[e(U)]},null,8,["modelValue","label","items","rules"])]),_:1}),e(a).type==1?(b(),C(h,{key:0,cols:"12",md:"6"},{default:s(()=>[t(Q,{modelValue:e(a).redirect_url,"onUpdate:modelValue":l[3]||(l[3]=d=>e(a).redirect_url=d),label:e(u)("forms.redirect_url"),rules:[e(U)]},null,8,["modelValue","label","rules"])]),_:1})):z("",!0),t(h,{cols:"12",md:"6"},{default:s(()=>[t(L,{modelValue:e(a).is_active,"onUpdate:modelValue":l[4]||(l[4]=d=>e(a).is_active=d),label:e(u)("forms.status"),items:e(Z),"item-title":"name","item-value":"id",rules:[e(U)]},null,8,["modelValue","label","items","rules"])]),_:1}),t(h,{cols:"12",md:"6"},{default:s(()=>[t(fe,{modelValue:e(a).image,"onUpdate:modelValue":l[5]||(l[5]=d=>e(a).image=d),label:e(u)("forms.image"),accept:"image/*","prepend-icon":"","prepend-inner-icon":"mdi-image"},null,8,["modelValue","label"])]),_:1}),e(a).type==2?(b(),C(h,{key:1,cols:"12",md:"6"},{default:s(()=>[t(L,{modelValue:e(a).product_id,"onUpdate:modelValue":l[6]||(l[6]=d=>e(a).product_id=d),items:e(v),label:e(u)("Products"),"item-title":"name_ar","item-value":"id",loading:e(E),rules:[e(U)]},{"prepend-item":s(()=>[t(be,null,{default:s(()=>[t(k,null,{default:s(()=>[t(Q,{placeholder:"\u0627\u0644\u0628\u062D\u062B \u0641\u064A \u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A",onInput:R})]),_:1})]),_:1}),t(K,{class:"mt-2"})]),_:1},8,["modelValue","items","label","loading","rules"])]),_:1})):z("",!0),t(h,{cols:"12",md:"6"},{default:s(()=>[t(L,{modelValue:e(a).category_ids,"onUpdate:modelValue":l[7]||(l[7]=d=>e(a).category_ids=d),items:e(n).value,label:e(u)("forms.categories"),"item-title":"type_ar","item-value":"id",multiple:"",rules:[e(U)]},null,8,["modelValue","items","label","rules"])]),_:1}),t(h,{cols:"12",md:"6"},{default:s(()=>[t(L,{modelValue:e(a).city_ids,"onUpdate:modelValue":l[8]||(l[8]=d=>e(a).city_ids=d),label:e(u)("forms.cities"),items:e($).value,"item-title":"name_ar","item-value":"id",multiple:"",rules:[e(U)]},null,8,["modelValue","label","items","rules"])]),_:1}),t(h,{cols:"12",class:"text-center"},{default:s(()=>[e(S)?(b(),C(T,{key:1,type:"submit",class:"position-relative me-3"},{default:s(()=>[t(B,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(b(),C(T,{key:0,type:"submit",class:"me-3"},{default:s(()=>[j(V(e(u)("buttons.save")),1)]),_:1})),t(T,{variant:"tonal",color:"secondary",onClick:G},{default:s(()=>[j(V(e(u)("buttons.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},Te={class:"mx-1 my-1"},Le={__name:"AddBannerDialog",props:{isAddOpen:{type:Boolean,required:!0}},emits:["update:isAddOpen","refreshTable"],setup(o,{emit:i}){const r=o,g=i,m=y(null),D=te(),w=_e(),A=me(),f=pe(),u=le(),a=y(!1),{t:v}=X(),n=M({title:null,title_color:null,sub_title:null,sub_title_color:null,button_text:null,button_text_color:null,redirect_url:null,is_active:null,type:null,image:{},redirect_mobile_url:null,product_id:null,category_ids:[],city_ids:[]}),$=y([]),S=M([]),q=M([]);y();const Z=M([{id:0,name:"\u0628\u0646\u0631 \u0639\u0627\u062F\u064A"},{id:1,name:"\u0631\u0627\u0628\u0637 \u0628\u0646\u0631 \u062E\u0627\u0631\u062C\u064A"},{id:2,name:"\u0631\u0627\u0628\u0637 \u0628\u0646\u0631 \u062F\u0627\u062E\u0644\u064A"}]),G=M([{id:0,name:"\u063A\u064A\u0631 \u0646\u0634\u0637"},{id:1,name:"\u0646\u0634\u0637"}]),P=()=>{n.title=null,n.title_color=null,n.sub_title=null,n.sub_title_color=null,n.button_text=null,n.button_text_color=null,n.redirect_url=null,n.is_active=null,n.type=null,n.image={},n.redirect_mobile_url=null,n.product_id=null,n.category_ids=[],n.city_ids=[],g("update:isAddOpen",!1)},x=y(null),_=y(!1),I=c=>{clearTimeout(x.value),x.value=setTimeout(()=>{_.value=!0,w.fetchProducts({search:c.target.value}).then(l=>{var O,k;$.value=((k=(O=l.data)==null?void 0:O.data)==null?void 0:k.data)||[]}).finally(()=>{_.value=!1})},800)},E=async()=>{a.value=!0,(await m.value.validate()).valid?D.storeBanner(n).then(l=>{g("refreshTable"),g("update:isAddOpen",!1),u.alertColor="success",u.alertMessage="\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0646\u0635\u0631 \u0628\u0646\u062C\u0627\u062D",u.isAlertShow=!0,a.value=!1,setTimeout(()=>{u.isAlertShow=!1,u.alertMessage=""},2e3),P()}).catch(l=>{l.response.data.errors?Object.keys(l.response.data.errors).forEach(k=>{u.alertMessage=v(`errors.${k}`)}):u.alertMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 !",a.value=!1,u.alertColor="error",u.isAlertShow=!0,setTimeout(()=>{u.isAlertShow=!1,u.alertMessage=""},2e3)}):(a.value=!1,u.alertMessage="\u064A\u0631\u062C\u064A \u062A\u0639\u0628\u0626\u0629 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 !",u.alertColor="error",u.isAlertShow=!0,setTimeout(()=>{u.isAlertShow=!1,u.alertMessage=""},2e3))},R=c=>{g("update:isAddOpen",c)};return de(()=>{A.fetchCategories().then(c=>{S.value=c.data.data}),f.fetchCities().then(c=>{q.value=c.data.data})}),(c,l)=>{const O=ie,k=ce("VListItemContent");return b(),C(re,{width:c.$vuetify.display.smAndDown?"auto":650,"model-value":r.isAddOpen,"onUpdate:modelValue":R},{default:s(()=>[t(O,{onClick:l[0]||(l[0]=d=>R(!1))}),t(Y,{class:"pa-sm-9 pa-5"},{default:s(()=>[t(se,null,{default:s(()=>[t(ee,{class:"text-h5 d-flex flex-column align-center gap-2 text-center mb-3"},{default:s(()=>[t(B,{icon:"game-icons:vertical-banner",size:"24",color:"primary"}),p("span",Te,V(e(v)("Add_Banner")),1)]),_:1})]),_:1}),t(W,null,{default:s(()=>[t(ne,{ref_key:"refForm",ref:m,onSubmit:ae(E,["prevent"])},{default:s(()=>[t(oe,null,{default:s(()=>[t(h,{cols:"12",md:"6"},{default:s(()=>[t(Q,{modelValue:e(n).title,"onUpdate:modelValue":l[1]||(l[1]=d=>e(n).title=d),label:e(v)("forms.title")},null,8,["modelValue","label"])]),_:1}),t(h,{cols:"12",md:"6"},{default:s(()=>[t(L,{modelValue:e(n).type,"onUpdate:modelValue":l[2]||(l[2]=d=>e(n).type=d),label:e(v)("forms.type"),items:e(Z),"item-title":"name","item-value":"id",rules:[e(U)]},null,8,["modelValue","label","items","rules"])]),_:1}),e(n).type==1?(b(),C(h,{key:0,cols:"12",md:"6"},{default:s(()=>[t(Q,{modelValue:e(n).redirect_url,"onUpdate:modelValue":l[3]||(l[3]=d=>e(n).redirect_url=d),label:e(v)("forms.redirect_url"),rules:[e(U)]},null,8,["modelValue","label","rules"])]),_:1})):z("",!0),t(h,{cols:"12",md:"6"},{default:s(()=>[t(L,{modelValue:e(n).is_active,"onUpdate:modelValue":l[4]||(l[4]=d=>e(n).is_active=d),label:e(v)("forms.status"),items:e(G),"item-title":"name","item-value":"id"},null,8,["modelValue","label","items"])]),_:1}),t(h,{cols:"12",md:"6"},{default:s(()=>[t(fe,{modelValue:e(n).image,"onUpdate:modelValue":l[5]||(l[5]=d=>e(n).image=d),label:e(v)("forms.image"),accept:"image/*","prepend-icon":"","prepend-inner-icon":"mdi-image"},null,8,["modelValue","label"])]),_:1}),e(n).type==2?(b(),C(h,{key:1,cols:"12",md:"6"},{default:s(()=>[t(L,{modelValue:e(n).product_id,"onUpdate:modelValue":l[6]||(l[6]=d=>e(n).product_id=d),items:e($),label:e(v)("Products"),"item-title":"name_ar","item-value":"id",loading:e(_),rules:[e(U)]},{"prepend-item":s(()=>[t(be,null,{default:s(()=>[t(k,null,{default:s(()=>[t(Q,{placeholder:"\u0627\u0644\u0628\u062D\u062B \u0641\u064A \u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A",onInput:I})]),_:1})]),_:1}),t(K,{class:"mt-2"})]),_:1},8,["modelValue","items","label","loading","rules"])]),_:1})):z("",!0),t(h,{cols:"12",md:"6"},{default:s(()=>[t(L,{modelValue:e(n).category_ids,"onUpdate:modelValue":l[7]||(l[7]=d=>e(n).category_ids=d),items:e(S).value,label:e(v)("forms.categories"),"item-title":"type_ar","item-value":"id",multiple:"",rules:[e(U)]},null,8,["modelValue","items","label","rules"])]),_:1}),t(h,{cols:"12",md:"6"},{default:s(()=>[t(L,{modelValue:e(n).city_ids,"onUpdate:modelValue":l[8]||(l[8]=d=>e(n).city_ids=d),label:e(v)("forms.cities"),items:e(q).value,"item-title":"name_ar","item-value":"id",multiple:"",rules:[e(U)]},null,8,["modelValue","label","items","rules"])]),_:1}),t(h,{cols:"12",class:"text-center"},{default:s(()=>[e(a)?(b(),C(T,{key:1,type:"submit",class:"position-relative me-3"},{default:s(()=>[t(B,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(b(),C(T,{key:0,type:"submit",class:"me-3"},{default:s(()=>[j(V(e(v)("buttons.save")),1)]),_:1})),t(T,{variant:"tonal",color:"secondary",onClick:P},{default:s(()=>[j(V(e(v)("buttons.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},Me={class:"mx-1"},Ee={style:{width:"5rem"}},Fe={scope:"col",class:"font-weight-semibold"},Ie={scope:"col",class:"font-weight-semibold"},Pe={scope:"col",class:"font-weight-semibold"},ze={scope:"col",class:"font-weight-semibold"},je={scope:"col",class:"font-weight-semibold"},qe={scope:"col",class:"font-weight-semibold"},Re={class:"ms-2"},Ne={key:0,class:"mx-1"},Qe=p("span",null," \u0639\u0627\u062F\u064A ",-1),Ze={key:1,class:"mx-1"},Ge=p("span",null," \u062E\u0627\u0631\u062C\u064A ",-1),He={key:2,class:"mx-1"},Je=p("span",null," \u062F\u0627\u062E\u0644\u064A ",-1),Ke=["src"],We={style:{width:"7.5rem"}},Xe=p("tr",null,[p("td",{colspan:"8",class:"text-center text-body-1"}," \u0644\u0627 \u064A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A ")],-1),Ye=[Xe],et={class:"text-sm text-disabled"},tt="https://turki.almaraacompany.com/admin",kt={__name:"banners",setup(o){const{t:i}=X(),r=te(),g=y("");y();const m=y(5),D=y(1),w=y(1),A=y(0),f=y([]),u=y({}),a=y([]),v=y(!1);y(!1);const n=y(!1),$=y(!1),S=()=>{r.fetchBanners({q:g.value}).then(x=>{f.value=x.data.data,A.value=x.data.data.length,D.value=1}).catch(x=>{console.log(x)})};ye(()=>{S()}),Ve(()=>{m.value&&(D.value=1)});const q=ue(()=>(w.value=Math.ceil(f.value.length/m.value),f.value.filter((x,_)=>{let I=(D.value-1)*m.value,E=D.value*m.value;if(_>=I&&_<E)return!0}))),Z=ue(()=>{const x=f.value.length?(D.value-1)*m.value+1:0,_=x+(m.value-1)<=f.value.length?x+(m.value-1):A.value;return` \u0639\u0631\u0636 \u0645\u0646 ${x} \u0625\u0644\u064A ${_} \u0645\u0646 ${A.value} \u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A `}),G=x=>{$.value=!0,u.value=x},P=x=>{n.value=!0,u.value=x};return(x,_)=>{const I=Le,E=Ue,R=Be,c=he("can");return b(),F("div",null,[t(Y,null,{default:s(()=>[t(ee,{class:"d-flex align-center"},{default:s(()=>[t(B,{icon:"game-icons:vertical-banner",size:"24",color:"primary"}),p("span",Me,V(e(i)("Banners")),1)]),_:1}),t(W,{class:"d-flex align-center flex-wrap gap-2 py-4"},{default:s(()=>[p("div",Ee,[t(L,{modelValue:e(m),"onUpdate:modelValue":_[0]||(_[0]=l=>J(m)?m.value=l:null),variant:"outlined",items:[5,10,20,30,50]},null,8,["modelValue"])]),N((b(),C(T,{"prepend-icon":"tabler-plus",onClick:_[1]||(_[1]=l=>v.value=!0)},{default:s(()=>[j(V(e(i)("Add_Banner")),1)]),_:1})),[[c,"create-banner"]]),t(De)]),_:1}),t(K),t(K),t(xe,{class:"text-no-wrap banner-list-table"},{default:s(()=>[p("thead",null,[p("tr",null,[p("th",Fe,V(e(i)("forms.id")),1),p("th",Ie,V(e(i)("forms.title")),1),p("th",Pe,V(e(i)("forms.status")),1),p("th",ze,V(e(i)("forms.type")),1),p("th",je,V(e(i)("forms.image")),1),N((b(),F("th",qe,[p("span",Re,V(e(i)("forms.actions")),1)])),[[c,"read-banner"]])])]),p("tbody",null,[(b(!0),F(we,null,Ce(e(q),(l,O)=>{var k;return b(),F("tr",{key:l.id},[p("td",null," #"+V(++O),1),p("td",null,V(l.title),1),p("td",null,[t(B,{icon:"ph:dot-bold",color:l.is_active==!0?"#008000":"#f00000",size:"32"},null,8,["color"]),p("span",null,V(l.is_active==!0?e(i)("forms.statuses.active"):e(i)("forms.statuses.inactive")),1)]),p("td",null,[l.type==0?(b(),F("span",Ne,[t(B,{icon:"material-symbols-light:link"}),Qe])):z("",!0),l.type==1?(b(),F("span",Ze,[t(B,{icon:"gg:external"}),Ge])):z("",!0),l.type==2?(b(),F("span",He,[t(B,{icon:"gg:internal"}),Je])):z("",!0)]),p("td",null,[l.image?(b(),F("img",{key:0,src:(k=l.url)!=null?k:tt+"/storage/"+l.image,alt:"\u0628\u0646\u0631",width:"50"},null,8,Ke)):(b(),C(B,{key:1,icon:"iconoir:n-square",size:"32"}))]),N((b(),F("td",We,[N((b(),C(T,{icon:"",variant:"plain",color:"default",size:"x-small",onClick:d=>P(l)},{default:s(()=>[t(B,{size:22,icon:"tabler-pencil"})]),_:2},1032,["onClick"])),[[c,"update-banner"]]),N((b(),C(T,{icon:"",variant:"plain",color:"default",size:"x-small",onClick:d=>G(l)},{default:s(()=>[t(B,{size:22,icon:"tabler-trash"})]),_:2},1032,["onClick"])),[[c,"delete-banner"]])])),[[c,"update-banner"]])])}),128))]),N(p("tfoot",null,Ye,512),[[ke,!e(f).length]])]),_:1}),t(K),t(W,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3"},{default:s(()=>[p("span",et,V(e(Z)),1),t(Se,{modelValue:e(D),"onUpdate:modelValue":_[2]||(_[2]=l=>J(D)?D.value=l:null),size:"small","total-visible":5,length:e(w),onNext:_[3]||(_[3]=l=>a.value=[]),onPrev:_[4]||(_[4]=l=>a.value=[])},null,8,["modelValue","length"])]),_:1})]),_:1}),t(I,{isAddOpen:e(v),"onUpdate:isAddOpen":_[5]||(_[5]=l=>J(v)?v.value=l:null),onRefreshTable:S},null,8,["isAddOpen"]),t(E,{isEditOpen:e(n),"onUpdate:isEditOpen":_[6]||(_[6]=l=>J(n)?n.value=l:null),banner:e(u),onRefreshTable:S},null,8,["isEditOpen","banner"]),t(R,{isDeleteOpen:e($),"onUpdate:isDeleteOpen":_[7]||(_[7]=l=>J($)?$.value=l:null),banner:e(u),onRefreshTable:S},null,8,["isDeleteOpen","banner"])])}}};export{kt as default};
