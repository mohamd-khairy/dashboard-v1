import{k as p,bP as q,aB as L,o as V,b as O,w as a,p as t,bQ as R,bR as H,bS as j,ak as C,m as n,y as u,q as e,b$ as I,c0 as J,av as K,aw as k,al as S,ap as T,bD as re,c6 as ie,I as Q,A as Z,C as ue,c as B,an as P,bZ as de,F as ce,a as me,ar as pe,as as fe,ag as N}from"./index.e64427d3.js";import{_ as W}from"./DialogCloseBtn.4ef52386.js";import{V as X}from"./VForm.3f978c46.js";import{V as Y}from"./VDialog.b8fd2272.js";import{r as $}from"./validators.dc210ddc.js";import{d as U}from"./VTextField.d0ea55f9.js";import{V as _e}from"./VSwitch.f0cc990b.js";import{_ as ve}from"./AddProductMicedMeatDialog.99705ae6.js";import"./moment.9709ab41.js";import{V as ge}from"./VSelect.3c00ac43.js";import{V as be}from"./VSpacer.dbfcf743.js";import{V as G}from"./VDivider.510e5eac.js";import{V as he}from"./VPagination.85c66a86.js";import"./forwardRefs.74a345f5.js";import"./VOverlay.f99881ed.js";import"./lazy.05b69fdb.js";import"./index.30512b5b.js";import"./VCheckboxBtn.c219e675.js";import"./VList.e1320d57.js";import"./ssrBoot.4a5d3037.js";import"./VMenu.dadd3f9b.js";import"./VChip.0f7134b7.js";const Ve={__name:"DeleteProductMicedMeatDialog",props:{isDeleteOpen:{type:Boolean,required:!0},item:{type:Object,required:!0}},emits:["update:isDeleteOpen","refreshTable"],setup(E,{emit:v}){const g=E,w=v,l=p(!1),{t:r}=q(),s=L(),o=()=>{w("update:isDeleteOpen",!1)},f=()=>{l.value=!0,s.deleteProductMicedMeat(g.item).then(()=>{w("refreshTable"),w("update:isDeleteOpen",!1),s.alertColor="success",s.alertMessage="\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0639\u0646\u0635\u0631 \u0628\u0646\u062C\u0627\u062D",s.isAlertShow=!0,setTimeout(()=>{s.isAlertShow=!1,s.alertMessage="",l.value=!1},1e3)}).catch(b=>{l.value=!1,s.alertColor="error",s.alertMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 !",s.isAlertShow=!0,setTimeout(()=>{s.isAlertShow=!1,s.alertMessage=""},2e3)})},x=b=>{w("update:isDeleteOpen",b)};return(b,D)=>{const h=W;return V(),O(Y,{width:b.$vuetify.display.smAndDown?"auto":650,"model-value":g.isDeleteOpen,"onUpdate:modelValue":x},{default:a(()=>[t(h,{onClick:D[0]||(D[0]=d=>x(!1))}),t(R,{class:"pa-sm-9 pa-5"},{default:a(()=>[t(H,null,{default:a(()=>[t(j,{class:"text-h5 text-center mb-3"},{default:a(()=>[t(C,{icon:"ph:info-light",color:"#f00",size:"50"}),n("h5",null,u(e(r)("ask_delete")),1)]),_:1})]),_:1}),t(I,null,{default:a(()=>[t(X,{ref:"refForm",onSubmit:J(f,["prevent"])},{default:a(()=>[t(K,null,{default:a(()=>[t(k,{cols:"12",class:"text-center"},{default:a(()=>[e(l)?(V(),O(S,{key:1,type:"submit",class:"position-relative me-3"},{default:a(()=>[t(C,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(V(),O(S,{key:0,type:"submit",class:"me-3",color:"primary"},{default:a(()=>[T(u(e(r)("buttons.confirm")),1)]),_:1})),t(S,{variant:"tonal",color:"secondary",onClick:o},{default:a(()=>[T(u(e(r)("buttons.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},we={class:"mx-1 my-1"},ye={__name:"EditProductMicedMeatDialog",props:{isEditOpen:{type:Boolean,required:!0},item:{type:Object,required:!0}},emits:["update:isEditOpen","refreshTable"],setup(E,{emit:v}){const g=E,w=v,l=L(),r=p(!1),{t:s}=q(),o=re({name_en:null,name_ar:null,price:null,weight:null,is_active:!1}),f=p(null),x=()=>{w("update:isEditOpen",!1)};ie(()=>{o.id=g.item.id,o.name_en=g.item.name_en,o.name_ar=g.item.name_ar,o.price=g.item.price,o.weight=g.item.weight,o.is_active=g.item.is_active==1});const b=async()=>{if(r.value=!0,(await f.value.validate()).valid){const d={...o};l.editProductMicedMeat(d).then(y=>{w("refreshTable"),w("update:isEditOpen",!1),l.alertColor="success",l.alertMessage="\u062A\u0645 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0639\u0646\u0635\u0631 \u0628\u0646\u062C\u0627\u062D",l.isAlertShow=!0,setTimeout(()=>{l.isAlertShow=!1,l.alertMessage="",r.value=!1},1e3)}).catch(y=>{y.response.data.errors?Object.keys(y.response.data.errors).forEach(F=>{l.alertMessage=s(`errors.${F}`)}):l.alertMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 !",r.value=!1,l.alertColor="error",l.isAlertShow=!0,setTimeout(()=>{l.isAlertShow=!1,l.alertMessage=""},2e3)})}else r.value=!1,l.alertMessage="\u064A\u0631\u062C\u064A \u062A\u0639\u0628\u0626\u0629 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 !",l.alertColor="error",l.isAlertShow=!0,setTimeout(()=>{l.isAlertShow=!1,l.alertMessage=""},2e3)},D=h=>{w("update:isEditOpen",h)};return(h,d)=>{const y=W;return V(),O(Y,{width:h.$vuetify.display.smAndDown?"auto":650,"model-value":g.isEditOpen,"onUpdate:modelValue":D},{default:a(()=>[t(y,{onClick:d[0]||(d[0]=_=>D(!1))}),t(R,{class:"pa-sm-9 pa-5"},{default:a(()=>[t(H,null,{default:a(()=>[t(j,{class:"text-h5 d-flex flex-column align-center gap-2 text-center mb-3"},{default:a(()=>[t(C,{icon:"game-icons:weight-scale",size:"24",color:"primary"}),n("span",we,u(e(s)("Edit_Item")),1)]),_:1})]),_:1}),t(I,null,{default:a(()=>[t(X,{ref_key:"refForm",ref:f,onSubmit:J(b,["prevent"])},{default:a(()=>[t(K,null,{default:a(()=>[t(k,{cols:"12",md:"6"},{default:a(()=>[t(U,{modelValue:e(o).name_ar,"onUpdate:modelValue":d[1]||(d[1]=_=>e(o).name_ar=_),label:e(s)("forms.name_ar"),rules:[e($)]},null,8,["modelValue","label","rules"])]),_:1}),t(k,{cols:"12",md:"6"},{default:a(()=>[t(U,{modelValue:e(o).name_en,"onUpdate:modelValue":d[2]||(d[2]=_=>e(o).name_en=_),label:e(s)("forms.name_en"),rules:[e($)]},null,8,["modelValue","label","rules"])]),_:1}),t(k,{cols:"12",md:"6"},{default:a(()=>[t(U,{modelValue:e(o).price,"onUpdate:modelValue":d[3]||(d[3]=_=>e(o).price=_),label:e(s)("forms.price"),rules:[e($)],type:"number"},null,8,["modelValue","label","rules"])]),_:1}),t(k,{cols:"12",md:"6"},{default:a(()=>[t(U,{modelValue:e(o).weight,"onUpdate:modelValue":d[4]||(d[4]=_=>e(o).weight=_),label:e(s)("forms.weight"),rules:[e($)]},null,8,["modelValue","label","rules"])]),_:1}),t(k,{cols:"12",md:"6"},{default:a(()=>[t(_e,{modelValue:e(o).is_active,"onUpdate:modelValue":d[5]||(d[5]=_=>e(o).is_active=_),label:e(s)("forms.is_active")},null,8,["modelValue","label"])]),_:1}),t(k,{cols:"12",class:"pt-4 text-center"},{default:a(()=>[e(r)?(V(),O(S,{key:1,type:"submit",class:"position-relative me-3"},{default:a(()=>[t(C,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(V(),O(S,{key:0,type:"submit",class:"me-3"},{default:a(()=>[T(u(e(s)("buttons.save")),1)]),_:1})),t(S,{variant:"tonal",color:"secondary",onClick:x},{default:a(()=>[T(u(e(s)("buttons.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},Me={class:"mx-1"},xe={style:{width:"5rem"}},De={scope:"col",class:"font-weight-semibold"},Oe={scope:"col",class:"font-weight-semibold"},Se={scope:"col",class:"font-weight-semibold"},ke={scope:"col",class:"font-weight-semibold"},Ce={scope:"col",class:"font-weight-semibold"},Ae={scope:"col",class:"font-weight-semibold"},Pe=n("tr",null,[n("td",{colspan:"8",class:"text-center text-body-1"}," \u0644\u0627 \u064A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A ")],-1),Te=[Pe],Ee={class:"text-sm text-disabled"},lt={__name:"product-miced-meat",setup(E){const{t:v}=q(),g=L(),w=p("");p();const l=p(5),r=p(1),s=p(1),o=p(0),f=p([]);p([]);const x=p(!1),b=p(!1),D=p({}),h=p(!1),d=p(!1),y=()=>{d.value=!0,g.fetchProductMicedMeat({q:w.value}).then(c=>{f.value=c.data.data,s.value=f.value/l,o.value=f.value.length,r.value=1}).catch(c=>{console.log(c)}).finally(()=>{d.value=!1})};Q(()=>{y()}),Q(()=>{l.value&&(r.value=1)});const _=Z(()=>(s.value=Math.ceil(f.value.length/l.value),f.value.filter((c,i)=>{let M=(r.value-1)*l.value,z=r.value*l.value;if(i>=M&&i<z)return!0}))),F=()=>{r.value*l.value<f.value.length&&r.value},ee=()=>{r.value>1&&r.value},te=Z(()=>{const c=f.value.length?(r.value-1)*l.value+1:0,i=c+(l.value-1)<=f.value.length?c+(l.value-1):o.value;return` \u0639\u0631\u0636 \u0645\u0646 ${A(c)} \u0625\u0644\u064A ${A(i)} \u0645\u0646 ${A(o.value)} \u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A `}),le=c=>{b.value=!0,D.value=c},ae=c=>{var i;h.value=!0,c.stores=(i=c==null?void 0:c.stores)==null?void 0:i.map(M=>(M.name=M.store.name,M.product_name=M.stock.product_name,M)),D.value=c},A=c=>{const i="\u0660\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669";return String(c).replace(/[0123456789]/g,M=>i[M])};return ue(()=>{y()}),(c,i)=>{const M=ve,z=ye,se=Ve;return V(),B("div",null,[t(R,{loading:e(d)},{default:a(()=>[t(j,{class:"d-flex align-center"},{default:a(()=>[t(C,{icon:"game-icons:weight-scale",size:"24",color:"primary"}),n("span",Me,u(e(v)("Product_Size")),1)]),_:1}),t(I,{class:"d-flex align-center flex-wrap gap-2 py-4"},{default:a(()=>[n("div",xe,[t(ge,{modelValue:e(l),"onUpdate:modelValue":i[0]||(i[0]=m=>P(l)?l.value=m:null),variant:"outlined",items:[5,10,20,30,50]},null,8,["modelValue"])]),t(S,{"prepend-icon":"tabler-plus",onClick:i[1]||(i[1]=m=>x.value=!0)},{default:a(()=>[T(u(e(v)("Add_Item")),1)]),_:1}),t(be)]),_:1}),t(G),t(de,{class:"text-no-wrap product-list-table"},{default:a(()=>[n("thead",null,[n("tr",null,[n("th",De,u(e(v)("forms.id")),1),n("th",Oe,u(e(v)("forms.name")),1),n("th",Se,u(e(v)("forms.price")),1),n("th",ke,u(e(v)("forms.weight")),1),n("th",Ce,u(e(v)("forms.is_active")),1),n("th",Ae,u(e(v)("forms.actions")),1)])]),n("tbody",null,[(V(!0),B(ce,null,me(e(_),(m,oe)=>(V(),B("tr",{key:m.id},[n("td",null," #"+u(A(++oe)),1),n("td",null,u(m.name_ar),1),n("td",null,u(A(Intl.NumberFormat().format(m.price))),1),n("td",null,u(A(m.weight)),1),n("td",null,u(m.is_active?"\u0646\u0634\u0637":"\u063A\u064A\u0631 \u0646\u0634\u0637"),1),n("td",null,[t(S,{icon:"",variant:"plain",color:"default",size:"x-small",onClick:ne=>ae(m)},{default:a(()=>[t(C,{size:22,icon:"tabler-pencil"})]),_:2},1032,["onClick"]),t(S,{icon:"",variant:"plain",color:"default",size:"x-small",onClick:ne=>le(m)},{default:a(()=>[t(C,{size:22,icon:"tabler-trash"})]),_:2},1032,["onClick"])])]))),128))]),pe(n("tfoot",null,Te,512),[[fe,!e(f).length]])]),_:1}),t(G),t(I,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3"},{default:a(()=>[n("span",Ee,u(e(te)),1),t(he,{modelValue:e(r),"onUpdate:modelValue":i[2]||(i[2]=m=>P(r)?r.value=m:null),size:"small","total-visible":e(l),length:e(s),onNext:F,onPrev:ee},null,8,["modelValue","total-visible","length"])]),_:1})]),_:1},8,["loading"]),e(x)?(V(),O(M,{key:0,isAddOpen:e(x),"onUpdate:isAddOpen":i[3]||(i[3]=m=>P(x)?x.value=m:null),onRefreshTable:y},null,8,["isAddOpen"])):N("",!0),e(h)?(V(),O(z,{key:1,isEditOpen:e(h),"onUpdate:isEditOpen":i[4]||(i[4]=m=>P(h)?h.value=m:null),item:e(D),onRefreshTable:y},null,8,["isEditOpen","item"])):N("",!0),e(b)?(V(),O(se,{key:2,isDeleteOpen:e(b),"onUpdate:isDeleteOpen":i[5]||(i[5]=m=>P(b)?b.value=m:null),item:e(D),onRefreshTable:y},null,8,["isDeleteOpen","item"])):N("",!0)])}}};export{lt as default};
