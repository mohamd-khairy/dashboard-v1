import{b_ as Ie,bU as le,aB as ue,k as c,bP as oe,bD as re,C as ce,o as p,b as y,w as t,p as e,bQ as ae,bR as me,bS as ie,ak as k,b$ as se,c0 as Y,m as n,q as l,an as X,av as W,aw as m,y as x,al as V,ap as L,c as J,F as ve,a as ye,ag as te,a8 as we,I as Ee,A as qe,D as xe,bZ as je,s as Be,ar as Le,as as Re}from"./index.e195cd26.js";import{_ as pe}from"./DialogCloseBtn.a5443f2c.js";import{u as Ne}from"./Banks.ec645490.js";import{u as Qe}from"./Safes.5753ffdb.js";import{r as A}from"./validators.dc210ddc.js";import{V as ne}from"./VForm.bf1fdf96.js";import{V as ge}from"./VSwitch.2364144e.js";import{V as Ce}from"./VChip.37b1ef7f.js";import{V as Z}from"./VSelect.d3114f6b.js";import{V as fe}from"./VDialog.4d61232b.js";import{_ as Ue}from"./AutoCompleteDropdown.399fccbb.js";import{u as be}from"./Cities.5a000363.js";import{u as Ve}from"./Employees.44d1dea6.js";import{u as Ae}from"./Products.8f4807a4.js";import{u as $e}from"./Stocks.1ea6d577.js";import{u as De}from"./Stores.c71e12d1.js";import{u as Me}from"./Suppliers.3b5560c1.js";import{d as K}from"./VTextField.0ba2900d.js";import{V as Oe}from"./VTextarea.3e3c834d.js";import{V as Ze}from"./VFileInput.892a0b51.js";import{V as ze}from"./VTooltip.35f7c14d.js";import"./moment.361b1408.js";import{V as Ge}from"./VSpacer.b4f17f1c.js";import{V as ke}from"./VDivider.638f8eff.js";import{V as He}from"./VPagination.744b7e53.js";import"./forwardRefs.74a345f5.js";import"./index.4f7ac4e6.js";import"./VCheckboxBtn.720fbc0c.js";import"./VList.9d440da5.js";import"./ssrBoot.d7cd1016.js";import"./VOverlay.e3c69687.js";import"./lazy.3c63b833.js";import"./VMenu.62aeda27.js";const de=Ie("InvoicesStore",{actions:{getAll(h){return le.get("invoices",{params:h})},getOne(h){return le.get(`invoices/${h}`)},store(h){return le.post("invoices",h)},update(h){return le.put(`invoices/${h.id}`,h)},pay(h){return le.post("pay-invoice",h)},delete(h){return le.delete(`invoices/${h.id}`)}}}),Je=n("span",{class:"mx-1 my-1"}," \u062F\u0641\u0639 \u0627\u0644\u0641\u0627\u062A\u0648\u0631\u0629 ",-1),Ke={class:"d-flex align-center gap-6 mb-8"},We=n("h4",null,"\u0627\u0644\u062F\u0641\u0639 \u0639\u0646 \u0637\u0631\u064A\u0642:",-1),Xe={class:"d-flex justify-center align-center gap-4"},Ye=n("span",null,"\u0627\u0644\u0628\u0646\u0643",-1),el=n("span",null,"\u0627\u0644\u062E\u0632\u0646\u0629",-1),ll={class:"d-flex align-center gap-4"},tl=n("h4",null,"\u0633\u0639\u0631 \u0627\u0644\u0641\u0627\u062A\u0648\u0631\u0629",-1),al={__name:"PayInvoiceDialog",props:{isPayOpen:{type:Boolean,required:!0},item:{type:Object,default:()=>({}),required:!0}},emits:["update:isPayOpen","refreshTable"],setup(h,{emit:H}){const w=h,C=H,a=ue(),R=Qe(),E=Ne(),S=de(),N=c([]),Q=c([]),B=c(null),{t:D}=oe(),$=re({invoice_id:w.item.id,bank_id:null,money_safe_id:null}),F=c(1),M=c(!1),O=()=>{C("update:isPayOpen",!1)},o=b=>{C("update:isPayOpen",b)},U=async()=>{M.value=!0,(await B.value.validate()).valid?S.pay($).then(g=>{C("refreshTable"),C("update:isPayOpen",!1),a.alertColor="success",a.alertMessage="\u062A\u0645 \u062F\u0641\u0639 \u0627\u0644\u0641\u0627\u062A\u0648\u0631\u0629 \u0628\u0646\u062C\u0627\u062D",a.isAlertShow=!0,setTimeout(()=>{a.isAlertShow=!1,a.alertMessage=""},2e3)}).catch(g=>{g.response.data.errors?Object.keys(g.response.data.errors).forEach(I=>{a.alertMessage=D(`errors.${I}`)}):a.alertMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 !",a.alertColor="error",a.isAlertShow=!0,setTimeout(()=>{a.isAlertShow=!1,a.alertMessage=""},2e3)}).finally(()=>{M.value=!1}):(M.value=!1,a.alertMessage="\u064A\u0631\u062C\u064A \u062A\u0639\u0628\u0626\u0629 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 !",a.alertColor="error",a.isAlertShow=!0,setTimeout(()=>{a.isAlertShow=!1,a.alertMessage=""},2e3))},z=async()=>{R.getAll({pageSize:-1}).then(b=>{var g;N.value=(g=b.data.data)==null?void 0:g.data}),E.getAll({pageSize:-1}).then(b=>{var g;Q.value=(g=b.data.data)==null?void 0:g.data})};return ce(()=>{z()}),(b,g)=>{const G=pe;return p(),y(fe,{width:b.$vuetify.display.smAndDown?"auto":650,"model-value":w.isPayOpen,"onUpdate:modelValue":o},{default:t(()=>[e(G,{onClick:g[0]||(g[0]=I=>o(!1))}),e(ae,{class:"pa-sm-9 pa-5"},{default:t(()=>[e(me,null,{default:t(()=>[e(ie,{class:"text-h5 d-flex flex-column align-center gap-2 text-center mb-3"},{default:t(()=>[e(k,{icon:"uil:invoice",size:"24",color:"primary"}),Je]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ne,{ref_key:"refForm",ref:B,onSubmit:Y(U,["prevent"])},{default:t(()=>[n("div",Ke,[We,n("div",Xe,[Ye,e(ge,{modelValue:l(F),"onUpdate:modelValue":g[1]||(g[1]=I=>X(F)?F.value=I:null),label:"","true-value":1,"false-value":0,inline:"","prepend-icon":"mdi-bank-outline","append-icon":"teenyicons-safe-outline"},null,8,["modelValue"]),el])]),e(W,null,{default:t(()=>[e(m,{cols:"12",class:"d-flex justify-space-between align-center gap-4"},{default:t(()=>[n("div",ll,[tl,e(Ce,null,{default:t(()=>[n("h4",null,x(h.item.invoice_price),1)]),_:1})]),n("h4",null,x(h.item.date),1)]),_:1}),e(m,{cols:"12"},{default:t(()=>[l(F)==1?(p(),y(Z,{key:0,modelValue:l($).bank_id,"onUpdate:modelValue":g[2]||(g[2]=I=>l($).bank_id=I),items:l(Q),label:"\u0627\u0644\u0628\u0646\u0643","item-title":"name","item-value":"id",rules:[l(A)]},null,8,["modelValue","items","rules"])):(p(),y(Z,{key:1,modelValue:l($).money_safe_id,"onUpdate:modelValue":g[3]||(g[3]=I=>l($).money_safe_id=I),items:l(N),label:"\u0627\u0644\u062E\u0632\u0646\u0629","item-title":"name","item-value":"id",rules:[l(A)]},null,8,["modelValue","items","rules"]))]),_:1}),e(m,{cols:"12",class:"pt-6 text-center"},{default:t(()=>[l(M)?(p(),y(V,{key:1,type:"submit",class:"position-relative me-3 px-8"},{default:t(()=>[e(k,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(p(),y(V,{key:0,type:"submit",class:"me-3 px-8"},{default:t(()=>[L(x(l(D)("buttons.save")),1)]),_:1})),e(V,{variant:"tonal",color:"secondary",onClick:O,class:"px-8"},{default:t(()=>[L(x(l(D)("buttons.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},sl={__name:"DeleteInvoiceDialog",props:{isDeleteOpen:{type:Boolean,required:!0},item:{type:Object,required:!0}},emits:["update:isDeleteOpen","refreshTable"],setup(h,{emit:H}){const w=h,C=H,a=c(!1),{t:R}=oe(),E=de(),S=ue(),N=()=>{C("update:isDeleteOpen",!1)},Q=()=>{a.value=!0,E.delete(w.item).then(()=>{C("refreshTable"),C("update:isDeleteOpen",!1),S.alertColor="success",S.alertMessage="\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0645\u0646\u062A\u062C \u0628\u0646\u062C\u0627\u062D",S.isAlertShow=!0,setTimeout(()=>{S.isAlertShow=!1,S.alertMessage="",a.value=!1},1e3)}).catch(D=>{a.value=!1,S.alertColor="error",S.alertMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 !",S.isAlertShow=!0,setTimeout(()=>{S.isAlertShow=!1,S.alertMessage=""},2e3)})},B=D=>{C("update:isDeleteOpen",D)};return(D,$)=>{const F=pe;return p(),y(fe,{width:D.$vuetify.display.smAndDown?"auto":650,"model-value":w.isDeleteOpen,"onUpdate:modelValue":B},{default:t(()=>[e(F,{onClick:$[0]||($[0]=M=>B(!1))}),e(ae,{class:"pa-sm-9 pa-5"},{default:t(()=>[e(me,null,{default:t(()=>[e(ie,{class:"text-h5 text-center mb-3"},{default:t(()=>[e(k,{icon:"ph:info-light",color:"#f00",size:"50"}),n("h5",null,x(l(R)("ask_delete")),1)]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ne,{ref:"refForm",onSubmit:Y(Q,["prevent"])},{default:t(()=>[e(W,null,{default:t(()=>[e(m,{cols:"12",class:"text-center"},{default:t(()=>[l(a)?(p(),y(V,{key:1,type:"submit",class:"position-relative me-3"},{default:t(()=>[e(k,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(p(),y(V,{key:0,type:"submit",class:"me-3",color:"primary"},{default:t(()=>[L(x(l(R)("buttons.confirm")),1)]),_:1})),e(V,{variant:"tonal",color:"secondary",onClick:N},{default:t(()=>[L(x(l(R)("buttons.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},ol=n("span",{class:"mx-1 my-1"}," \u062A\u0639\u062F\u064A\u0644 \u0641\u0627\u062A\u0648\u0631\u0629 ",-1),il={class:"d-flex justify-space-between align-center mb-6"},nl=n("h3",{class:""},"\u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A",-1),dl={__name:"EditInvoiceDialog",props:{isEditOpen:{type:Boolean,required:!0},item:{type:Object,default:()=>({}),required:!0}},emits:["update:isEditOpen","refreshTable"],setup(h,{emit:H}){const w=h,C=H,a=ue(),R=Ve(),E=De();$e();const S=Me(),N=de(),Q=be(),B=Ae(),D=c([]),$=c([]),F=c([]),M=c(null),{t:O}=oe(),o=re({store_id:w.item.store_id,supplier_id:w.item.supplier_id,user_id:w.item.user_id,city_id:w.item.city_id,tax:w.item.tax?1:0,date:w.item.date,invoice_price:w.item.invoice_price,notes:w.item.notes}),U=c(w.item.stocks),z=c(!1),b=()=>{C("update:isEditOpen",!1)},g=T=>{C("update:isEditOpen",T)},G=()=>{U.value.push({product_name:null,product_id:null,quantity:1,price:null})},I=T=>{U.value=U.value.filter((u,i)=>i!=T)},q=async()=>{if(z.value=!0,(await M.value.validate()).valid){let u=0;const i=U.value.map(s=>{u+=parseFloat(s.price);const r={};for(const v in s)Object.hasOwnProperty.call(s,v)&&s[v]&&s[v]!=""&&(r[v]=s[v]);return r}),P={...o,invoice_price:u,id:w.item.id,stocks:i};N.update(P).then(s=>{C("refreshTable"),C("update:isEditOpen",!1),a.alertColor="success",a.alertMessage="\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0646\u0635\u0631 \u0628\u0646\u062C\u0627\u062D",a.isAlertShow=!0,setTimeout(()=>{a.isAlertShow=!1,a.alertMessage=""},2e3)}).catch(s=>{s.response.data.errors?Object.keys(s.response.data.errors).forEach(v=>{a.alertMessage=O(`errors.${v}`)}):a.alertMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 !",a.alertColor="error",a.isAlertShow=!0,setTimeout(()=>{a.isAlertShow=!1,a.alertMessage=""},2e3)}).finally(()=>{z.value=!1})}else z.value=!1,a.alertMessage="\u064A\u0631\u062C\u064A \u062A\u0639\u0628\u0626\u0629 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 !",a.alertColor="error",a.isAlertShow=!0,setTimeout(()=>{a.isAlertShow=!1,a.alertMessage=""},2e3)},j=async()=>{Q.fetchCities({pageSize:-1}).then(T=>{F.value=T.data.data}),R.fetchEmployees({pageSize:-1}).then(T=>{var u;D.value=(u=T.data.data)==null?void 0:u.data}),S.getAll({pageSize:-1}).then(T=>{var u,i;$.value=((i=(u=T.data)==null?void 0:u.data)==null?void 0:i.data)||[]})};return ce(()=>{j()}),(T,u)=>{const i=pe,P=Ue;return p(),y(fe,{width:T.$vuetify.display.smAndDown?"auto":650,"model-value":w.isEditOpen,"onUpdate:modelValue":g},{default:t(()=>[e(i,{onClick:u[0]||(u[0]=s=>g(!1))}),e(ae,{class:"pa-sm-9 pa-5"},{default:t(()=>[e(me,null,{default:t(()=>[e(ie,{class:"text-h5 d-flex flex-column align-center gap-2 text-center mb-3"},{default:t(()=>[e(k,{icon:"uil:invoice",size:"24",color:"primary"}),ol]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ne,{ref_key:"refForm",ref:M,onSubmit:Y(q,["prevent"])},{default:t(()=>[e(W,null,{default:t(()=>[e(m,{cols:"12",md:"6"},{default:t(()=>[e(K,{modelValue:l(o).date,"onUpdate:modelValue":u[1]||(u[1]=s=>l(o).date=s),label:"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0641\u0627\u062A\u0648\u0631\u0629",type:"date",rules:[l(A)]},null,8,["modelValue","rules"])]),_:1}),e(m,{cols:"12",md:"6"},{default:t(()=>[e(K,{modelValue:l(o).invoice_price,"onUpdate:modelValue":u[2]||(u[2]=s=>l(o).invoice_price=s),label:"\u0633\u0639\u0631 \u0627\u0644\u0641\u0627\u062A\u0648\u0631\u0629",type:"number",min:"0",readonly:""},null,8,["modelValue"])]),_:1}),e(m,{cols:"12",md:"6"},{default:t(()=>[e(Z,{modelValue:l(o).city_id,"onUpdate:modelValue":u[3]||(u[3]=s=>l(o).city_id=s),items:l(F),label:"\u0627\u0644\u0645\u062F\u064A\u0646\u0629","item-title":"name_ar","item-value":"id",rules:[l(A)]},null,8,["modelValue","items","rules"])]),_:1}),e(m,{cols:"12",md:"6"},{default:t(()=>[e(Z,{modelValue:l(o).supplier_id,"onUpdate:modelValue":u[4]||(u[4]=s=>l(o).supplier_id=s),items:l($),label:"\u0627\u0644\u0645\u0648\u0631\u062F","item-title":"name","item-value":"id",rules:[l(A)]},null,8,["modelValue","items","rules"])]),_:1}),e(m,{cols:"12",md:"6"},{default:t(()=>[e(Z,{modelValue:l(o).user_id,"onUpdate:modelValue":u[5]||(u[5]=s=>l(o).user_id=s),items:l(D),label:"\u0627\u0644\u0645\u0648\u0638\u0641 \u0627\u0644\u0645\u0633\u0626\u0648\u0644","item-title":"username","item-value":"id",rules:[l(A)]},null,8,["modelValue","items","rules"])]),_:1}),e(m,{cols:"12"},{default:t(()=>[e(ge,{label:"\u0627\u0644\u0636\u0631\u064A\u0628\u0629",modelValue:l(o).tax,"onUpdate:modelValue":u[6]||(u[6]=s=>l(o).tax=s),"true-value":1,"false-value":0},null,8,["modelValue"])]),_:1}),e(m,{cols:"12"},{default:t(()=>[n("div",il,[nl,e(V,{onClick:G,class:"position-relative",icon:"",size:"small"},{default:t(()=>[e(k,{icon:"ei:plus",size:"30"})]),_:1})]),(p(!0),J(ve,null,ye(l(U),(s,r)=>(p(),y(W,{key:r,style:{"background-color":"#fafafa","border-radius":"10px"},class:"mb-6 py-3"},{default:t(()=>[e(m,{cols:"12",md:"6"},{default:t(()=>[e(P,{modelValue:s.store_id,"onUpdate:modelValue":v=>s.store_id=v,valueText:s.name,apiModel:l(E),apiSearchMethod:"getAll","item-title":"name","item-value":"id",label:"\u0627\u0644\u0645\u062E\u0632\u0646",placeholder:"\u0627\u0644\u0628\u062D\u062B \u0641\u064A \u0627\u0644\u0645\u062E\u0632\u0646",rules:[l(A)],style:{"background-color":"#fff"}},null,8,["modelValue","onUpdate:modelValue","valueText","apiModel","rules"])]),_:2},1024),e(m,{cols:"12",md:"6"},{default:t(()=>[e(P,{modelValue:s.product_id,"onUpdate:modelValue":v=>s.product_id=v,valueText:s.name_ar,apiModel:l(B),apiSearchMethod:"fetchProducts","item-title":"name_ar","item-value":"id",label:"\u0627\u0644\u0645\u062E\u0632\u0648\u0646",placeholder:"\u0627\u0644\u0628\u062D\u062B \u0641\u064A \u0627\u0644\u0645\u062E\u0632\u0648\u0646",rules:[l(A)],style:{"background-color":"#fff"}},null,8,["modelValue","onUpdate:modelValue","valueText","apiModel","rules"])]),_:2},1024),e(m,{cols:"10",md:"6"},{default:t(()=>[e(K,{modelValue:s.quantity,"onUpdate:modelValue":v=>s.quantity=v,type:"number",min:"1",label:"\u0627\u0644\u0643\u0645\u064A\u0629",rules:[l(A)],style:{"background-color":"#fff"}},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),e(m,{cols:"10",md:"6"},{default:t(()=>[e(K,{modelValue:s.price,"onUpdate:modelValue":v=>s.price=v,label:"\u0627\u0644\u0633\u0639\u0631",type:"number",min:"1",rules:[l(A)],style:{"background-color":"#fff"}},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),r>0||l(U).length>1?(p(),y(m,{key:0,cols:"12",class:"d-flex justify-end py-0"},{default:t(()=>[e(V,{onClick:v=>I(r),icon:"",size:"small",style:{top:"5px",left:"5px"}},{default:t(()=>[e(k,{icon:"simple-line-icons:minus",size:"20"})]),_:2},1032,["onClick"])]),_:2},1024)):te("",!0)]),_:2},1024))),128))]),_:1}),e(m,{cols:"12"},{default:t(()=>[e(Oe,{modelValue:l(o).notes,"onUpdate:modelValue":u[7]||(u[7]=s=>l(o).notes=s),label:l(O)("forms.notes"),rows:"6"},null,8,["modelValue","label"])]),_:1}),e(m,{cols:"12",class:"pt-4 text-center"},{default:t(()=>[l(z)?(p(),y(V,{key:1,type:"submit",class:"position-relative me-3 px-8"},{default:t(()=>[e(k,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(p(),y(V,{key:0,type:"submit",class:"me-3 px-8"},{default:t(()=>[L(x(l(O)("buttons.save")),1)]),_:1})),e(V,{variant:"tonal",color:"secondary",onClick:b,class:"px-8"},{default:t(()=>[L(x(l(O)("buttons.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},ul=n("span",{class:"mx-1 my-1"}," \u0625\u0636\u0627\u0641\u0629 \u0641\u0627\u062A\u0648\u0631\u0629 ",-1),rl={class:"d-flex justify-space-between align-center mb-6"},cl=n("h3",{class:""},"\u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A",-1),ml={__name:"AddInvoiceDialog",props:{isAddOpen:{type:Boolean,required:!0}},emits:["update:isAddOpen","refreshTable"],setup(h,{emit:H}){const w=h,C=H,a=ue(),R=Ve(),E=De();$e();const S=Me(),N=de(),Q=be(),B=Ae(),D=c([]),$=c([]),F=c([]),M=c(null),{t:O}=oe(),o=re({store_id:null,supplier_id:null,user_id:null,city_id:null,tax:1,date:null,invoice:[],notes:null}),U=c([{product_name:null,product_id:null,quantity:1,price:null}]),z=c(!1),b=c(!1),g=()=>{C("update:isAddOpen",!1)},G=u=>{C("update:isAddOpen",u)},I=()=>{U.value.push({product_name:null,product_id:null,quantity:1,price:null})},q=u=>{U.value=U.value.filter((i,P)=>P!=u)},j=async()=>{if(z.value=!0,(await M.value.validate()).valid){const i=new FormData;i.append("store_id",o.store_id),i.append("supplier_id",o.supplier_id),i.append("user_id",o.user_id),i.append("city_id",o.city_id),i.append("tax",o.tax),i.append("invoice",o.invoice[0]),i.append("date",o.date),i.append("notes",o.notes);let P=0;U.value.forEach((s,r)=>{P+=parseFloat(s.price);for(const v in s)Object.hasOwnProperty.call(s,v)&&s[v]&&s[v]!=""&&i.append(`stocks[${r}][${v}]`,s[v])}),i.append("invoice_price",P.toFixed(2)),N.store(i).then(s=>{C("refreshTable"),C("update:isAddOpen",!1),a.alertColor="success",a.alertMessage="\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0646\u0635\u0631 \u0628\u0646\u062C\u0627\u062D",a.isAlertShow=!0,setTimeout(()=>{a.isAlertShow=!1,a.alertMessage=""},2e3)}).catch(s=>{s.response.data.errors?Object.keys(s.response.data.errors).forEach(v=>{a.alertMessage=O(`errors.${v}`)}):a.alertMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 !",a.alertColor="error",a.isAlertShow=!0,setTimeout(()=>{a.isAlertShow=!1,a.alertMessage=""},2e3)}).finally(()=>{z.value=!1})}else z.value=!1,a.alertMessage="\u064A\u0631\u062C\u064A \u062A\u0639\u0628\u0626\u0629 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 !",a.alertColor="error",a.isAlertShow=!0,setTimeout(()=>{a.isAlertShow=!1,a.alertMessage=""},2e3)},T=async()=>{Q.fetchCities({pageSize:-1}).then(u=>{F.value=u.data.data}),R.fetchEmployees({pageSize:-1}).then(u=>{var i;D.value=(i=u.data.data)==null?void 0:i.data}),S.getAll({pageSize:-1}).then(u=>{var i,P;$.value=((P=(i=u.data)==null?void 0:i.data)==null?void 0:P.data)||[]})};return ce(()=>{T()}),(u,i)=>{const P=pe,s=Ue;return p(),y(fe,{width:u.$vuetify.display.smAndDown?"auto":650,"model-value":w.isAddOpen,"onUpdate:modelValue":G},{default:t(()=>[e(P,{onClick:i[0]||(i[0]=r=>G(!1))}),e(ae,{class:"pa-sm-9 pa-5"},{default:t(()=>[e(me,null,{default:t(()=>[e(ie,{class:"text-h5 d-flex flex-column align-center gap-2 text-center mb-3"},{default:t(()=>[e(k,{icon:"uil:invoice",size:"24",color:"primary"}),ul]),_:1})]),_:1}),e(se,null,{default:t(()=>[e(ne,{ref_key:"refForm",ref:M,onSubmit:Y(j,["prevent"])},{default:t(()=>[e(W,null,{default:t(()=>[e(m,{cols:"12",md:"6"},{default:t(()=>[e(Ze,{modelValue:l(o).invoice,"onUpdate:modelValue":i[1]||(i[1]=r=>l(o).invoice=r),label:"\u0627\u0644\u0641\u0627\u062A\u0648\u0631\u0629",accept:"image/*","prepend-icon":"","prepend-inner-icon":"mdi-image",rules:[l(A)]},null,8,["modelValue","rules"])]),_:1}),e(m,{cols:"12",md:"6"},{default:t(()=>[e(K,{modelValue:l(o).date,"onUpdate:modelValue":i[2]||(i[2]=r=>l(o).date=r),label:"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0641\u0627\u062A\u0648\u0631\u0629",type:"date",rules:[l(A)]},null,8,["modelValue","rules"])]),_:1}),e(m,{cols:"12",md:"6"},{default:t(()=>[e(Z,{modelValue:l(o).city_id,"onUpdate:modelValue":i[3]||(i[3]=r=>l(o).city_id=r),items:l(F),label:"\u0627\u0644\u0645\u062F\u064A\u0646\u0629","item-title":"name_ar","item-value":"id",rules:[l(A)]},null,8,["modelValue","items","rules"])]),_:1}),e(m,{cols:"12",md:"6"},{default:t(()=>[e(Z,{modelValue:l(o).supplier_id,"onUpdate:modelValue":i[4]||(i[4]=r=>l(o).supplier_id=r),items:l($),label:"\u0627\u0644\u0645\u0648\u0631\u062F","item-title":"name","item-value":"id",rules:[l(A)]},null,8,["modelValue","items","rules"])]),_:1}),e(m,{cols:"12",md:"6"},{default:t(()=>[e(Z,{modelValue:l(o).user_id,"onUpdate:modelValue":i[5]||(i[5]=r=>l(o).user_id=r),items:l(D),label:"\u0627\u0644\u0645\u0648\u0638\u0641 \u0627\u0644\u0645\u0633\u0626\u0648\u0644","item-title":"username","item-value":"id",rules:[l(A)]},null,8,["modelValue","items","rules"])]),_:1}),e(m,{cols:"12",md:"6"},{default:t(()=>[e(ge,{label:"\u0627\u0644\u0636\u0631\u064A\u0628\u0629",modelValue:l(o).tax,"onUpdate:modelValue":i[6]||(i[6]=r=>l(o).tax=r),"true-value":1,"false-value":0},null,8,["modelValue"])]),_:1}),e(m,{cols:"12"},{default:t(()=>[n("div",rl,[cl,e(V,{onClick:I,class:"position-relative",icon:"",size:"small"},{default:t(()=>[e(k,{icon:"ei:plus",size:"30"})]),_:1})]),(p(!0),J(ve,null,ye(l(U),(r,v)=>(p(),y(W,{key:v,style:{"background-color":"#fafafa","border-radius":"10px"},class:"mb-6 py-3"},{default:t(()=>[e(m,{cols:"12",md:"6"},{default:t(()=>[e(s,{modelValue:r.store_id,"onUpdate:modelValue":_=>r.store_id=_,apiModel:l(E),apiSearchMethod:"getAll","item-title":"name","item-value":"id",label:"\u0627\u0644\u0645\u062E\u0632\u0646",placeholder:"\u0627\u0644\u0628\u062D\u062B \u0641\u064A \u0627\u0644\u0645\u062E\u0632\u0646",rules:[l(A)],style:{"background-color":"#fff"}},null,8,["modelValue","onUpdate:modelValue","apiModel","rules"])]),_:2},1024),e(m,{cols:"12",md:"6",class:"d-flex gap-2"},{default:t(()=>[l(b)?(p(),y(K,{key:0,modelValue:r.product_name,"onUpdate:modelValue":_=>r.product_name=_,label:"\u0627\u0633\u0645 \u0627\u0644\u0645\u0646\u062A\u062C",rules:[l(A)],style:{"background-color":"#fff"}},null,8,["modelValue","onUpdate:modelValue","rules"])):(p(),y(s,{key:1,modelValue:r.product_id,"onUpdate:modelValue":_=>r.product_id=_,apiModel:l(B),apiSearchMethod:"fetchProducts","item-title":"name_ar","item-value":"id",label:"\u0627\u0644\u0645\u0646\u062A\u062C",placeholder:"\u0627\u0644\u0628\u062D\u062B \u0641\u064A \u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A",rules:[l(A)],style:{"background-color":"#fff"}},null,8,["modelValue","onUpdate:modelValue","apiModel","rules"])),e(ze,{text:l(b)?"\u0627\u062E\u062A\u064A\u0627\u0631 \u0645\u0646 \u0627\u0644\u0645\u0646\u062A\u062C\u0627\u062A":"\u0625\u0636\u0627\u0641\u0629 \u0645\u0646\u062A\u062C \u062C\u062F\u064A\u062F"},{activator:t(({props:_})=>[e(V,we(_,{onClick:i[7]||(i[7]=d=>b.value=!l(b)),flat:"",class:"position-relative",icon:"",size:"small"}),{default:t(()=>[l(b)?(p(),y(k,{key:0,icon:"ei:minus",size:"30"})):(p(),y(k,{key:1,icon:"ei:plus",size:"30"}))]),_:2},1040)]),_:1},8,["text"])]),_:2},1024),e(m,{cols:"10",md:"6"},{default:t(()=>[e(K,{modelValue:r.quantity,"onUpdate:modelValue":_=>r.quantity=_,type:"number",min:"1",label:"\u0627\u0644\u0643\u0645\u064A\u0629",rules:[l(A)],style:{"background-color":"#fff"}},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),e(m,{cols:"10",md:"6"},{default:t(()=>[e(K,{modelValue:r.price,"onUpdate:modelValue":_=>r.price=_,label:"\u0627\u0644\u0633\u0639\u0631",type:"number",min:"1",rules:[l(A)],style:{"background-color":"#fff"}},null,8,["modelValue","onUpdate:modelValue","rules"])]),_:2},1024),v>0||l(U).length>1?(p(),y(m,{key:0,cols:"12",class:"d-flex justify-end py-0"},{default:t(()=>[e(V,{onClick:_=>q(v),icon:"",size:"small",style:{top:"5px",left:"5px"}},{default:t(()=>[e(k,{icon:"simple-line-icons:minus",size:"20"})]),_:2},1032,["onClick"])]),_:2},1024)):te("",!0)]),_:2},1024))),128))]),_:1}),e(m,{cols:"12"},{default:t(()=>[e(Oe,{modelValue:l(o).notes,"onUpdate:modelValue":i[8]||(i[8]=r=>l(o).notes=r),label:l(O)("forms.notes"),rows:"6"},null,8,["modelValue","label"])]),_:1}),e(m,{cols:"12",class:"pt-4 text-center"},{default:t(()=>[l(z)?(p(),y(V,{key:1,type:"submit",class:"position-relative me-3 px-8"},{default:t(()=>[e(k,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(p(),y(V,{key:0,type:"submit",class:"me-3 px-8"},{default:t(()=>[L(x(l(O)("buttons.save")),1)]),_:1})),e(V,{variant:"tonal",color:"secondary",onClick:g,class:"px-8"},{default:t(()=>[L(x(l(O)("buttons.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},pl={class:"icon"},fl={class:"icon"},_l={class:"icon"},vl=n("span",{class:"mx-1"},"\u0627\u0644\u0641\u0648\u0627\u062A\u064A\u0631",-1),yl={style:{width:"5rem"}},gl=n("th",{scope:"col",class:"font-weight-semibold"}," # ",-1),bl=n("th",{scope:"col",class:"font-weight-semibold"}," \u0633\u0639\u0631 \u0627\u0644\u0641\u0627\u062A\u0648\u0631\u0629 ",-1),Vl=n("th",{scope:"col",class:"font-weight-semibold"}," \u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0641\u0627\u062A\u0648\u0631\u0629 ",-1),hl=n("th",{scope:"col",class:"font-weight-semibold"}," \u0627\u0644\u0636\u0631\u064A\u0628\u0629 ",-1),Sl=n("th",{scope:"col",class:"font-weight-semibold"}," \u062D\u0627\u0644\u0629 \u0627\u0644\u062F\u0641\u0639 ",-1),xl=n("th",{scope:"col",class:"font-weight-semibold"}," \u0627\u0644\u0645\u0633\u0626\u0648\u0644 ",-1),kl=n("th",{scope:"col",class:"font-weight-semibold"}," \u0627\u0644\u0645\u0632\u0648\u062F ",-1),wl={scope:"col",class:"font-weight-semibold"},Cl={key:0},Ul={key:1},Al={class:"d-flex align-center gap-2"},$l={key:0},Dl={key:1,class:"px-4"},Ml=n("tr",null,[n("td",{colspan:"8",class:"text-center text-body-1"}," \u0644\u0627 \u064A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A ")],-1),Ol=[Ml],zl={class:"text-sm text-disabled"},_t={__name:"index",setup(h){const H=de(),w=be(),C=Ve(),{t:a}=oe(),R=c(""),E=c(5),S=c(1),N=c(1),Q=c(1),B=c(1),D=c(0),$=c([]),F=c([]),M=c(!1),O=c(!1),o=c({}),U=c(!1),z=c(!1),b=c(!1),g=c(!1),G=c([]),I=c([]),q=re({city_id:null,user_id:null,date:null}),j=()=>{b.value=!0,H.getAll({...q,q:R.value,per_page:E.value,page:S.value}).then(_=>{var d,ee;$.value=(ee=(d=_.data)==null?void 0:d.data)==null?void 0:ee.data,N.value=_.data.data.last_page,Q.value=_.data.data.from,B.value=_.data.data.to,D.value=_.data.data.total}).catch(_=>{console.log(_)}).finally(()=>{b.value=!1})};Ee(()=>{E.value&&(S.value=1)});const T=qe(()=>` \u0639\u0631\u0636 \u0645\u0646 ${v(Q.value)} \u0625\u0644\u064A ${v(B.value)} \u0645\u0646 ${v(D.value)} \u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A `),u=_=>{O.value=!0,o.value=_},i=_=>{U.value=!0,o.value={..._,stocks:_.stocks.map(d=>({id:d.id,product_id:d.product_id,product_name:d.product_name,name_ar:d.product_name,name:d.store.name,store_id:d.store.id,quantity:d.quantity,price:d.price}))}},P=_=>{z.value=!0,o.value=_},s=()=>{g.value=!0,j()},r=()=>{q.city_id=null,q.user_id=null,q.date=null,j()},v=_=>{const d="\u0660\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669";return String(_).replace(/[0123456789]/g,ee=>d[ee])};return xe(E,()=>{j()}),xe(()=>S.value,()=>{j()}),ce(()=>{j(),w.fetchCities({pageSize:-1}).then(_=>{G.value=_.data.data}),C.fetchEmployees({pageSize:-1}).then(_=>{var d;I.value=(d=_.data.data)==null?void 0:d.data})}),(_,d)=>{const ee=ml,Te=dl,Pe=sl,Fe=al;return p(),J("div",null,[e(ae,{class:"mb-5 pa-5"},{default:t(()=>[e(ne,{onSubmit:d[3]||(d[3]=Y(()=>{},["stop"]))},{default:t(()=>[e(W,{justify:"space-between"},{default:t(()=>[e(m,{cols:"12",lg:"8"},{default:t(()=>[e(W,null,{default:t(()=>[e(m,{cols:"12",lg:"4",md:"3",sm:"6",class:"d-flex align-center gap-3"},{default:t(()=>[n("div",pl,[e(k,{icon:"solar:city-broken",color:"primary"})]),e(Z,{modelValue:l(q).city_id,"onUpdate:modelValue":d[0]||(d[0]=f=>l(q).city_id=f),items:l(G),label:"\u0627\u0644\u0645\u062F\u064A\u0646\u0629","item-title":"name_ar","item-value":"id"},null,8,["modelValue","items"])]),_:1}),e(m,{cols:"12",lg:"4",md:"3",sm:"6",class:"d-flex align-center gap-3"},{default:t(()=>[n("div",fl,[e(k,{icon:"clarity:users-line",color:"primary"})]),e(Z,{modelValue:l(q).user_id,"onUpdate:modelValue":d[1]||(d[1]=f=>l(q).user_id=f),items:l(I),label:"\u0627\u0644\u0645\u0633\u0626\u0648\u0644","item-title":"username","item-value":"id"},null,8,["modelValue","items"])]),_:1}),e(m,{cols:"12",lg:"4",md:"3",sm:"6",class:"d-flex align-center gap-3"},{default:t(()=>[n("div",_l,[e(k,{icon:"clarity:users-line",color:"primary"})]),e(K,{modelValue:l(q).date,"onUpdate:modelValue":d[2]||(d[2]=f=>l(q).date=f),label:"\u062A\u0627\u0631\u064A\u062E \u0627\u0644\u0641\u0627\u062A\u0648\u0631\u0629",type:"date"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(m,{cols:"12",lg:"4",class:"d-flex align-center justify-end gap-3"},{default:t(()=>[l(b)?(p(),y(V,{key:1,class:"position-relative",style:{width:"152px","max-width":"100%"}},{default:t(()=>[e(k,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(p(),y(V,{key:0,"prepend-icon":"solar:filter-bold-duotone",disabled:l(b),onClick:Y(s,["stop"])},{default:t(()=>[L(x(l(a)("Filter")),1)]),_:1},8,["disabled"])),e(V,{"prepend-icon":"healthicons:x",disabled:l(b),onClick:Y(r,["stop"])},{default:t(()=>[L(x(l(a)("Clear_Filter")),1)]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})]),_:1}),e(ae,{loading:l(b)},{default:t(()=>[e(ie,{class:"d-flex align-center gap-2"},{default:t(()=>[e(k,{icon:"uil:invoice",size:"24",color:"primary"}),vl]),_:1}),e(se,{class:"d-flex align-center flex-wrap gap-2 py-4"},{default:t(()=>[n("div",yl,[e(Z,{modelValue:l(E),"onUpdate:modelValue":d[4]||(d[4]=f=>X(E)?E.value=f:null),variant:"outlined",items:[5,10,20,30,50,100]},null,8,["modelValue"])]),e(V,{"prepend-icon":"tabler-plus",onClick:d[5]||(d[5]=f=>M.value=!0),disabled:l(b)},{default:t(()=>[L(" \u0625\u0636\u0627\u0641\u0629 \u0641\u0627\u062A\u0648\u0631\u0629 ")]),_:1},8,["disabled"]),e(Ge)]),_:1}),e(ke),e(je,{class:"text-no-wrap product-list-table"},{default:t(()=>[n("thead",null,[n("tr",null,[gl,bl,Vl,hl,Sl,xl,kl,n("th",wl,x(l(a)("forms.actions")),1)])]),n("tbody",null,[(p(!0),J(ve,null,ye(l($),(f,Tl)=>{var he,Se;return p(),J("tr",{key:f.id},[n("td",null,x(f.id),1),n("td",null,x(f.invoice_price),1),n("td",null,x(f.date),1),n("td",null,[f.tax?(p(),J("span",Cl,x(f.tax),1)):(p(),J("span",Ul,"--"))]),n("td",null,[e(Ce,{class:Be({"text-error":f.paid==0,"text-success":f.paid==1})},{default:t(()=>[L(x(f.paid==1?"\u0645\u062F\u0641\u0648\u0639":"\u063A\u064A\u0631 \u0645\u062F\u0641\u0648\u0639"),1)]),_:2},1032,["class"])]),n("td",null,x((he=f.user)==null?void 0:he.username),1),n("td",null,x((Se=f.supplier)==null?void 0:Se.name),1),n("td",Al,[f.paid?(p(),J("div",Dl)):(p(),J("div",$l,[e(ze,{text:"\u0633\u062F\u0627\u062F \u0627\u0644\u0641\u0627\u062A\u0648\u0631\u0629"},{activator:t(({props:_e})=>[e(V,we(_e,{icon:"",variant:"plain",color:"default",size:"x-small",onClick:Pl=>P(f)}),{default:t(()=>[e(k,{size:22,icon:"material-symbols:payments-outline-sharp"})]),_:2},1040,["onClick"])]),_:2},1024)])),e(V,{icon:"",variant:"plain",color:"default",size:"x-small",onClick:_e=>i(f)},{default:t(()=>[e(k,{size:22,icon:"tabler-pencil"})]),_:2},1032,["onClick"]),e(V,{icon:"",variant:"plain",color:"default",size:"x-small",onClick:_e=>u(f)},{default:t(()=>[e(k,{size:22,icon:"tabler-trash"})]),_:2},1032,["onClick"])])])}),128))]),Le(n("tfoot",null,Ol,512),[[Re,!l($).length]])]),_:1}),e(ke),e(se,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3"},{default:t(()=>[n("span",zl,x(l(T)),1),e(He,{modelValue:l(S),"onUpdate:modelValue":d[6]||(d[6]=f=>X(S)?S.value=f:null),size:"small","total-visible":5,length:l(N),onNext:d[7]||(d[7]=f=>F.value=[]),onPrev:d[8]||(d[8]=f=>F.value=[])},null,8,["modelValue","length"])]),_:1})]),_:1},8,["loading"]),l(M)?(p(),y(ee,{key:0,"is-add-open":l(M),"onUpdate:isAddOpen":d[9]||(d[9]=f=>X(M)?M.value=f:null),onRefreshTable:j},null,8,["is-add-open"])):te("",!0),l(U)?(p(),y(Te,{key:1,"is-edit-open":l(U),"onUpdate:isEditOpen":d[10]||(d[10]=f=>X(U)?U.value=f:null),item:l(o),onRefreshTable:j},null,8,["is-edit-open","item"])):te("",!0),l(O)?(p(),y(Pe,{key:2,"is-delete-open":l(O),"onUpdate:isDeleteOpen":d[11]||(d[11]=f=>X(O)?O.value=f:null),item:l(o),onRefreshTable:j},null,8,["is-delete-open","item"])):te("",!0),l(z)?(p(),y(Fe,{key:3,"is-pay-open":l(z),"onUpdate:isPayOpen":d[12]||(d[12]=f=>X(z)?z.value=f:null),item:l(o),onRefreshTable:j},null,8,["is-pay-open","item"])):te("",!0)])}}};export{_t as default};
