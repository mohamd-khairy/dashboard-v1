import{m as Y,g as Z,u as ee,V as D,h as le,i as te,j as ne}from"./VTextField.d0ea55f9.js";import{f as ae}from"./forwardRefs.74a345f5.js";import{K as ue,aJ as N,U as ie,aH as oe,a3 as se,A as r,c5 as M,k as V,D as re,a7 as ce,af as de,p as u,a8 as g,F as k,ab as fe,b2 as ve}from"./index.e64427d3.js";import{V as me}from"./VChip.0f7134b7.js";const pe=ue({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...Y({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>N(e).every(v=>v!=null&&typeof v=="object")},...Z({clearable:!0})},"VFileInput"),Ce=ie()({name:"VFileInput",inheritAttrs:!1,props:pe(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,v){let{attrs:j,emit:C,slots:n}=v;const{t:I}=oe(),a=se(e,"modelValue",e.modelValue,l=>N(l),l=>{var t;return e.multiple||Array.isArray(e.modelValue)?l:(t=l[0])!=null?t:null}),{isFocused:m,focus:x,blur:U}=ee(e),b=r(()=>typeof e.showSize!="boolean"?e.showSize:void 0),F=r(()=>{var l;return((l=a.value)!=null?l:[]).reduce((t,i)=>{let{size:c=0}=i;return t+c},0)}),S=r(()=>M(F.value,b.value)),y=r(()=>{var l;return((l=a.value)!=null?l:[]).map(t=>{const{name:i="",size:c=0}=t;return e.showSize?`${i} (${M(c,b.value)})`:i})}),E=r(()=>{var t,i;const l=(i=(t=a.value)==null?void 0:t.length)!=null?i:0;return e.showSize?I(e.counterSizeString,l,S.value):I(e.counterString,l)}),P=V(),A=V(),o=V(),O=r(()=>m.value||e.active),z=r(()=>["plain","underlined"].includes(e.variant));function h(){var l;o.value!==document.activeElement&&((l=o.value)==null||l.focus()),m.value||x()}function H(l){var t;(t=o.value)==null||t.click()}function J(l){C("mousedown:control",l)}function K(l){var t;(t=o.value)==null||t.click(),C("click:control",l)}function L(l){l.stopPropagation(),h(),fe(()=>{a.value=[],ve(e["onClick:clear"],l)})}return re(a,l=>{(!Array.isArray(l)||!l.length)&&o.value&&(o.value.value="")}),ce(()=>{const l=!!(n.counter||e.counter),t=!!(l||n.details),[i,c]=de(j),{modelValue:ye,...T}=D.filterProps(e),_=le(e);return u(D,g({ref:P,modelValue:a.value,"onUpdate:modelValue":d=>a.value=d,class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":z.value},e.class],style:e.style,"onClick:prepend":H},i,T,{centerAffix:!z.value,focused:m.value}),{...n,default:d=>{let{id:p,isDisabled:f,isDirty:w,isReadonly:R,isValid:q}=d;return u(te,g({ref:A,"prepend-icon":e.prependIcon,onMousedown:J,onClick:K,"onClick:clear":L,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},_,{id:p.value,active:O.value||w.value,dirty:w.value||e.dirty,disabled:f.value,focused:m.value,error:q.value===!1}),{...n,default:G=>{var B;let{props:{class:Q,...W}}=G;return u(k,null,[u("input",g({ref:o,type:"file",readonly:R.value,disabled:f.value,multiple:e.multiple,name:e.name,onClick:s=>{s.stopPropagation(),R.value&&s.preventDefault(),h()},onChange:s=>{var $;if(!s.target)return;const X=s.target;a.value=[...($=X.files)!=null?$:[]]},onFocus:h,onBlur:U},W,c),null),u("div",{class:Q},[!!((B=a.value)!=null&&B.length)&&!e.hideInput&&(n.selection?n.selection({fileNames:y.value,totalBytes:F.value,totalBytesReadable:S.value}):e.chips?y.value.map(s=>u(me,{key:s,size:"small",text:s},null)):y.value.join(", "))])])}})},details:t?d=>{var p,f;return u(k,null,[(p=n.details)==null?void 0:p.call(n,d),l&&u(k,null,[u("span",null,null),u(ne,{active:!!((f=a.value)!=null&&f.length),value:E.value,disabled:e.disabled},n.counter)])])}:void 0})}),ae({},P,A,o)}});export{Ce as V};
