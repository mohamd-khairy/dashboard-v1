import{bP as Y,aB as J,k as y,o as p,b as h,w as l,p as t,bQ as Q,bR as K,bS as Z,ak as D,m,y as c,q as e,b$ as I,c0 as W,av as X,aw as S,al as k,ap as M,bD as j,c6 as ve,C as be,I as oe,A as re,b0 as Ve,c as T,an as q,ar as z,bZ as he,F as ne,a as ie,aq as Ce,ag as ue,as as we}from"./index.e195cd26.js";import{_ as ee}from"./DialogCloseBtn.a5443f2c.js";import"./Roles.9ea452a8.js";import{u as G}from"./Categories.d2cb3476.js";import{V as te}from"./VForm.bf1fdf96.js";import{V as le}from"./VDialog.4d61232b.js";import{u as pe}from"./Cities.5a000363.js";import{d as L}from"./VTextField.0ba2900d.js";import{V as fe}from"./VFileInput.892a0b51.js";import{V as se}from"./VSelect.d3114f6b.js";import{r as P}from"./validators.dc210ddc.js";import{m as de}from"./moment.361b1408.js";import{V as Se}from"./VSpacer.b4f17f1c.js";import{V as ce}from"./VDivider.638f8eff.js";import{V as me}from"./VChip.37b1ef7f.js";import{V as ke}from"./VPagination.744b7e53.js";import"./forwardRefs.74a345f5.js";import"./VOverlay.e3c69687.js";import"./lazy.3c63b833.js";import"./index.4f7ac4e6.js";import"./VList.9d440da5.js";import"./ssrBoot.d7cd1016.js";import"./VMenu.62aeda27.js";import"./VCheckboxBtn.720fbc0c.js";const xe={__name:"DeleteCategoriesDialog",props:{isDeleteOpen:{type:Boolean,required:!0},category:{type:Object,required:!0}},emits:["update:isDeleteOpen","refreshTable"],setup(F,{emit:$}){const v=F,u=$,{t:r}=Y(),O=G(),f=J(),s=y(!1),A=()=>{u("update:isDeleteOpen",!1)},g=()=>{s.value=!0,O.deleteCategory(v.category).then(()=>{u("refreshTable"),u("update:isDeleteOpen",!1),f.alertColor="success",f.alertMessage="\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0641\u0626\u0629 \u0628\u0646\u062C\u0627\u062D",f.isAlertShow=!0,setTimeout(()=>{f.isAlertShow=!1,f.alertMessage="",s.value=!1},1e3)}).catch(C=>{s.value=!1,f.alertColor="error",f.alertMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 !",f.isAlertShow=!0,setTimeout(()=>{f.isAlertShow=!1,f.alertMessage=""},2e3)})},a=C=>{u("update:isDeleteOpen",C)};return(C,w)=>{const b=ee;return p(),h(le,{width:C.$vuetify.display.smAndDown?"auto":650,"model-value":v.isDeleteOpen,"onUpdate:modelValue":a},{default:l(()=>[t(b,{onClick:w[0]||(w[0]=x=>a(!1))}),t(Q,{class:"pa-sm-9 pa-5"},{default:l(()=>[t(K,null,{default:l(()=>[t(Z,{class:"text-h5 text-center mb-3"},{default:l(()=>[t(D,{icon:"ph:info-light",color:"#f00",size:"50"}),m("h5",null,c(e(r)("ask_delete")),1)]),_:1})]),_:1}),t(I,null,{default:l(()=>[t(te,{ref:"refForm",onSubmit:W(g,["prevent"])},{default:l(()=>[t(X,null,{default:l(()=>[t(S,{cols:"12",class:"text-center"},{default:l(()=>[e(s)?(p(),h(k,{key:1,type:"submit",class:"position-relative me-3"},{default:l(()=>[t(D,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(p(),h(k,{key:0,type:"submit",class:"me-3"},{default:l(()=>[M(c(e(r)("buttons.confirm")),1)]),_:1})),t(k,{variant:"tonal",color:"secondary",onClick:A},{default:l(()=>[M(c(e(r)("buttons.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},Ae={class:"mx-1 my-1"},De={__name:"EditCategoryDialog",props:{isEditOpen:{type:Boolean,required:!0},category:{type:Object,required:!0}},emits:["refreshTable","update:isEditOpen"],setup(F,{emit:$}){const v=F,u=$,{t:r}=Y(),O=pe(),f=G(),s=J(),A=j([]),g=y(!1);ve(()=>{a.id=v.category.id,a.type_ar=v.category.type_ar,a.type_en=v.category.type_en,a.description=v.category.description,a.city_ids=v.category.cities,a.backgroundColor=v.category["background color 1"],a.color=v.category["background color 2"],a.image=v.category.image,O.fetchCities().then(V=>{A.value=V.data.data})});const a=j({id:null,type_ar:null,type_en:null,description:null,city_ids:null,backgroundColor:"#fff",color:"#fff",image:{}}),C=()=>{u("update:isEditOpen",!1)},w=y(null),b=async()=>{g.value=!0,(await w.value.validate()).valid?f.editCategory(a).then(o=>{u("update:isEditOpen",!1),u("refreshTable"),s.alertColor="success",s.alertMessage="\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u0639\u0646\u0635\u0631 \u0628\u0646\u062C\u0627\u062D",s.isAlertShow=!0,setTimeout(()=>{s.isAlertShow=!1,s.alertMessage="",g.value=!1},1e3)}).catch(o=>{o.response.data.errors?Object.keys(o.response.data.errors).forEach(n=>{s.alertMessage=r(`errors.${n}`)}):s.alertMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 !",g.value=!1,s.alertColor="error",s.isAlertShow=!0,setTimeout(()=>{s.isAlertShow=!1,s.alertMessage=""},2e3)}):(g.value=!1,s.alertMessage="\u064A\u0631\u062C\u064A \u062A\u0639\u0628\u0626\u0629 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 !",s.alertColor="error",s.isAlertShow=!0,setTimeout(()=>{s.isAlertShow=!1,s.alertMessage=""},2e3))},x=V=>{u("update:isEditOpen",V)};return(V,o)=>{const U=ee;return p(),h(le,{width:V.$vuetify.display.smAndDown?"auto":650,"model-value":v.isEditOpen,"onUpdate:modelValue":x},{default:l(()=>[t(U,{onClick:o[0]||(o[0]=n=>x(!1))}),t(Q,{class:"pa-sm-9 pa-5"},{default:l(()=>[t(K,null,{default:l(()=>[t(Z,{class:"text-h5 d-flex flex-column align-center gap-2 text-center mb-3"},{default:l(()=>[t(D,{icon:"carbon:categories",size:"24",color:"primary"}),m("span",Ae,c(e(r)("Edit_Category")),1)]),_:1})]),_:1}),t(I,null,{default:l(()=>[t(te,{ref_key:"refForm",ref:w,onSubmit:W(b,["prevent"])},{default:l(()=>[t(X,null,{default:l(()=>[t(S,{cols:"12",lg:"12",sm:"6"},{default:l(()=>[t(L,{modelValue:e(a).type_ar,"onUpdate:modelValue":o[1]||(o[1]=n=>e(a).type_ar=n),label:e(r)("forms.type_ar")},null,8,["modelValue","label"])]),_:1}),t(S,{cols:"12",lg:"12",sm:"6"},{default:l(()=>[t(L,{modelValue:e(a).type_en,"onUpdate:modelValue":o[2]||(o[2]=n=>e(a).type_en=n),label:e(r)("forms.type_en")},null,8,["modelValue","label"])]),_:1}),t(S,{cols:"12",lg:"12",sm:"6"},{default:l(()=>[t(L,{modelValue:e(a).description,"onUpdate:modelValue":o[3]||(o[3]=n=>e(a).description=n),label:e(r)("forms.description")},null,8,["modelValue","label"])]),_:1}),t(S,{cols:"12"},{default:l(()=>[t(fe,{modelValue:e(a).image,"onUpdate:modelValue":o[4]||(o[4]=n=>e(a).image=n),label:e(r)("forms.image"),accept:"image/*","prepend-icon":"","prepend-inner-icon":"mdi-image"},null,8,["modelValue","label"])]),_:1}),t(S,{cols:"12",lg:"12",sm:"6"},{default:l(()=>[t(se,{modelValue:e(a).city_ids,"onUpdate:modelValue":o[5]||(o[5]=n=>e(a).city_ids=n),items:e(A).value,label:e(r)("forms.cities"),"item-title":"name_ar","item-value":"id",multiple:""},null,8,["modelValue","items","label"])]),_:1}),t(S,{cols:"12",class:"text-center"},{default:l(()=>[e(g)?(p(),h(k,{key:1,type:"submit",class:"position-relative me-3"},{default:l(()=>[t(D,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(p(),h(k,{key:0,type:"submit",class:"me-3"},{default:l(()=>[M(c(e(r)("buttons.save")),1)]),_:1})),t(k,{variant:"tonal",color:"secondary",onClick:C},{default:l(()=>[M(c(e(r)("buttons.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},Oe={class:"mx-1 my-1"},Me={__name:"AddCategoryDialog",props:{isAddOpen:{type:Boolean,required:!0}},emits:["refreshTable","update:isAddOpen"],setup(F,{emit:$}){const v=F,u=$,{t:r}=Y(),O=pe(),f=G(),s=J(),A=j([]),g=y(!1);be(()=>{O.fetchCities().then(V=>{A.value=V.data.data})});const a=j({type_ar:null,type_en:null,description:null,city_ids:[],backgroundColor:"#fff",color:"#fff",image:{}}),C=()=>{a.type_ar=null,a.type_en=null,a.description=null,a.city_ids=[],a.backgroundColor="#fff",a.color="#fff",a.image={},u("update:isAddOpen",!1)},w=y(null),b=async()=>{g.value=!0,(await w.value.validate()).valid?f.storeCategory(a).then(o=>{u("update:isAddOpen",!1),u("refreshTable"),s.alertColor="success",s.alertMessage="\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0646\u0635\u0631 \u0628\u0646\u062C\u0627\u062D",s.isAlertShow=!0,setTimeout(()=>{s.isAlertShow=!1,s.alertMessage="",g.value=!1},2e3),C()}).catch(o=>{o.response.data.errors?Object.keys(o.response.data.errors).forEach(n=>{s.alertMessage=r(`errors.${n}`)}):s.alertMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 !",g.value=!1,s.alertColor="error",s.isAlertShow=!0,setTimeout(()=>{s.isAlertShow=!1,s.alertMessage=""},2e3)}):(g.value=!1,s.alertMessage="\u064A\u0631\u062C\u064A \u062A\u0639\u0628\u0626\u0629 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 !",s.alertColor="error",s.isAlertShow=!0,setTimeout(()=>{s.isAlertShow=!1,s.alertMessage=""},2e3))},x=V=>{u("update:isAddOpen",V)};return(V,o)=>{const U=ee;return p(),h(le,{width:V.$vuetify.display.smAndDown?"auto":650,"model-value":v.isAddOpen,"onUpdate:modelValue":x},{default:l(()=>[t(U,{onClick:o[0]||(o[0]=n=>x(!1))}),t(Q,{class:"pa-sm-9 pa-5"},{default:l(()=>[t(K,null,{default:l(()=>[t(Z,{class:"text-h5 d-flex flex-column align-center gap-2 text-center mb-3"},{default:l(()=>[t(D,{icon:"carbon:categories",size:"24",color:"primary"}),m("span",Oe,c(e(r)("Add_Category")),1)]),_:1})]),_:1}),t(I,null,{default:l(()=>[t(te,{ref_key:"refForm",ref:w,onSubmit:W(b,["prevent"])},{default:l(()=>[t(X,null,{default:l(()=>[t(S,{cols:"12",lg:"12",sm:"6"},{default:l(()=>[t(L,{modelValue:e(a).type_ar,"onUpdate:modelValue":o[1]||(o[1]=n=>e(a).type_ar=n),label:e(r)("forms.type_ar"),rules:[e(P)]},null,8,["modelValue","label","rules"])]),_:1}),t(S,{cols:"12",lg:"12",sm:"6"},{default:l(()=>[t(L,{modelValue:e(a).type_en,"onUpdate:modelValue":o[2]||(o[2]=n=>e(a).type_en=n),label:e(r)("forms.type_en"),rules:[e(P)]},null,8,["modelValue","label","rules"])]),_:1}),t(S,{cols:"12",lg:"12",sm:"6"},{default:l(()=>[t(L,{modelValue:e(a).description,"onUpdate:modelValue":o[3]||(o[3]=n=>e(a).description=n),label:e(r)("forms.description"),rules:[e(P)]},null,8,["modelValue","label","rules"])]),_:1}),t(S,{cols:"12"},{default:l(()=>[t(fe,{modelValue:e(a).image,"onUpdate:modelValue":o[4]||(o[4]=n=>e(a).image=n),label:e(r)("forms.image"),accept:"image/*","prepend-icon":"","prepend-inner-icon":"mdi-image",rules:[e(P)]},null,8,["modelValue","label","rules"])]),_:1}),t(S,{cols:"12",lg:"12",sm:"6"},{default:l(()=>[t(se,{modelValue:e(a).city_ids,"onUpdate:modelValue":o[5]||(o[5]=n=>e(a).city_ids=n),items:e(A).value,label:e(r)("forms.cities"),"item-title":"name_ar","item-value":"id",multiple:"",rules:[e(P)]},null,8,["modelValue","items","label","rules"])]),_:1}),t(S,{cols:"12",class:"text-center"},{default:l(()=>[e(g)?(p(),h(k,{key:1,type:"submit",class:"position-relative me-3"},{default:l(()=>[t(D,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(p(),h(k,{key:0,type:"submit",class:"me-3"},{default:l(()=>[M(c(e(r)("buttons.save")),1)]),_:1})),t(k,{variant:"tonal",color:"secondary",onClick:C},{default:l(()=>[M(c(e(r)("buttons.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},Te={class:"mx-1"},$e={style:{width:"5rem"}},Ue={scope:"col",class:"font-weight-semibold"},Ee={scope:"col",class:"font-weight-semibold"},Fe={scope:"col",class:"font-weight-semibold"},ze={scope:"col",class:"font-weight-semibold"},Le={scope:"col",class:"font-weight-semibold"},Be={scope:"col",class:"font-weight-semibold"},qe={scope:"col",class:"font-weight-semibold"},Pe=["src"],Ie={key:0},Ne=m("tr",null,[m("td",{colspan:"8",class:"text-center text-body-1"}," \u0644\u0627 \u064A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A ")],-1),Re=[Ne],je={class:"text-sm text-disabled"},gt={__name:"categories",setup(F){const $=G(),v=y("");y();const u=y(5),r=y(1),O=y(1),f=y(0),s=y([]),A=y([]),g=y(!1),a=y(!1),C=y({}),w=y(!1),{t:b}=Y(),x=()=>{$.fetchCategories({q:v.value}).then(_=>{s.value=_.data.data,O.value=s.value/u,f.value=s.value.length,r.value=1}).catch(_=>{console.log(_)})};oe(()=>{x()}),oe(()=>{u.value&&(r.value=1)});const V=re(()=>(O.value=Math.ceil(s.value.length/u.value),s.value.filter((_,d)=>{let E=(r.value-1)*u.value,H=r.value*u.value;if(d>=E&&d<H)return!0}))),o=re(()=>{const _=s.value.length?(r.value-1)*u.value+1:0,d=_+(u.value-1)<=s.value.length?_+(u.value-1):f.value;return` \u0639\u0631\u0636 \u0645\u0646 ${N(_)} \u0625\u0644\u064A ${N(d)} \u0645\u0646 ${N(f.value)} \u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A `}),U=_=>{a.value=!0,C.value=_},n=_=>{w.value=!0,C.value=_},N=_=>{const d="\u0660\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669";return String(_).replace(/[0123456789]/g,E=>d[E])},ge=_=>{let d=de(_).format("DD-MM-YYYY"),E=de(_).format("hh:mm:ss A");return{date:d,time:E}};return(_,d)=>{const E=Me,H=De,_e=xe,B=Ve("can");return p(),T("div",null,[t(Q,null,{default:l(()=>[t(Z,{class:"d-flex align-center"},{default:l(()=>[t(D,{icon:"carbon:categories",size:"24",color:"primary"}),m("span",Te,c(e(b)("Categories")),1)]),_:1}),t(I,{class:"d-flex align-center flex-wrap gap-2 py-4"},{default:l(()=>[m("div",$e,[t(se,{modelValue:e(u),"onUpdate:modelValue":d[0]||(d[0]=i=>q(u)?u.value=i:null),variant:"outlined",items:[5,10,20,30,50]},null,8,["modelValue"])]),z((p(),h(k,{"prepend-icon":"tabler-plus",onClick:d[1]||(d[1]=i=>g.value=!0)},{default:l(()=>[M(c(e(b)("Add_Category")),1)]),_:1})),[[B,"create-category"]]),t(Se)]),_:1}),t(ce),t(he,{class:"text-no-wrap categories-list-table"},{default:l(()=>[m("thead",null,[m("tr",null,[m("th",Ue,c(e(b)("forms.id")),1),m("th",Ee,c(e(b)("forms.product_image")),1),m("th",Fe,c(e(b)("forms.name")),1),m("th",ze,c(e(b)("forms.description")),1),m("th",Le,c(e(b)("forms.cities")),1),m("th",Be,c(e(b)("forms.created_at")),1),z((p(),T("th",qe,[M(c(e(b)("forms.actions")),1)])),[[B,"read-category"]])])]),m("tbody",null,[(p(!0),T(ne,null,ie(e(V),(i,ye)=>(p(),T("tr",{key:i.id},[m("td",null," #"+c(++ye),1),m("td",null,[i.image_url.toString().split("storage/")[1]!==""&&i.image_url!==null?(p(),T("img",{key:0,src:i.image_url,alt:"\u0645\u0646\u062A\u062C",width:"50",height:"50"},null,8,Pe)):(p(),h(D,{key:1,icon:"iconoir:n-square",size:"32"}))]),m("td",null,c(i.type_ar),1),m("td",null,c(i.description.toString().length>30?i.description.toString().slice(0,30):i.description),1),m("td",null,[(p(!0),T(ne,null,ie(i.cities,(R,ae)=>(p(),h(me,{key:R.id,class:"mx-1",style:Ce({display:ae<1?"":"none"})},{default:l(()=>[ae<1?(p(),T("span",Ie,c(R.name_ar),1)):ue("",!0)]),_:2},1032,["style"]))),128)),i.cities.length>1?(p(),h(me,{key:0},{default:l(()=>[M("+"+c(i.cities.length-1),1)]),_:2},1024)):ue("",!0)]),m("td",null,c(N(ge(i.created_at).date)),1),z((p(),T("td",null,[z((p(),h(k,{icon:"",variant:"plain",color:"default",size:"x-small",onClick:R=>n(i)},{default:l(()=>[t(D,{size:22,icon:"tabler-pencil"})]),_:2},1032,["onClick"])),[[B,"update-category"]]),z((p(),h(k,{icon:"",variant:"plain",color:"default",size:"x-small",onClick:R=>U(i)},{default:l(()=>[t(D,{size:22,icon:"tabler-trash"})]),_:2},1032,["onClick"])),[[B,"delete-category"]])])),[[B,"read-category"]])]))),128))]),z(m("tfoot",null,Re,512),[[we,!e(s).length]])]),_:1}),t(ce),t(I,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3"},{default:l(()=>[m("span",je,c(e(o)),1),t(ke,{modelValue:e(r),"onUpdate:modelValue":d[2]||(d[2]=i=>q(r)?r.value=i:null),size:"small","total-visible":5,length:e(O),onNext:d[3]||(d[3]=i=>A.value=[]),onPrev:d[4]||(d[4]=i=>A.value=[])},null,8,["modelValue","length"])]),_:1})]),_:1}),t(E,{isAddOpen:e(g),"onUpdate:isAddOpen":d[5]||(d[5]=i=>q(g)?g.value=i:null),onRefreshTable:x},null,8,["isAddOpen"]),t(H,{isEditOpen:e(w),"onUpdate:isEditOpen":d[6]||(d[6]=i=>q(w)?w.value=i:null),category:e(C),onRefreshTable:x},null,8,["isEditOpen","category"]),t(_e,{isDeleteOpen:e(a),"onUpdate:isDeleteOpen":d[7]||(d[7]=i=>q(a)?a.value=i:null),category:e(C),onRefreshTable:x},null,8,["isDeleteOpen","category"])])}}};export{gt as default};
