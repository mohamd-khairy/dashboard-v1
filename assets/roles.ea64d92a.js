import{bP as q,aB as G,k as g,o as b,b as D,w as l,p as e,bQ as N,bR as H,bS as I,ak as k,m as r,y as i,q as t,b$ as F,c0 as J,av as K,aw as C,al as A,ap as T,bD as B,C as me,c6 as ge,I as se,A as ae,c as U,an as z,bZ as he,F as oe,a as ne,aq as be,ag as re,ar as ye,as as Ve}from"./index.e64427d3.js";import{_ as W}from"./DialogCloseBtn.4ef52386.js";import{u as j}from"./Roles.542c04ee.js";import{V as X}from"./VForm.3f978c46.js";import{V as ee}from"./VDialog.b8fd2272.js";import{u as ce}from"./Permissions.02270474.js";import{d as P}from"./VTextField.d0ea55f9.js";import{V as te}from"./VSelect.3c00ac43.js";import{r as Z}from"./validators.dc210ddc.js";import{h as ie}from"./moment.9709ab41.js";import{V as we}from"./VSpacer.dbfcf743.js";import{V as ue}from"./VDivider.510e5eac.js";import{V as de}from"./VChip.0f7134b7.js";import{V as Se}from"./VPagination.85c66a86.js";import"./forwardRefs.74a345f5.js";import"./VOverlay.f99881ed.js";import"./lazy.05b69fdb.js";import"./index.30512b5b.js";import"./VList.e1320d57.js";import"./ssrBoot.4a5d3037.js";import"./VMenu.dadd3f9b.js";import"./VCheckboxBtn.c219e675.js";const xe={__name:"DeleteRoleDialog",props:{isDeleteOpen:{type:Boolean,required:!0},role:{type:Object,required:!0}},emits:["update:isDeleteOpen","refreshTable"],setup(E,{emit:V}){const x=E,h=V,{t:a}=q(),c=j(),p=G(),s=g(!1),_=()=>{h("update:isDeleteOpen",!1)},v=()=>{s.value=!0,c.deleteRole(x.role).then(()=>{h("refreshTable"),h("update:isDeleteOpen",!1),p.alertColor="success",p.alertMessage="\u062A\u0645 \u062D\u0630\u0641 \u0627\u0644\u062F\u0648\u0631 \u0628\u0646\u062C\u0627\u062D",p.isAlertShow=!0,setTimeout(()=>{p.isAlertShow=!1,p.alertMessage="",s.value=!1},1e3)}).catch(w=>{s.value=!1,p.alertColor="error",p.alertMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 !",p.isAlertShow=!0,setTimeout(()=>{p.isAlertShow=!1,p.alertMessage=""},2e3)})},o=w=>{h("update:isDeleteOpen",w)};return(w,S)=>{const O=W;return b(),D(ee,{width:w.$vuetify.display.smAndDown?"auto":650,"model-value":x.isDeleteOpen,"onUpdate:modelValue":o},{default:l(()=>[e(O,{onClick:S[0]||(S[0]=M=>o(!1))}),e(N,{class:"pa-sm-9 pa-5"},{default:l(()=>[e(H,null,{default:l(()=>[e(I,{class:"text-h5 text-center mb-3"},{default:l(()=>[e(k,{icon:"ph:info-light",color:"#f00",size:"50"}),r("h5",null,i(t(a)("ask_delete")),1)]),_:1})]),_:1}),e(F,null,{default:l(()=>[e(X,{ref:"refForm",onSubmit:J(v,["prevent"])},{default:l(()=>[e(K,null,{default:l(()=>[e(C,{cols:"12",class:"text-center"},{default:l(()=>[t(s)?(b(),D(A,{key:1,type:"submit",class:"position-relative me-3"},{default:l(()=>[e(k,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(b(),D(A,{key:0,type:"submit",class:"me-3"},{default:l(()=>[T(i(t(a)("buttons.confirm")),1)]),_:1})),e(A,{variant:"tonal",color:"secondary",onClick:_},{default:l(()=>[T(i(t(a)("buttons.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},Ae={class:"mx-1 my-1"},De={__name:"EditRoleDialog",props:{isEditOpen:{type:Boolean,required:!0},role:{type:Object,required:!0}},emits:["refreshTable","update:isEditOpen"],setup(E,{emit:V}){const x=E,h=V,{t:a}=q(),c=ce(),p=j(),s=G(),_=B([]),v=g(!1);me(()=>{c.fetchPermissions({}).then(y=>{_.value=y.data.data})});const o=B({name:null,display_name:null,permissions:[],guard_name:"web"});ge(()=>{o.id=x.role.id,o.name=x.role.name,o.display_name=x.role.display_name,o.permissions=x.role.permissions});const w=()=>{h("update:isEditOpen",!1)},S=g(null),O=async()=>{v.value=!0,(await S.value.validate()).valid?p.editRole(o).then(n=>{h("update:isEditOpen",!1),h("refreshTable"),s.alertColor="success",s.alertMessage="\u062A\u0645 \u062A\u0639\u062F\u064A\u0644 \u0627\u0644\u0639\u0646\u0635\u0631 \u0628\u0646\u062C\u0627\u062D",s.isAlertShow=!0,setTimeout(()=>{s.isAlertShow=!1,s.alertMessage="",v.value=!1},1e3)}).catch(n=>{n.response.data.errors?Object.keys(n.response.data.errors).forEach(d=>{s.alertMessage=a(`errors.${d}`)}):s.alertMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 !",v.value=!1,s.alertColor="error",s.isAlertShow=!0,setTimeout(()=>{s.isAlertShow=!1,s.alertMessage=""},2e3)}):(v.value=!1,s.alertMessage="\u064A\u0631\u062C\u064A \u062A\u0639\u0628\u0626\u0629 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 !",s.alertColor="error",s.isAlertShow=!0,setTimeout(()=>{s.isAlertShow=!1,s.alertMessage=""},2e3))},M=y=>{h("update:isEditOpen",y)};return(y,n)=>{const R=W;return b(),D(ee,{width:y.$vuetify.display.smAndDown?"auto":650,"model-value":x.isEditOpen,"onUpdate:modelValue":M},{default:l(()=>[e(R,{onClick:n[0]||(n[0]=d=>M(!1))}),e(N,{class:"pa-sm-9 pa-5"},{default:l(()=>[e(H,null,{default:l(()=>[e(I,{class:"text-h5 d-flex flex-column align-center gap-2 text-center mb-3"},{default:l(()=>[e(k,{icon:"zondicons:shield",size:"24",color:"primary"}),r("span",Ae,i(t(a)("Edit_Role")),1)]),_:1})]),_:1}),e(F,null,{default:l(()=>[e(X,{ref_key:"refForm",ref:S,onSubmit:J(O,["prevent"])},{default:l(()=>[e(K,null,{default:l(()=>[e(C,{cols:"12",lg:"12",sm:"6"},{default:l(()=>[e(P,{modelValue:t(o).name,"onUpdate:modelValue":n[1]||(n[1]=d=>t(o).name=d),label:t(a)("forms.name")},null,8,["modelValue","label"])]),_:1}),e(C,{cols:"12",lg:"12",sm:"6"},{default:l(()=>[e(P,{modelValue:t(o).display_name,"onUpdate:modelValue":n[2]||(n[2]=d=>t(o).display_name=d),label:t(a)("forms.display_name")},null,8,["modelValue","label"])]),_:1}),e(C,{cols:"12",lg:"12",sm:"6"},{default:l(()=>[e(te,{modelValue:t(o).permissions,"onUpdate:modelValue":n[3]||(n[3]=d=>t(o).permissions=d),items:t(_).value,label:t(a)("forms.permissions"),"item-title":"name","item-value":"name",multiple:""},null,8,["modelValue","items","label"])]),_:1}),e(C,{cols:"12",class:"text-center"},{default:l(()=>[t(v)?(b(),D(A,{key:1,type:"submit",class:"position-relative me-3"},{default:l(()=>[e(k,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(b(),D(A,{key:0,type:"submit",class:"me-3"},{default:l(()=>[T(i(t(a)("buttons.save")),1)]),_:1})),e(A,{variant:"tonal",color:"secondary",onClick:w},{default:l(()=>[T(i(t(a)("buttons.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},Oe={class:"mx-1 my-1"},Ce={__name:"AddRoleDialog",props:{isAddOpen:{type:Boolean,required:!0}},emits:["refreshTable","update:isAddOpen"],setup(E,{emit:V}){const x=E,h=V,{t:a}=q(),c=ce(),p=j(),s=G(),_=B([]),v=g(!1);me(()=>{c.fetchPermissions({}).then(y=>{_.value=y.data.data})});const o=B({name:null,display_name:null,permissions:[],guard_name:"web"}),w=()=>{h("update:isAddOpen",!1)},S=g(null),O=async()=>{v.value=!0,(await S.value.validate()).valid?p.storeRole(o).then(n=>{h("update:isAddOpen",!1),h("refreshTable"),s.alertColor="success",s.alertMessage="\u062A\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u0639\u0646\u0635\u0631 \u0628\u0646\u062C\u0627\u062D",s.isAlertShow=!0,setTimeout(()=>{s.isAlertShow=!1,s.alertMessage=""},2e3)}).catch(n=>{n.response.data.errors?Object.keys(n.response.data.errors).forEach(d=>{s.alertMessage=a(`errors.${d}`)}):s.alertMessage="\u062D\u062F\u062B \u062E\u0637\u0623 \u0645\u0627 !",v.value=!1,s.alertColor="error",s.isAlertShow=!0,setTimeout(()=>{s.isAlertShow=!1,s.alertMessage=""},2e3)}):(v.value=!1,s.alertMessage="\u064A\u0631\u062C\u064A \u062A\u0639\u0628\u0626\u0629 \u0627\u0644\u062D\u0642\u0648\u0644 \u0627\u0644\u0645\u0637\u0644\u0648\u0628\u0629 !",s.alertColor="error",s.isAlertShow=!0,setTimeout(()=>{s.isAlertShow=!1,s.alertMessage=""},2e3))},M=y=>{h("update:isAddOpen",y)};return(y,n)=>{const R=W;return b(),D(ee,{width:y.$vuetify.display.smAndDown?"auto":650,"model-value":x.isAddOpen,"onUpdate:modelValue":M},{default:l(()=>[e(R,{onClick:n[0]||(n[0]=d=>M(!1))}),e(N,{class:"pa-sm-9 pa-5"},{default:l(()=>[e(H,null,{default:l(()=>[e(I,{class:"text-h5 d-flex flex-column align-center gap-2 text-center mb-3"},{default:l(()=>[e(k,{icon:"zondicons:shield",size:"24",color:"primary"}),r("span",Oe,i(t(a)("Add_Role")),1)]),_:1})]),_:1}),e(F,null,{default:l(()=>[e(X,{ref_key:"refForm",ref:S,onSubmit:J(O,["prevent"])},{default:l(()=>[e(K,null,{default:l(()=>[e(C,{cols:"12",lg:"12",sm:"6"},{default:l(()=>[e(P,{modelValue:t(o).name,"onUpdate:modelValue":n[1]||(n[1]=d=>t(o).name=d),label:t(a)("forms.name"),rules:[t(Z)]},null,8,["modelValue","label","rules"])]),_:1}),e(C,{cols:"12",lg:"12",sm:"6"},{default:l(()=>[e(P,{modelValue:t(o).display_name,"onUpdate:modelValue":n[2]||(n[2]=d=>t(o).display_name=d),label:t(a)("forms.display_name"),rules:[t(Z)]},null,8,["modelValue","label","rules"])]),_:1}),e(C,{cols:"12",lg:"12",sm:"6"},{default:l(()=>[e(te,{modelValue:t(o).permissions,"onUpdate:modelValue":n[3]||(n[3]=d=>t(o).permissions=d),items:t(_).value,label:t(a)("forms.permissions"),"item-title":"name","item-value":"name",multiple:"",rules:[t(Z)]},null,8,["modelValue","items","label","rules"])]),_:1}),e(C,{cols:"12",class:"text-center"},{default:l(()=>[t(v)?(b(),D(A,{key:1,type:"submit",class:"position-relative me-3"},{default:l(()=>[e(k,{icon:"mingcute:loading-line",class:"loading",size:"32"})]),_:1})):(b(),D(A,{key:0,type:"submit",class:"me-3"},{default:l(()=>[T(i(t(a)("buttons.save")),1)]),_:1})),e(A,{variant:"tonal",color:"secondary",onClick:w},{default:l(()=>[T(i(t(a)("buttons.cancel")),1)]),_:1})]),_:1})]),_:1})]),_:1},512)]),_:1})]),_:1})]),_:1},8,["width","model-value"])}}},ke={class:"mx-1"},Me={style:{width:"5rem"}},Te={scope:"col",class:"font-weight-semibold"},Re={scope:"col",class:"font-weight-semibold"},$e={scope:"col",class:"font-weight-semibold"},Ee={scope:"col",class:"font-weight-semibold"},Ue={scope:"col",class:"font-weight-semibold"},ze={key:0},Fe={style:{width:"7.5rem"}},Le=r("tr",null,[r("td",{colspan:"8",class:"text-center text-body-1"}," \u0644\u0627 \u064A\u0648\u062C\u062F \u0628\u064A\u0627\u0646\u0627\u062A ")],-1),Be=[Le],Pe={class:"text-sm text-disabled"},ut={__name:"roles",setup(E){const{t:V}=q(),x=j(),h=g("");g();const a=g(5),c=g(1),p=g(1),s=g(0),_=g([]);g([]);const v=g(!1),o=g(!1),w=g({}),S=g(!1),O=()=>{x.fetchRoles({q:h.value}).then(f=>{_.value=f.data.data,p.value=_.value/a,s.value=_.value.length,c.value=1}).catch(f=>{console.log(f)})};se(()=>{O()}),se(()=>{a.value&&(c.value=1)});const M=ae(()=>(p.value=Math.ceil(_.value.length/a.value),_.value.filter((f,u)=>{let $=(c.value-1)*a.value,Q=c.value*a.value;if(u>=$&&u<Q)return!0}))),y=()=>{c.value*a.value<_.value.length&&c.value},n=()=>{c.value>1&&c.value},R=ae(()=>{const f=_.value.length?(c.value-1)*a.value+1:0,u=f+(a.value-1)<=_.value.length?f+(a.value-1):s.value;return` \u0639\u0631\u0636 \u0645\u0646 ${Y(f)} \u0625\u0644\u064A ${Y(u)} \u0645\u0646 ${Y(s.value)} \u0627\u0644\u0625\u062C\u0645\u0627\u0644\u064A `}),d=f=>{o.value=!0,w.value=f},pe=f=>{S.value=!0,w.value=f},Y=f=>{const u="\u0660\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669";return String(f).replace(/[0123456789]/g,$=>u[$])},fe=f=>{let u=ie(f).format("DD-MM-YYYY"),$=ie(f).format("hh:mm:ss A");return{date:u,time:$}};return(f,u)=>{const $=Ce,Q=De,_e=xe;return b(),U("div",null,[e(N,null,{default:l(()=>[e(I,{class:"d-flex align-center"},{default:l(()=>[e(k,{icon:"zondicons:shield",size:"24",color:"primary"}),r("span",ke,i(t(V)("Roles")),1)]),_:1}),e(F,{class:"d-flex align-center flex-wrap gap-2 py-4"},{default:l(()=>[r("div",Me,[e(te,{modelValue:t(a),"onUpdate:modelValue":u[0]||(u[0]=m=>z(a)?a.value=m:null),variant:"outlined",items:[5,10,20,30,50]},null,8,["modelValue"])]),e(A,{"prepend-icon":"tabler-plus",onClick:u[1]||(u[1]=m=>v.value=!0)},{default:l(()=>[T(i(t(V)("Add_Role")),1)]),_:1}),e(we)]),_:1}),e(ue),e(he,{class:"text-no-wrap product-list-table"},{default:l(()=>[r("thead",null,[r("tr",null,[r("th",Te,i(t(V)("forms.id")),1),r("th",Re,i(t(V)("forms.name")),1),r("th",$e,i(t(V)("forms.permissions")),1),r("th",Ee,i(t(V)("forms.created_at")),1),r("th",Ue,i(t(V)("forms.actions")),1)])]),r("tbody",null,[(b(!0),U(oe,null,ne(t(M),(m,ve)=>(b(),U("tr",{key:m.id},[r("td",null," #"+i(++ve),1),r("td",null,i(m.display_name),1),r("td",null,[(b(!0),U(oe,null,ne(m.permissions,(L,le)=>(b(),D(de,{key:L.id,class:"mx-1",style:be({display:le<4?"":"none"})},{default:l(()=>[le<4?(b(),U("span",ze,i(L),1)):re("",!0)]),_:2},1032,["style"]))),128)),m.permissions.length>4?(b(),D(de,{key:0},{default:l(()=>[T("+"+i(m.permissions.length-4),1)]),_:2},1024)):re("",!0)]),r("td",null,i(fe(m.created_at).date),1),r("td",Fe,[e(A,{icon:"",variant:"plain",color:"default",size:"x-small",onClick:L=>pe(m)},{default:l(()=>[e(k,{size:22,icon:"tabler-pencil"})]),_:2},1032,["onClick"]),e(A,{icon:"",variant:"plain",color:"default",size:"x-small",onClick:L=>d(m)},{default:l(()=>[e(k,{size:22,icon:"tabler-trash"})]),_:2},1032,["onClick"])])]))),128))]),ye(r("tfoot",null,Be,512),[[Ve,!t(_).length]])]),_:1}),e(ue),e(F,{class:"d-flex align-center flex-wrap justify-space-between gap-4 py-3"},{default:l(()=>[r("span",Pe,i(t(R)),1),e(Se,{modelValue:t(c),"onUpdate:modelValue":u[2]||(u[2]=m=>z(c)?c.value=m:null),size:"small","total-visible":t(a),length:t(p),onNext:y,onPrev:n},null,8,["modelValue","total-visible","length"])]),_:1})]),_:1}),e($,{isAddOpen:t(v),"onUpdate:isAddOpen":u[3]||(u[3]=m=>z(v)?v.value=m:null),onRefreshTable:O},null,8,["isAddOpen"]),e(Q,{isEditOpen:t(S),"onUpdate:isEditOpen":u[4]||(u[4]=m=>z(S)?S.value=m:null),role:t(w),onRefreshTable:O},null,8,["isEditOpen","role"]),e(_e,{isDeleteOpen:t(o),"onUpdate:isDeleteOpen":u[5]||(u[5]=m=>z(o)?o.value=m:null),role:t(w),onRefreshTable:O},null,8,["isDeleteOpen","role"])])}}};export{ut as default};
